<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Network Security Analyzer - House of Shield</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #7f1d1d 0%, #991b1b 100%);
            color: #fca5a5;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .back-link {
            position: absolute;
            top: 15px;
            left: 15px;
            color: white;
            text-decoration: none;
            font-size: 24px;
            transition: transform 0.3s;
        }

        .back-link:hover {
            transform: translateX(-5px);
        }

        h1 {
            color: white;
            text-align: center;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            margin-top: 10px;
        }

        .subtitle {
            text-align: center;
            color: rgba(255, 255, 255, 0.9);
            margin-top: 10px;
            font-size: 1.1em;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab-btn {
            background: rgba(127, 29, 29, 0.9);
            border: 2px solid #dc2626;
            color: #fca5a5;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            flex: 1;
            min-width: 150px;
        }

        .tab-btn:hover {
            background: #dc2626;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);
        }

        .tab-content {
            display: none;
            background: rgba(127, 29, 29, 0.9);
            border: 2px solid #dc2626;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h2 {
            color: #ef4444;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 2px solid #dc2626;
            padding-bottom: 10px;
        }

        h3 {
            color: #fca5a5;
            margin: 20px 0 15px 0;
            font-size: 1.4em;
        }

        /* Network Diagram Builder */
        .network-canvas-container {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #dc2626;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        #networkCanvas {
            width: 100%;
            height: 500px;
            background: rgba(15, 15, 15, 0.8);
            border-radius: 8px;
            cursor: crosshair;
            display: block;
        }

        .device-palette {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .device-card {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #dc2626;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: grab;
            transition: all 0.3s;
        }

        .device-card:hover {
            background: #dc2626;
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);
        }

        .device-card:active {
            cursor: grabbing;
        }

        .device-icon {
            font-size: 2em;
            margin-bottom: 8px;
        }

        .canvas-controls {
            margin-top: 15px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);
        }

        .btn-secondary {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #dc2626;
            color: #fca5a5;
        }

        /* Checklist */
        .checklist {
            display: grid;
            gap: 15px;
        }

        .checklist-item {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #dc2626;
            border-radius: 10px;
            padding: 20px;
            display: flex;
            align-items: start;
            gap: 15px;
            transition: all 0.3s;
        }

        .checklist-item:hover {
            border-color: #ef4444;
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
        }

        .checklist-item.completed {
            background: rgba(34, 197, 94, 0.1);
            border-color: #22c55e;
        }

        .checkbox-wrapper {
            flex-shrink: 0;
        }

        .checkbox {
            width: 24px;
            height: 24px;
            cursor: pointer;
            accent-color: #dc2626;
        }

        .checklist-content {
            flex: 1;
        }

        .checklist-title {
            color: #ef4444;
            font-size: 1.2em;
            margin-bottom: 8px;
        }

        .checklist-description {
            color: #fca5a5;
            line-height: 1.6;
        }

        .checklist-impact {
            margin-top: 10px;
            padding: 8px 12px;
            background: rgba(220, 38, 38, 0.2);
            border-left: 3px solid #dc2626;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .progress-bar {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            height: 30px;
            margin-top: 20px;
            overflow: hidden;
            border: 2px solid #dc2626;
        }

        .progress-fill {
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            height: 100%;
            transition: width 0.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        /* Comparison Table */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            border: 2px solid #dc2626;
            text-align: left;
        }

        .comparison-table th {
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            color: white;
            font-weight: bold;
        }

        .comparison-table tr:nth-child(even) {
            background: rgba(0, 0, 0, 0.2);
        }

        .comparison-table tr:hover {
            background: rgba(220, 38, 38, 0.2);
        }

        .security-level {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .level-broken {
            background: #7f1d1d;
            color: white;
        }

        .level-weak {
            background: #dc2626;
            color: white;
        }

        .level-moderate {
            background: #f59e0b;
            color: white;
        }

        .level-good {
            background: #84cc16;
            color: white;
        }

        .level-excellent {
            background: #22c55e;
            color: white;
        }

        /* Threats */
        .threat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .threat-card {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #dc2626;
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s;
        }

        .threat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(220, 38, 38, 0.3);
            border-color: #ef4444;
        }

        .threat-icon {
            font-size: 3em;
            text-align: center;
            margin-bottom: 15px;
        }

        .threat-title {
            color: #ef4444;
            font-size: 1.3em;
            margin-bottom: 10px;
            text-align: center;
        }

        .threat-description {
            color: #fca5a5;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .threat-prevention {
            background: rgba(220, 38, 38, 0.2);
            padding: 12px;
            border-radius: 8px;
            border-left: 3px solid #dc2626;
        }

        .threat-prevention-title {
            color: #ef4444;
            font-weight: bold;
            margin-bottom: 8px;
        }

        /* IoT Best Practices */
        .practice-list {
            display: grid;
            gap: 15px;
            margin-top: 20px;
        }

        .practice-item {
            background: rgba(0, 0, 0, 0.3);
            border-left: 4px solid #dc2626;
            padding: 20px;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .practice-item:hover {
            background: rgba(220, 38, 38, 0.2);
            border-left-width: 8px;
            transform: translateX(5px);
        }

        .practice-title {
            color: #ef4444;
            font-size: 1.2em;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .practice-icon {
            font-size: 1.5em;
        }

        /* Security Score Calculator */
        .calculator-section {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #dc2626;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .question-group {
            margin-bottom: 25px;
        }

        .question-label {
            color: #ef4444;
            font-size: 1.1em;
            margin-bottom: 12px;
            display: block;
        }

        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .radio-option:hover {
            background: rgba(220, 38, 38, 0.2);
        }

        .radio-option input[type="radio"] {
            accent-color: #dc2626;
            cursor: pointer;
        }

        .score-display {
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            margin-top: 20px;
        }

        .score-number {
            font-size: 4em;
            font-weight: bold;
            color: white;
            margin-bottom: 10px;
        }

        .score-label {
            font-size: 1.5em;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 15px;
        }

        .score-recommendation {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
            color: white;
            line-height: 1.6;
        }

        /* Quiz Mode */
        .quiz-container {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #dc2626;
            border-radius: 10px;
            padding: 30px;
        }

        .quiz-question {
            margin-bottom: 30px;
        }

        .question-text {
            color: #ef4444;
            font-size: 1.3em;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .quiz-options {
            display: grid;
            gap: 12px;
        }

        .quiz-option {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #dc2626;
            padding: 15px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            color: #fca5a5;
        }

        .quiz-option:hover {
            background: rgba(220, 38, 38, 0.2);
            transform: translateX(5px);
        }

        .quiz-option.selected {
            background: #dc2626;
            color: white;
        }

        .quiz-option.correct {
            background: #22c55e;
            color: white;
            border-color: #22c55e;
        }

        .quiz-option.incorrect {
            background: #7f1d1d;
            color: white;
            border-color: #7f1d1d;
        }

        .quiz-feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }

        .quiz-feedback.show {
            display: block;
        }

        .quiz-feedback.correct {
            background: rgba(34, 197, 94, 0.2);
            border: 2px solid #22c55e;
            color: #86efac;
        }

        .quiz-feedback.incorrect {
            background: rgba(127, 29, 29, 0.5);
            border: 2px solid #7f1d1d;
            color: #fca5a5;
        }

        .quiz-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 15px;
        }

        .quiz-score {
            text-align: center;
            margin-top: 20px;
            font-size: 1.2em;
            color: #ef4444;
        }

        /* Vulnerability Indicators */
        .vulnerability-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: bold;
            margin-left: 10px;
        }

        .vuln-critical {
            background: #7f1d1d;
            color: white;
        }

        .vuln-high {
            background: #dc2626;
            color: white;
        }

        .vuln-medium {
            background: #f59e0b;
            color: white;
        }

        .vuln-low {
            background: #84cc16;
            color: white;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .tabs {
                flex-direction: column;
            }

            .tab-btn {
                min-width: 100%;
            }

            #networkCanvas {
                height: 400px;
            }

            .threat-grid {
                grid-template-columns: 1fr;
            }

            .score-number {
                font-size: 3em;
            }
        }

        .info-box {
            background: rgba(220, 38, 38, 0.2);
            border: 2px solid #dc2626;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .info-box-title {
            color: #ef4444;
            font-size: 1.2em;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .segmentation-diagram {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #dc2626;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .network-segment {
            background: rgba(220, 38, 38, 0.1);
            border: 2px solid #dc2626;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }

        .segment-title {
            color: #ef4444;
            font-weight: bold;
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="../../catalog.html" class="back-link">&larr;</a>
            <h1>Home Network Security Analyzer</h1>
            <p class="subtitle">House of Shield - Protect Your Digital Home</p>
        </header>

        <div class="tabs">
            <button class="tab-btn active" data-tab="diagram">Network Diagram</button>
            <button class="tab-btn" data-tab="checklist">Security Checklist</button>
            <button class="tab-btn" data-tab="wifi">Wi-Fi Security</button>
            <button class="tab-btn" data-tab="threats">Common Threats</button>
            <button class="tab-btn" data-tab="iot">IoT Security</button>
            <button class="tab-btn" data-tab="calculator">Security Score</button>
            <button class="tab-btn" data-tab="quiz">Quiz Mode</button>
        </div>

        <!-- Network Diagram Builder -->
        <div id="diagram" class="tab-content active">
            <h2>Network Diagram Builder</h2>
            <p style="margin-bottom: 20px;">Visualize your home network topology and identify potential security vulnerabilities. Drag devices from the palette onto the canvas.</p>

            <div class="network-canvas-container">
                <canvas id="networkCanvas"></canvas>
                <div class="canvas-controls">
                    <button class="btn" id="analyzeBtn">Analyze Security</button>
                    <button class="btn btn-secondary" id="clearBtn">Clear Canvas</button>
                    <button class="btn btn-secondary" id="exportBtn">Export Diagram</button>
                </div>
            </div>

            <h3>Device Palette</h3>
            <div class="device-palette">
                <div class="device-card" draggable="true" data-device="router">
                    <div class="device-icon">&#128246;</div>
                    <div>Router</div>
                </div>
                <div class="device-card" draggable="true" data-device="modem">
                    <div class="device-icon">&#128225;</div>
                    <div>Modem</div>
                </div>
                <div class="device-card" draggable="true" data-device="computer">
                    <div class="device-icon">&#128187;</div>
                    <div>Computer</div>
                </div>
                <div class="device-card" draggable="true" data-device="phone">
                    <div class="device-icon">&#128241;</div>
                    <div>Phone/Tablet</div>
                </div>
                <div class="device-card" draggable="true" data-device="iot">
                    <div class="device-icon">&#128161;</div>
                    <div>IoT Device</div>
                </div>
                <div class="device-card" draggable="true" data-device="camera">
                    <div class="device-icon">&#128249;</div>
                    <div>Security Camera</div>
                </div>
                <div class="device-card" draggable="true" data-device="tv">
                    <div class="device-icon">&#128250;</div>
                    <div>Smart TV</div>
                </div>
                <div class="device-card" draggable="true" data-device="switch">
                    <div class="device-icon">&#9763;</div>
                    <div>Network Switch</div>
                </div>
            </div>

            <div id="vulnerabilityReport" style="margin-top: 20px;"></div>
        </div>

        <!-- Router Security Checklist -->
        <div id="checklist" class="tab-content">
            <h2>Router Security Checklist</h2>
            <p style="margin-bottom: 20px;">Follow these essential security practices to protect your home network from common threats and vulnerabilities.</p>

            <div class="progress-bar">
                <div class="progress-fill" id="checklistProgress">0%</div>
            </div>

            <div class="checklist" id="securityChecklist"></div>
        </div>

        <!-- Wi-Fi Security Comparison -->
        <div id="wifi" class="tab-content">
            <h2>Wi-Fi Security Protocols Comparison</h2>
            <p style="margin-bottom: 20px;">Understanding the differences between Wi-Fi security protocols is crucial for protecting your network.</p>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Protocol</th>
                        <th>Security Level</th>
                        <th>Encryption</th>
                        <th>Year Introduced</th>
                        <th>Recommendation</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>WEP</strong></td>
                        <td><span class="security-level level-broken">Broken</span></td>
                        <td>RC4 (64/128-bit)</td>
                        <td>1997</td>
                        <td>Never use - Can be cracked in minutes</td>
                    </tr>
                    <tr>
                        <td><strong>WPA</strong></td>
                        <td><span class="security-level level-weak">Weak</span></td>
                        <td>TKIP with RC4</td>
                        <td>2003</td>
                        <td>Deprecated - Vulnerable to attacks</td>
                    </tr>
                    <tr>
                        <td><strong>WPA2-TKIP</strong></td>
                        <td><span class="security-level level-moderate">Moderate</span></td>
                        <td>TKIP with RC4</td>
                        <td>2004</td>
                        <td>Avoid if possible - Use AES instead</td>
                    </tr>
                    <tr>
                        <td><strong>WPA2-AES</strong></td>
                        <td><span class="security-level level-good">Good</span></td>
                        <td>AES-CCMP (128-bit)</td>
                        <td>2004</td>
                        <td>Minimum recommended standard</td>
                    </tr>
                    <tr>
                        <td><strong>WPA3-Personal</strong></td>
                        <td><span class="security-level level-excellent">Excellent</span></td>
                        <td>AES-GCMP (128-bit)</td>
                        <td>2018</td>
                        <td>Best choice - Use whenever available</td>
                    </tr>
                    <tr>
                        <td><strong>WPA3-Enterprise</strong></td>
                        <td><span class="security-level level-excellent">Excellent</span></td>
                        <td>AES-GCMP (192-bit)</td>
                        <td>2018</td>
                        <td>Enterprise/Business networks</td>
                    </tr>
                </tbody>
            </table>

            <div class="info-box" style="margin-top: 30px;">
                <div class="info-box-title">WPA3 Key Improvements:</div>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    <li><strong>SAE (Simultaneous Authentication of Equals):</strong> Replaces PSK, resistant to offline dictionary attacks</li>
                    <li><strong>Forward Secrecy:</strong> Past sessions cannot be decrypted even if password is compromised</li>
                    <li><strong>Protection Against Brute Force:</strong> Limits password guessing attempts</li>
                    <li><strong>Improved Encryption:</strong> 192-bit security suite for enterprise networks</li>
                    <li><strong>Enhanced Open Networks:</strong> Opportunistic Wireless Encryption (OWE) for public hotspots</li>
                </ul>
            </div>

            <div class="info-box" style="margin-top: 20px;">
                <div class="info-box-title">Password Strength Requirements:</div>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    <li><strong>Minimum Length:</strong> 16+ characters (longer is better)</li>
                    <li><strong>Complexity:</strong> Mix of uppercase, lowercase, numbers, and symbols</li>
                    <li><strong>Avoid:</strong> Dictionary words, personal information, common patterns</li>
                    <li><strong>Best Practice:</strong> Use a passphrase or password manager generated password</li>
                </ul>
            </div>
        </div>

        <!-- Common Home Network Threats -->
        <div id="threats" class="tab-content">
            <h2>Common Home Network Threats</h2>
            <p style="margin-bottom: 20px;">Understanding these threats helps you implement proper defenses and protect your network.</p>

            <div class="threat-grid" id="threatGrid"></div>
        </div>

        <!-- IoT Security Best Practices -->
        <div id="iot" class="tab-content">
            <h2>IoT Security Best Practices</h2>
            <p style="margin-bottom: 20px;">Internet of Things devices often have weak security. Follow these practices to minimize risks.</p>

            <div class="info-box">
                <div class="info-box-title">Why IoT Devices Are Vulnerable:</div>
                <ul style="margin-left: 20px; line-height: 1.8;">
                    <li>Default credentials rarely changed by users</li>
                    <li>Infrequent or no security updates</li>
                    <li>Limited processing power for encryption</li>
                    <li>Always-on internet connectivity</li>
                    <li>Manufacturers prioritize features over security</li>
                </ul>
            </div>

            <h3>Network Segmentation Strategy</h3>
            <div class="segmentation-diagram">
                <div class="network-segment">
                    <div class="segment-title">Main Network (VLAN 1)</div>
                    <div>Computers, phones, tablets - Trusted devices</div>
                </div>
                <div class="network-segment">
                    <div class="segment-title">Guest Network (VLAN 2)</div>
                    <div>Visitor devices - No access to main network</div>
                </div>
                <div class="network-segment">
                    <div class="segment-title">IoT Network (VLAN 3)</div>
                    <div>Smart home devices - Isolated from main network</div>
                </div>
                <div class="network-segment">
                    <div class="segment-title">Security Devices (VLAN 4)</div>
                    <div>Cameras, sensors - Limited internet access</div>
                </div>
            </div>

            <div class="practice-list" id="iotPractices"></div>
        </div>

        <!-- Security Score Calculator -->
        <div id="calculator" class="tab-content">
            <h2>Home Network Security Score Calculator</h2>
            <p style="margin-bottom: 20px;">Answer these questions to assess your current network security posture.</p>

            <div class="calculator-section" id="calculatorQuestions"></div>

            <button class="btn" id="calculateScoreBtn" style="width: 100%; padding: 15px; font-size: 1.1em;">Calculate Security Score</button>

            <div id="scoreDisplay" style="display: none;"></div>
        </div>

        <!-- Quiz Mode -->
        <div id="quiz" class="tab-content">
            <h2>Home Network Security Quiz</h2>
            <p style="margin-bottom: 20px;">Test your knowledge of home network security concepts and best practices.</p>

            <div class="quiz-score" id="quizScore">Score: 0 / 0</div>

            <div class="quiz-container" id="quizContainer"></div>

            <div class="quiz-navigation">
                <button class="btn btn-secondary" id="prevQuizBtn">Previous</button>
                <button class="btn" id="nextQuizBtn">Next Question</button>
                <button class="btn" id="restartQuizBtn" style="display: none;">Restart Quiz</button>
            </div>
        </div>
    </div>

    <script>
        // Tab Navigation
        const tabBtns = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');

        tabBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const tabName = btn.dataset.tab;

                tabBtns.forEach(b => b.classList.remove('active'));
                tabContents.forEach(c => c.classList.remove('active'));

                btn.classList.add('active');
                document.getElementById(tabName).classList.add('active');
            });
        });

        // Network Diagram Builder
        const canvas = document.getElementById('networkCanvas');
        const ctx = canvas.getContext('2d');
        let devices = [];
        let connections = [];
        let selectedDevice = null;
        let isDragging = false;
        let connectingFrom = null;

        // Set canvas size
        function resizeCanvas() {
            const container = canvas.parentElement;
            canvas.width = container.clientWidth - 40;
            canvas.height = 500;
            drawNetwork();
        }

        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Device drag and drop
        const deviceCards = document.querySelectorAll('.device-card');
        deviceCards.forEach(card => {
            card.addEventListener('dragstart', (e) => {
                e.dataTransfer.setData('deviceType', card.dataset.device);
            });
        });

        canvas.addEventListener('dragover', (e) => {
            e.preventDefault();
        });

        canvas.addEventListener('drop', (e) => {
            e.preventDefault();
            const deviceType = e.dataTransfer.getData('deviceType');
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            const deviceIcons = {
                router: '&#128246;',
                modem: '&#128225;',
                computer: '&#128187;',
                phone: '&#128241;',
                iot: '&#128161;',
                camera: '&#128249;',
                tv: '&#128250;',
                switch: '&#9763;'
            };

            devices.push({
                type: deviceType,
                icon: deviceIcons[deviceType],
                x: x,
                y: y,
                id: Date.now()
            });

            drawNetwork();
        });

        // Canvas mouse events for connecting devices
        canvas.addEventListener('mousedown', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            const clickedDevice = devices.find(d =>
                Math.sqrt((d.x - x) ** 2 + (d.y - y) ** 2) < 30
            );

            if (e.shiftKey && clickedDevice) {
                // Shift + Click to create connections
                if (!connectingFrom) {
                    connectingFrom = clickedDevice;
                } else {
                    connections.push({
                        from: connectingFrom.id,
                        to: clickedDevice.id
                    });
                    connectingFrom = null;
                    drawNetwork();
                }
            } else if (clickedDevice) {
                selectedDevice = clickedDevice;
                isDragging = true;
            }
        });

        canvas.addEventListener('mousemove', (e) => {
            if (isDragging && selectedDevice) {
                const rect = canvas.getBoundingClientRect();
                selectedDevice.x = e.clientX - rect.left;
                selectedDevice.y = e.clientY - rect.top;
                drawNetwork();
            }
        });

        canvas.addEventListener('mouseup', () => {
            isDragging = false;
            selectedDevice = null;
        });

        // Double-click to remove device
        canvas.addEventListener('dblclick', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            const clickedIndex = devices.findIndex(d =>
                Math.sqrt((d.x - x) ** 2 + (d.y - y) ** 2) < 30
            );

            if (clickedIndex !== -1) {
                const deviceId = devices[clickedIndex].id;
                devices.splice(clickedIndex, 1);
                connections = connections.filter(c => c.from !== deviceId && c.to !== deviceId);
                drawNetwork();
            }
        });

        function drawNetwork() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw connections
            ctx.strokeStyle = '#dc2626';
            ctx.lineWidth = 2;
            connections.forEach(conn => {
                const fromDevice = devices.find(d => d.id === conn.from);
                const toDevice = devices.find(d => d.id === conn.to);
                if (fromDevice && toDevice) {
                    ctx.beginPath();
                    ctx.moveTo(fromDevice.x, fromDevice.y);
                    ctx.lineTo(toDevice.x, toDevice.y);
                    ctx.stroke();
                }
            });

            // Draw devices
            devices.forEach(device => {
                ctx.font = '40px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';

                // Device background
                ctx.fillStyle = 'rgba(220, 38, 38, 0.3)';
                ctx.beginPath();
                ctx.arc(device.x, device.y, 35, 0, Math.PI * 2);
                ctx.fill();

                // Device icon (convert HTML entity to emoji)
                const temp = document.createElement('div');
                temp.innerHTML = device.icon;
                const emoji = temp.textContent;
                ctx.fillText(emoji, device.x, device.y);

                // Device label
                ctx.font = '12px Arial';
                ctx.fillStyle = '#fca5a5';
                ctx.fillText(device.type, device.x, device.y + 50);
            });

            // Draw instructions
            if (devices.length === 0) {
                ctx.font = '16px Arial';
                ctx.fillStyle = '#fca5a5';
                ctx.textAlign = 'center';
                ctx.fillText('Drag devices here to build your network', canvas.width / 2, canvas.height / 2);
                ctx.fillText('Shift + Click on two devices to connect them', canvas.width / 2, canvas.height / 2 + 25);
                ctx.fillText('Double-click a device to remove it', canvas.width / 2, canvas.height / 2 + 50);
            }
        }

        // Clear canvas
        document.getElementById('clearBtn').addEventListener('click', () => {
            devices = [];
            connections = [];
            document.getElementById('vulnerabilityReport').innerHTML = '';
            drawNetwork();
        });

        // Analyze security
        document.getElementById('analyzeBtn').addEventListener('click', () => {
            const vulnerabilities = [];
            const recommendations = [];

            // Check for router
            const hasRouter = devices.some(d => d.type === 'router');
            if (!hasRouter && devices.length > 0) {
                vulnerabilities.push('No router detected - All devices should connect through a router');
            }

            // Check for exposed IoT devices
            const iotDevices = devices.filter(d => ['iot', 'camera', 'tv'].includes(d.type));
            if (iotDevices.length > 2) {
                vulnerabilities.push(`${iotDevices.length} IoT devices detected - Consider network segmentation`);
                recommendations.push('Create a separate VLAN or guest network for IoT devices');
            }

            // Check for cameras
            const cameras = devices.filter(d => d.type === 'camera');
            if (cameras.length > 0) {
                recommendations.push('Ensure security cameras are on an isolated network with no internet access unless necessary');
            }

            // Check network complexity
            if (devices.length > 10) {
                recommendations.push('Large network detected - Consider using a managed switch for better control');
            }

            // Generate report
            let report = '<div class="info-box"><div class="info-box-title">Security Analysis Report</div>';

            if (vulnerabilities.length > 0) {
                report += '<h4 style="color: #ef4444; margin-top: 15px;">Vulnerabilities Found:</h4><ul style="margin-left: 20px; line-height: 1.8;">';
                vulnerabilities.forEach(v => {
                    report += `<li><span class="vulnerability-badge vuln-high">HIGH</span> ${v}</li>`;
                });
                report += '</ul>';
            }

            if (recommendations.length > 0) {
                report += '<h4 style="color: #ef4444; margin-top: 15px;">Recommendations:</h4><ul style="margin-left: 20px; line-height: 1.8;">';
                recommendations.forEach(r => {
                    report += `<li>${r}</li>`;
                });
                report += '</ul>';
            }

            if (vulnerabilities.length === 0 && recommendations.length === 0) {
                report += '<p style="margin-top: 10px; color: #86efac;">No critical vulnerabilities detected in current topology. Continue monitoring as you add devices.</p>';
            }

            report += '</div>';
            document.getElementById('vulnerabilityReport').innerHTML = report;
        });

        // Export diagram
        document.getElementById('exportBtn').addEventListener('click', () => {
            const dataUrl = canvas.toDataURL('image/png');
            const link = document.createElement('a');
            link.download = 'network-diagram.png';
            link.href = dataUrl;
            link.click();
        });

        // Security Checklist
        const checklistItems = [
            {
                title: 'Change Default Admin Credentials',
                description: 'Replace the default username and password for your router admin panel. Default credentials are publicly available and commonly exploited.',
                impact: 'Critical - Prevents unauthorized access to router settings'
            },
            {
                title: 'Update Router Firmware',
                description: 'Regularly check for and install firmware updates. Updates patch security vulnerabilities and improve performance.',
                impact: 'High - Protects against known exploits'
            },
            {
                title: 'Disable WPS (Wi-Fi Protected Setup)',
                description: 'WPS has known vulnerabilities that allow brute-force attacks. Disable this feature in router settings.',
                impact: 'High - Prevents PIN brute-force attacks'
            },
            {
                title: 'Enable WPA3 or WPA2-AES',
                description: 'Use the strongest encryption available. WPA3 is preferred, but WPA2-AES is acceptable if WPA3 is unavailable.',
                impact: 'Critical - Ensures wireless traffic encryption'
            },
            {
                title: 'Set Strong Wi-Fi Password',
                description: 'Use a password of at least 16 characters with a mix of letters, numbers, and symbols. Avoid dictionary words.',
                impact: 'Critical - Prevents unauthorized network access'
            },
            {
                title: 'Enable Router Firewall',
                description: 'Enable the built-in firewall (SPI firewall) to filter incoming traffic and protect against common attacks.',
                impact: 'High - Blocks malicious inbound connections'
            },
            {
                title: 'Disable Remote Management',
                description: 'Turn off remote administration features unless absolutely necessary. If needed, use VPN access instead.',
                impact: 'High - Reduces attack surface'
            },
            {
                title: 'Create Guest Network',
                description: 'Set up a separate guest network for visitors and IoT devices to isolate them from your main network.',
                impact: 'Medium - Limits potential breach impact'
            },
            {
                title: 'Disable UPnP',
                description: 'Universal Plug and Play can be exploited to open ports. Disable unless you have specific applications requiring it.',
                impact: 'Medium - Prevents unauthorized port forwarding'
            },
            {
                title: 'Change Default SSID',
                description: 'Rename your network to something unique that doesn\'t reveal router model or personal information.',
                impact: 'Low - Reduces information disclosure'
            },
            {
                title: 'Enable MAC Address Filtering',
                description: 'Whitelist approved device MAC addresses (note: this is bypassable but adds a layer of difficulty).',
                impact: 'Low - Additional barrier for attackers'
            },
            {
                title: 'Disable SSID Broadcast (Optional)',
                description: 'Hide your network name from casual scanning. Note: determined attackers can still detect hidden networks.',
                impact: 'Low - Minor security through obscurity'
            }
        ];

        function renderChecklist() {
            const container = document.getElementById('securityChecklist');
            container.innerHTML = '';

            checklistItems.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'checklist-item';
                div.innerHTML = `
                    <div class="checkbox-wrapper">
                        <input type="checkbox" class="checkbox" id="check-${index}" data-index="${index}">
                    </div>
                    <div class="checklist-content">
                        <div class="checklist-title">${item.title}</div>
                        <div class="checklist-description">${item.description}</div>
                        <div class="checklist-impact"><strong>Impact:</strong> ${item.impact}</div>
                    </div>
                `;
                container.appendChild(div);
            });

            // Add event listeners
            document.querySelectorAll('.checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', updateProgress);
            });
        }

        function updateProgress() {
            const checkboxes = document.querySelectorAll('.checkbox');
            const checked = document.querySelectorAll('.checkbox:checked').length;
            const total = checkboxes.length;
            const percentage = Math.round((checked / total) * 100);

            document.getElementById('checklistProgress').style.width = percentage + '%';
            document.getElementById('checklistProgress').textContent = percentage + '%';

            // Update checklist item appearance
            checkboxes.forEach(checkbox => {
                const item = checkbox.closest('.checklist-item');
                if (checkbox.checked) {
                    item.classList.add('completed');
                } else {
                    item.classList.remove('completed');
                }
            });
        }

        renderChecklist();

        // Common Threats
        const threats = [
            {
                icon: '&#128123;',
                title: 'Rogue Access Points',
                description: 'Unauthorized wireless access points connected to your network, either maliciously installed or accidentally set up by users.',
                prevention: 'Regularly scan for unknown devices, use MAC address filtering, monitor DHCP logs, and conduct periodic physical inspections of network equipment.'
            },
            {
                icon: '&#128530;',
                title: 'Man-in-the-Middle Attacks',
                description: 'Attackers intercept communication between devices to steal data, inject malware, or modify traffic. Often performed through ARP spoofing or DNS manipulation.',
                prevention: 'Use HTTPS everywhere, enable ARP inspection on managed switches, use VPN for sensitive operations, and verify SSL certificates.'
            },
            {
                icon: '&#128161;',
                title: 'IoT Device Exploitation',
                description: 'Smart home devices with weak security can be compromised and used as entry points to attack other network devices or participate in botnets.',
                prevention: 'Isolate IoT devices on separate network, change default passwords, disable unnecessary features, keep firmware updated, and regularly review device logs.'
            },
            {
                icon: '&#127760;',
                title: 'DNS Hijacking',
                description: 'Attackers modify DNS settings to redirect traffic to malicious websites, steal credentials, or serve malware while appearing legitimate.',
                prevention: 'Use reputable DNS servers (like Cloudflare 1.1.1.1 or Google 8.8.8.8), enable DNSSEC, lock router DNS settings, and monitor for unexpected changes.'
            },
            {
                icon: '&#128295;',
                title: 'Firmware Exploits',
                description: 'Outdated router firmware contains known vulnerabilities that can be exploited remotely to gain administrative access or execute malicious code.',
                prevention: 'Enable automatic firmware updates if available, regularly check manufacturer website for updates, subscribe to security bulletins, and replace EOL devices.'
            },
            {
                icon: '&#128274;',
                title: 'Weak Password Attacks',
                description: 'Brute force and dictionary attacks against weak Wi-Fi passwords or admin credentials, especially targeting WPA2 handshakes captured during connection.',
                prevention: 'Use passwords 16+ characters with high entropy, enable account lockout after failed attempts, use WPA3 with SAE, and monitor failed authentication logs.'
            },
            {
                icon: '&#128421;',
                title: 'Port Scanning & Services',
                description: 'Attackers scan for open ports and running services to identify vulnerabilities and potential attack vectors on exposed devices.',
                prevention: 'Close unnecessary ports, disable unused services, use firewall to restrict inbound connections, enable stealth mode, and regularly perform security audits.'
            },
            {
                icon: '&#128230;',
                title: 'Evil Twin Attacks',
                description: 'Fake access points mimicking your legitimate network SSID to trick users into connecting and revealing credentials or sensitive data.',
                prevention: 'Use certificate-based authentication (WPA3-Enterprise), educate users about verifying networks, implement 802.1X authentication, and monitor for duplicate SSIDs.'
            }
        ];

        function renderThreats() {
            const container = document.getElementById('threatGrid');
            threats.forEach(threat => {
                const temp = document.createElement('div');
                temp.innerHTML = threat.icon;
                const emoji = temp.textContent;

                const card = document.createElement('div');
                card.className = 'threat-card';
                card.innerHTML = `
                    <div class="threat-icon">${emoji}</div>
                    <div class="threat-title">${threat.title}</div>
                    <div class="threat-description">${threat.description}</div>
                    <div class="threat-prevention">
                        <div class="threat-prevention-title">Prevention:</div>
                        ${threat.prevention}
                    </div>
                `;
                container.appendChild(card);
            });
        }

        renderThreats();

        // IoT Best Practices
        const iotPractices = [
            {
                icon: '&#128274;',
                title: 'Change All Default Passwords',
                description: 'Replace factory default credentials immediately upon setup. Use unique, strong passwords for each device. Many IoT compromises occur because users never change "admin/admin" or similar defaults.'
            },
            {
                icon: '&#128736;',
                title: 'Enable Automatic Updates',
                description: 'Configure devices to automatically install security patches when available. If auto-update isn\'t supported, set calendar reminders to check monthly for firmware updates from manufacturer websites.'
            },
            {
                icon: '&#128279;',
                title: 'Network Segmentation',
                description: 'Isolate IoT devices on a separate VLAN or guest network. This prevents compromised smart bulbs or cameras from accessing computers containing sensitive data. Use firewall rules to restrict inter-VLAN traffic.'
            },
            {
                icon: '&#128683;',
                title: 'Disable Unnecessary Features',
                description: 'Turn off unused protocols (Telnet, FTP, UPnP), remote access features, voice assistants, and cloud integrations you don\'t need. Each enabled feature is a potential attack vector.'
            },
            {
                icon: '&#128065;',
                title: 'Review Privacy Settings',
                description: 'Audit what data each device collects, where it\'s sent, and who has access. Disable analytics, usage reporting, and voice recording features unless essential for device function.'
            },
            {
                icon: '&#128736;',
                title: 'Regular Security Audits',
                description: 'Quarterly, review all IoT devices: check for firmware updates, verify they\'re still needed, review access logs, ensure they\'re on correct network segment, and remove/reset unused devices.'
            },
            {
                icon: '&#128241;',
                title: 'Use Manufacturer Apps Carefully',
                description: 'Only install official apps from verified developers. Review app permissions and deny access to contacts, location, or other unnecessary data. Consider using dedicated smartphone for IoT control.'
            },
            {
                icon: '&#9888;',
                title: 'Monitor Device Behavior',
                description: 'Set up alerts for unusual traffic patterns, unexpected internet connections, or configuration changes. Tools like Pi-hole or network monitoring software can reveal suspicious IoT activity.'
            },
            {
                icon: '&#128722;',
                title: 'Research Before Purchase',
                description: 'Before buying IoT devices, research manufacturer\'s security track record, update frequency, privacy policy, and end-of-life support commitments. Avoid brands with poor security history.'
            },
            {
                icon: '&#128365;',
                title: 'Physical Security',
                description: 'Secure physical access to devices like cameras and smart locks. Place them where tampering would be noticed. Use tamper-evident seals on critical devices and check regularly for modifications.'
            }
        ];

        function renderIoTPractices() {
            const container = document.getElementById('iotPractices');
            iotPractices.forEach(practice => {
                const temp = document.createElement('div');
                temp.innerHTML = practice.icon;
                const emoji = temp.textContent;

                const item = document.createElement('div');
                item.className = 'practice-item';
                item.innerHTML = `
                    <div class="practice-title">
                        <span class="practice-icon">${emoji}</span>
                        ${practice.title}
                    </div>
                    <div style="color: #fca5a5; line-height: 1.6;">${practice.description}</div>
                `;
                container.appendChild(item);
            });
        }

        renderIoTPractices();

        // Security Score Calculator
        const calculatorQuestions = [
            {
                question: 'What Wi-Fi security protocol do you use?',
                options: [
                    { text: 'WEP or Open Network', points: 0 },
                    { text: 'WPA or WPA2-TKIP', points: 5 },
                    { text: 'WPA2-AES', points: 15 },
                    { text: 'WPA3', points: 20 }
                ]
            },
            {
                question: 'How strong is your Wi-Fi password?',
                options: [
                    { text: 'Less than 8 characters or default', points: 0 },
                    { text: '8-12 characters, simple', points: 5 },
                    { text: '12-16 characters, mixed', points: 10 },
                    { text: '16+ characters, complex passphrase', points: 15 }
                ]
            },
            {
                question: 'Have you changed the default router admin password?',
                options: [
                    { text: 'No, still using default', points: 0 },
                    { text: 'Yes, to a simple password', points: 5 },
                    { text: 'Yes, to a strong unique password', points: 15 }
                ]
            },
            {
                question: 'How often do you update router firmware?',
                options: [
                    { text: 'Never or rarely', points: 0 },
                    { text: 'When I remember (annually)', points: 5 },
                    { text: 'Quarterly or when notified', points: 10 },
                    { text: 'Automatic updates enabled', points: 15 }
                ]
            },
            {
                question: 'Do you use a guest network for visitors and IoT?',
                options: [
                    { text: 'No guest network', points: 0 },
                    { text: 'Guest network for visitors only', points: 5 },
                    { text: 'Separate networks for guests and IoT', points: 15 }
                ]
            },
            {
                question: 'Is WPS (Wi-Fi Protected Setup) disabled?',
                options: [
                    { text: 'Don\'t know', points: 0 },
                    { text: 'No, WPS is enabled', points: 0 },
                    { text: 'Yes, WPS is disabled', points: 10 }
                ]
            },
            {
                question: 'How do you manage IoT device passwords?',
                options: [
                    { text: 'Use default passwords', points: 0 },
                    { text: 'Change some passwords', points: 5 },
                    { text: 'Unique strong password for each device', points: 10 }
                ]
            }
        ];

        function renderCalculator() {
            const container = document.getElementById('calculatorQuestions');
            calculatorQuestions.forEach((q, index) => {
                const section = document.createElement('div');
                section.className = 'question-group';

                let html = `<label class="question-label">${index + 1}. ${q.question}</label><div class="radio-group">`;

                q.options.forEach((option, optIndex) => {
                    html += `
                        <label class="radio-option">
                            <input type="radio" name="q${index}" value="${option.points}" data-question="${index}">
                            <span>${option.text}</span>
                        </label>
                    `;
                });

                html += '</div>';
                section.innerHTML = html;
                container.appendChild(section);
            });
        }

        renderCalculator();

        document.getElementById('calculateScoreBtn').addEventListener('click', () => {
            let totalScore = 0;
            let answeredQuestions = 0;

            calculatorQuestions.forEach((q, index) => {
                const selected = document.querySelector(`input[name="q${index}"]:checked`);
                if (selected) {
                    totalScore += parseInt(selected.value);
                    answeredQuestions++;
                }
            });

            if (answeredQuestions !== calculatorQuestions.length) {
                alert('Please answer all questions before calculating your score.');
                return;
            }

            const maxScore = calculatorQuestions.reduce((sum, q) => {
                return sum + Math.max(...q.options.map(o => o.points));
            }, 0);

            const percentage = Math.round((totalScore / maxScore) * 100);

            let rating, recommendation, color;
            if (percentage >= 90) {
                rating = 'Excellent';
                color = '#22c55e';
                recommendation = 'Your network security is exemplary! Continue monitoring and updating regularly. Consider advanced measures like IDS/IPS and security auditing tools.';
            } else if (percentage >= 75) {
                rating = 'Good';
                color = '#84cc16';
                recommendation = 'Your network has solid security foundations. Focus on the areas where you scored lower to achieve excellent security posture.';
            } else if (percentage >= 50) {
                rating = 'Fair';
                color = '#f59e0b';
                recommendation = 'Your network has basic security but significant vulnerabilities remain. Prioritize enabling WPA3, updating firmware, and implementing network segmentation.';
            } else if (percentage >= 25) {
                rating = 'Poor';
                color = '#dc2626';
                recommendation = 'Your network is vulnerable to common attacks. Immediately change default passwords, enable WPA2/WPA3, update firmware, and review the security checklist.';
            } else {
                rating = 'Critical';
                color = '#7f1d1d';
                recommendation = 'Your network security is critically insufficient. Take immediate action: change all default passwords, enable WPA2 minimum, disable WPS, and update all firmware.';
            }

            const displayDiv = document.getElementById('scoreDisplay');
            displayDiv.style.display = 'block';
            displayDiv.innerHTML = `
                <div class="score-display">
                    <div class="score-number" style="color: ${color}">${percentage}</div>
                    <div class="score-label">Security Score - ${rating}</div>
                    <div class="score-recommendation">${recommendation}</div>
                    <div style="margin-top: 20px; color: rgba(255,255,255,0.8);">
                        <strong>Total Points:</strong> ${totalScore} / ${maxScore}
                    </div>
                </div>
            `;

            displayDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        });

        // Quiz Mode
        const quizQuestions = [
            {
                question: 'Which Wi-Fi security protocol is currently the most secure for home networks?',
                options: ['WPA2-AES', 'WPA3', 'WPA-TKIP', 'WEP'],
                correct: 1,
                explanation: 'WPA3 is the latest and most secure Wi-Fi protocol, offering improved encryption, protection against brute-force attacks, and forward secrecy.'
            },
            {
                question: 'What is the minimum recommended password length for Wi-Fi networks?',
                options: ['8 characters', '12 characters', '16 characters', '20 characters'],
                correct: 2,
                explanation: '16+ characters is recommended for Wi-Fi passwords. Longer passwords are exponentially harder to crack through brute-force attacks.'
            },
            {
                question: 'Why should WPS (Wi-Fi Protected Setup) be disabled?',
                options: [
                    'It slows down the network',
                    'It\'s vulnerable to brute-force PIN attacks',
                    'It uses too much power',
                    'It\'s incompatible with modern devices'
                ],
                correct: 1,
                explanation: 'WPS has a fundamental vulnerability where the 8-digit PIN can be brute-forced in hours. This completely bypasses WPA2/WPA3 security.'
            },
            {
                question: 'What is the primary purpose of creating a guest network?',
                options: [
                    'To increase internet speed',
                    'To isolate visitors and untrusted devices from main network',
                    'To save bandwidth',
                    'To comply with regulations'
                ],
                correct: 1,
                explanation: 'Guest networks isolate untrusted devices, preventing them from accessing your main network resources, files, and sensitive devices.'
            },
            {
                question: 'How often should you update your router firmware?',
                options: [
                    'Never, it works fine as-is',
                    'Only when you notice problems',
                    'Regularly, or enable automatic updates',
                    'Once a year is sufficient'
                ],
                correct: 2,
                explanation: 'Regular firmware updates patch security vulnerabilities. Enable automatic updates or check monthly for critical security patches.'
            },
            {
                question: 'What is network segmentation in the context of IoT security?',
                options: [
                    'Dividing bandwidth equally among devices',
                    'Separating IoT devices onto isolated network segments',
                    'Organizing cables neatly',
                    'Creating multiple SSIDs for aesthetics'
                ],
                correct: 1,
                explanation: 'Network segmentation isolates IoT devices on separate VLANs or networks, preventing compromised devices from accessing critical resources.'
            },
            {
                question: 'What does DNS hijacking allow attackers to do?',
                options: [
                    'Steal bandwidth',
                    'Redirect traffic to malicious websites',
                    'See your browsing history',
                    'Control your router settings'
                ],
                correct: 1,
                explanation: 'DNS hijacking redirects domain name lookups to malicious IP addresses, sending users to fake websites that steal credentials or serve malware.'
            },
            {
                question: 'Why are default admin credentials dangerous?',
                options: [
                    'They expire quickly',
                    'They\'re publicly available online',
                    'They\'re too complex to remember',
                    'They slow down login'
                ],
                correct: 1,
                explanation: 'Default credentials are published in manuals and online databases. Attackers systematically try these to gain unauthorized router access.'
            },
            {
                question: 'What is a man-in-the-middle (MITM) attack?',
                options: [
                    'Physical theft of router',
                    'Intercepting communication between devices',
                    'Overloading network with traffic',
                    'Guessing passwords repeatedly'
                ],
                correct: 1,
                explanation: 'MITM attacks intercept communication between two parties, allowing attackers to read, modify, or inject data into the conversation.'
            },
            {
                question: 'Which of these is the BEST practice for IoT devices?',
                options: [
                    'Keep them on the main network for convenience',
                    'Use the same password for all devices',
                    'Isolate them on a separate network with limited access',
                    'Disable security features for better performance'
                ],
                correct: 2,
                explanation: 'IoT devices should be isolated on separate networks with restricted access. This limits damage if a device is compromised.'
            }
        ];

        let currentQuizQuestion = 0;
        let quizScore = 0;
        let quizAnswered = new Array(quizQuestions.length).fill(false);

        function renderQuiz() {
            const container = document.getElementById('quizContainer');
            const question = quizQuestions[currentQuizQuestion];

            let html = `
                <div class="quiz-question">
                    <div class="question-text">Question ${currentQuizQuestion + 1} of ${quizQuestions.length}: ${question.question}</div>
                    <div class="quiz-options">
            `;

            question.options.forEach((option, index) => {
                html += `
                    <div class="quiz-option" data-index="${index}">
                        ${option}
                    </div>
                `;
            });

            html += `
                    </div>
                    <div class="quiz-feedback" id="quizFeedback"></div>
                </div>
            `;

            container.innerHTML = html;

            // Add click handlers
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.addEventListener('click', () => selectQuizAnswer(option));
            });

            updateQuizNavigation();
            updateQuizScore();
        }

        function selectQuizAnswer(selectedOption) {
            if (quizAnswered[currentQuizQuestion]) return;

            const selectedIndex = parseInt(selectedOption.dataset.index);
            const question = quizQuestions[currentQuizQuestion];
            const isCorrect = selectedIndex === question.correct;

            selectedOption.classList.add('selected');

            // Show correct answer
            document.querySelectorAll('.quiz-option').forEach((option, index) => {
                option.style.pointerEvents = 'none';
                if (index === question.correct) {
                    option.classList.add('correct');
                } else if (index === selectedIndex && !isCorrect) {
                    option.classList.add('incorrect');
                }
            });

            // Show feedback
            const feedback = document.getElementById('quizFeedback');
            feedback.className = 'quiz-feedback show ' + (isCorrect ? 'correct' : 'incorrect');
            feedback.innerHTML = `
                <strong>${isCorrect ? 'Correct!' : 'Incorrect.'}</strong><br>
                ${question.explanation}
            `;

            quizAnswered[currentQuizQuestion] = true;
            if (isCorrect) quizScore++;
            updateQuizScore();
        }

        function updateQuizNavigation() {
            const prevBtn = document.getElementById('prevQuizBtn');
            const nextBtn = document.getElementById('nextQuizBtn');
            const restartBtn = document.getElementById('restartQuizBtn');

            prevBtn.style.display = currentQuizQuestion > 0 ? 'block' : 'none';

            if (currentQuizQuestion === quizQuestions.length - 1) {
                if (quizAnswered[currentQuizQuestion]) {
                    nextBtn.style.display = 'none';
                    restartBtn.style.display = 'block';
                } else {
                    nextBtn.style.display = 'block';
                    nextBtn.textContent = 'Finish Quiz';
                }
            } else {
                nextBtn.style.display = 'block';
                nextBtn.textContent = 'Next Question';
                restartBtn.style.display = 'none';
            }
        }

        function updateQuizScore() {
            const answeredCount = quizAnswered.filter(a => a).length;
            document.getElementById('quizScore').textContent = `Score: ${quizScore} / ${answeredCount} (${quizQuestions.length} questions total)`;
        }

        document.getElementById('prevQuizBtn').addEventListener('click', () => {
            if (currentQuizQuestion > 0) {
                currentQuizQuestion--;
                renderQuiz();
            }
        });

        document.getElementById('nextQuizBtn').addEventListener('click', () => {
            if (currentQuizQuestion < quizQuestions.length - 1) {
                currentQuizQuestion++;
                renderQuiz();
            }
        });

        document.getElementById('restartQuizBtn').addEventListener('click', () => {
            currentQuizQuestion = 0;
            quizScore = 0;
            quizAnswered = new Array(quizQuestions.length).fill(false);
            renderQuiz();
        });

        renderQuiz();
    </script>
</body>
</html>