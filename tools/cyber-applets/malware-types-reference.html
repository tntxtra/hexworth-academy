<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CompTIA A+ Core 2: Malware Types Reference | House of Shield</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-red: #dc2626;
            --dark-red: #991b1b;
            --light-red: #fca5a5;
            --gold: #fbbf24;
            --dark-gold: #d97706;
            --bg-dark: #1f2937;
            --bg-darker: #111827;
            --bg-card: #374151;
            --text-light: #f9fafb;
            --text-gray: #d1d5db;
            --border-color: #4b5563;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--bg-darker) 0%, var(--bg-dark) 100%);
            color: var(--text-light);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--dark-red) 0%, var(--primary-red) 100%);
            padding: 30px 20px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(220, 38, 38, 0.3);
            border-bottom: 3px solid var(--gold);
            margin-bottom: 30px;
        }

        .shield-icon {
            font-size: 48px;
            margin-bottom: 10px;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .subtitle {
            color: var(--gold);
            font-size: 1.2em;
            font-weight: 500;
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tab-btn {
            background: var(--bg-card);
            color: var(--text-light);
            border: 2px solid var(--border-color);
            padding: 12px 24px;
            cursor: pointer;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .tab-btn:hover {
            background: var(--primary-red);
            border-color: var(--gold);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);
        }

        .tab-btn.active {
            background: var(--primary-red);
            border-color: var(--gold);
            box-shadow: 0 0 20px rgba(251, 191, 36, 0.4);
        }

        /* Tab Content */
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Malware Gallery Styles */
        .malware-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .malware-card {
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .malware-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-red), var(--gold));
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .malware-card:hover::before {
            transform: scaleX(1);
        }

        .malware-card:hover {
            border-color: var(--gold);
            transform: translateY(-5px);
            box-shadow: 0 8px 24px rgba(220, 38, 38, 0.3);
        }

        .malware-icon {
            font-size: 48px;
            margin-bottom: 15px;
            display: block;
        }

        .malware-title {
            color: var(--gold);
            font-size: 1.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .malware-category {
            display: inline-block;
            background: var(--primary-red);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .malware-description {
            color: var(--text-gray);
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .malware-details {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
        }

        .detail-section {
            margin-bottom: 12px;
        }

        .detail-label {
            color: var(--gold);
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 0.9em;
        }

        .detail-list {
            list-style: none;
            padding-left: 0;
        }

        .detail-list li {
            padding: 4px 0 4px 20px;
            position: relative;
            color: var(--text-gray);
            font-size: 0.95em;
        }

        .detail-list li::before {
            content: '‚ñ∏';
            position: absolute;
            left: 0;
            color: var(--primary-red);
        }

        /* Infection Simulator Styles */
        .simulator-container {
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .simulator-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .control-group {
            flex: 1;
            min-width: 250px;
        }

        .control-label {
            display: block;
            color: var(--gold);
            font-weight: 600;
            margin-bottom: 8px;
        }

        select, .btn {
            width: 100%;
            padding: 12px;
            background: var(--bg-dark);
            color: var(--text-light);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        select:hover, .btn:hover {
            border-color: var(--gold);
            background: var(--bg-darker);
        }

        .btn {
            background: var(--primary-red);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn:hover {
            background: var(--dark-red);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .simulation-stage {
            background: var(--bg-darker);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 40px;
            min-height: 400px;
            position: relative;
            overflow: hidden;
        }

        .stage-step {
            display: none;
            text-align: center;
        }

        .stage-step.active {
            display: block;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .step-number {
            display: inline-block;
            background: var(--primary-red);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            line-height: 50px;
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 20px;
            border: 3px solid var(--gold);
        }

        .step-title {
            font-size: 1.8em;
            color: var(--gold);
            margin-bottom: 15px;
        }

        .step-description {
            font-size: 1.1em;
            color: var(--text-gray);
            max-width: 800px;
            margin: 0 auto 30px;
            line-height: 1.8;
        }

        .step-visual {
            margin: 30px auto;
            max-width: 600px;
        }

        .network-diagram {
            display: flex;
            justify-content: space-around;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .network-node {
            background: var(--bg-card);
            border: 3px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .network-node.infected {
            border-color: var(--danger);
            background: rgba(239, 68, 68, 0.2);
            animation: infect 0.5s ease;
        }

        @keyframes infect {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .network-node.protected {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.2);
        }

        .node-icon {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .node-label {
            font-size: 14px;
            color: var(--text-gray);
        }

        .progress-bar-container {
            background: var(--bg-darker);
            border-radius: 20px;
            height: 30px;
            margin-top: 30px;
            overflow: hidden;
            border: 2px solid var(--border-color);
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-red), var(--gold));
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        /* Symptom Checker Styles */
        .symptom-checker {
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 30px;
        }

        .symptom-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .symptom-item {
            background: var(--bg-dark);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }

        .symptom-item:hover {
            border-color: var(--gold);
            transform: translateY(-2px);
        }

        .symptom-item.selected {
            border-color: var(--primary-red);
            background: rgba(220, 38, 38, 0.2);
        }

        .symptom-item input[type="checkbox"] {
            margin-right: 10px;
            cursor: pointer;
        }

        .diagnosis-result {
            background: var(--bg-darker);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 30px;
            margin-top: 30px;
            display: none;
        }

        .diagnosis-result.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .diagnosis-title {
            font-size: 1.8em;
            color: var(--gold);
            margin-bottom: 20px;
            text-align: center;
        }

        .possible-threats {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .threat-card {
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
        }

        .threat-name {
            color: var(--primary-red);
            font-size: 1.3em;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .confidence-meter {
            background: var(--bg-darker);
            border-radius: 20px;
            height: 20px;
            margin: 10px 0;
            overflow: hidden;
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--warning), var(--success));
            transition: width 0.5s ease;
        }

        .confidence-label {
            font-size: 0.9em;
            color: var(--text-gray);
            margin-top: 5px;
        }

        /* Defense Builder Styles */
        .defense-builder {
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 30px;
        }

        .defense-layers {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
        }

        .defense-layer {
            background: var(--bg-dark);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 25px;
            position: relative;
        }

        .layer-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .layer-title {
            color: var(--gold);
            font-size: 1.4em;
            font-weight: 700;
        }

        .layer-status {
            padding: 6px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9em;
        }

        .layer-status.incomplete {
            background: var(--danger);
            color: white;
        }

        .layer-status.complete {
            background: var(--success);
            color: white;
        }

        .defense-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .defense-option {
            background: var(--bg-darker);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .defense-option:hover {
            border-color: var(--gold);
            transform: translateY(-2px);
        }

        .defense-option.selected {
            border-color: var(--primary-red);
            background: rgba(220, 38, 38, 0.2);
        }

        .option-icon {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .defense-score {
            background: var(--bg-darker);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 30px;
            text-align: center;
        }

        .score-display {
            font-size: 4em;
            color: var(--gold);
            font-weight: 700;
            margin: 20px 0;
            text-shadow: 0 0 20px rgba(251, 191, 36, 0.5);
        }

        .score-rating {
            font-size: 1.5em;
            margin-bottom: 15px;
        }

        .score-feedback {
            color: var(--text-gray);
            max-width: 600px;
            margin: 0 auto;
        }

        /* Quiz Styles */
        .quiz-container {
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            padding: 30px;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .question-counter {
            background: var(--primary-red);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 700;
            border: 2px solid var(--gold);
        }

        .quiz-score {
            background: var(--bg-dark);
            padding: 10px 20px;
            border-radius: 25px;
            border: 2px solid var(--border-color);
        }

        .question-container {
            margin-bottom: 30px;
        }

        .question-text {
            font-size: 1.4em;
            color: var(--gold);
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .answers-grid {
            display: grid;
            gap: 15px;
        }

        .answer-option {
            background: var(--bg-dark);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
        }

        .answer-option:hover {
            border-color: var(--gold);
            transform: translateX(5px);
        }

        .answer-option.selected {
            border-color: var(--primary-red);
            background: rgba(220, 38, 38, 0.2);
        }

        .answer-option.correct {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.2);
        }

        .answer-option.incorrect {
            border-color: var(--danger);
            background: rgba(239, 68, 68, 0.2);
        }

        .answer-option.disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .option-letter {
            background: var(--primary-red);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .answer-option.correct .option-letter {
            background: var(--success);
        }

        .answer-option.incorrect .option-letter {
            background: var(--danger);
        }

        .quiz-explanation {
            background: var(--bg-darker);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }

        .quiz-explanation.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .explanation-title {
            color: var(--gold);
            font-weight: 700;
            margin-bottom: 10px;
        }

        .quiz-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 15px;
        }

        .quiz-results {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .quiz-results.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .results-title {
            font-size: 2.5em;
            color: var(--gold);
            margin-bottom: 20px;
        }

        .results-score {
            font-size: 5em;
            color: var(--primary-red);
            font-weight: 700;
            margin: 30px 0;
            text-shadow: 0 0 30px rgba(220, 38, 38, 0.5);
        }

        .results-message {
            font-size: 1.3em;
            color: var(--text-gray);
            margin-bottom: 30px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            h1 { font-size: 1.8em; }
            .subtitle { font-size: 1em; }
            .malware-grid { grid-template-columns: 1fr; }
            .nav-tabs { flex-direction: column; }
            .tab-btn { width: 100%; }
            .simulator-controls { flex-direction: column; }
            .network-diagram { flex-direction: column; }
            .defense-options { grid-template-columns: 1fr; }
            .quiz-header { flex-direction: column; text-align: center; }
        }

        /* Utility Classes */
        .text-center { text-align: center; }
        .mb-20 { margin-bottom: 20px; }
        .mt-20 { margin-top: 20px; }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--border-color);
            border-radius: 50%;
            border-top-color: var(--gold);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <header>
        <div class="shield-icon">üõ°Ô∏è</div>
        <h1>CompTIA A+ Core 2: Malware Types Reference</h1>
        <p class="subtitle">House of Shield - Interactive Malware Education Platform</p>
    </header>

    <div class="container">
        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <button class="tab-btn active" data-tab="gallery">Malware Gallery</button>
            <button class="tab-btn" data-tab="simulator">Infection Simulator</button>
            <button class="tab-btn" data-tab="symptom">Symptom Checker</button>
            <button class="tab-btn" data-tab="defense">Defense Builder</button>
            <button class="tab-btn" data-tab="quiz">Quiz Challenge</button>
        </div>

        <!-- Tab 1: Malware Gallery -->
        <div id="gallery" class="tab-content active">
            <div class="malware-grid" id="malwareGrid"></div>
        </div>

        <!-- Tab 2: Infection Simulator -->
        <div id="simulator" class="tab-content">
            <div class="simulator-container">
                <h2 class="text-center mb-20" style="color: var(--gold); font-size: 2em;">Malware Infection Simulator</h2>

                <div class="simulator-controls">
                    <div class="control-group">
                        <label class="control-label">Select Malware Type</label>
                        <select id="simulatorMalware">
                            <option value="virus">Virus (Boot Sector)</option>
                            <option value="worm">Worm (Network Propagation)</option>
                            <option value="trojan">Trojan (RAT)</option>
                            <option value="ransomware">Ransomware (Crypto)</option>
                            <option value="rootkit">Rootkit (Kernel-Level)</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <button class="btn" id="startSimulation">Start Simulation</button>
                    </div>
                </div>

                <div class="simulation-stage" id="simulationStage"></div>

                <div class="progress-bar-container">
                    <div class="progress-bar" id="simProgress" style="width: 0%;">0%</div>
                </div>
            </div>
        </div>

        <!-- Tab 3: Symptom Checker -->
        <div id="symptom" class="tab-content">
            <div class="symptom-checker">
                <h2 class="text-center mb-20" style="color: var(--gold); font-size: 2em;">Malware Symptom Checker</h2>
                <p class="text-center mb-20" style="color: var(--text-gray);">Select the symptoms you're experiencing to identify potential malware threats</p>

                <div class="symptom-grid" id="symptomGrid"></div>

                <div class="text-center mt-20">
                    <button class="btn" id="analyzeSymptoms" style="max-width: 300px;">Analyze Symptoms</button>
                </div>

                <div class="diagnosis-result" id="diagnosisResult"></div>
            </div>
        </div>

        <!-- Tab 4: Defense Builder -->
        <div id="defense" class="tab-content">
            <div class="defense-builder">
                <h2 class="text-center mb-20" style="color: var(--gold); font-size: 2em;">Layered Defense Strategy Builder</h2>
                <p class="text-center mb-20" style="color: var(--text-gray);">Build a comprehensive defense strategy by selecting appropriate security measures for each layer</p>

                <div class="defense-layers" id="defenseLayers"></div>

                <div class="defense-score" id="defenseScore">
                    <h3 style="color: var(--gold);">Defense Effectiveness Score</h3>
                    <div class="score-display">0%</div>
                    <div class="score-rating">Not Protected</div>
                    <p class="score-feedback">Build your defense layers to increase protection</p>
                </div>
            </div>
        </div>

        <!-- Tab 5: Quiz Challenge -->
        <div id="quiz" class="tab-content">
            <div class="quiz-container">
                <div class="quiz-header">
                    <div class="question-counter" id="questionCounter">Question 1 of 10</div>
                    <div class="quiz-score" id="quizScore">Score: 0/0</div>
                </div>

                <div class="question-container" id="questionContainer"></div>

                <div class="quiz-explanation" id="quizExplanation"></div>

                <div class="quiz-controls">
                    <button class="btn" id="prevQuestion" style="max-width: 200px;">Previous</button>
                    <button class="btn" id="nextQuestion" style="max-width: 200px;">Next Question</button>
                </div>

                <div class="quiz-results" id="quizResults">
                    <h2 class="results-title">Quiz Complete!</h2>
                    <div class="results-score" id="finalScore">0%</div>
                    <p class="results-message" id="resultsMessage"></p>
                    <button class="btn" id="restartQuiz" style="max-width: 300px; margin: 0 auto;">Restart Quiz</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Malware Database
        const malwareDatabase = [
            {
                id: 'boot-virus',
                name: 'Boot Sector Virus',
                category: 'Virus',
                icon: 'üíæ',
                description: 'Infects the master boot record (MBR) or boot sector of storage devices, executing before the operating system loads.',
                symptoms: ['System fails to boot', 'Missing operating system error', 'Boot loop', 'Disk errors'],
                vectors: ['Infected USB drives', 'Bootable media', 'Disk imaging'],
                prevention: ['UEFI Secure Boot', 'Scan removable media', 'Disable boot from USB in BIOS', 'Keep boot sector backups'],
                removal: ['Boot from clean media', 'Run offline antivirus', 'Rebuild MBR', 'Format and reinstall if necessary']
            },
            {
                id: 'macro-virus',
                name: 'Macro Virus',
                category: 'Virus',
                icon: 'üìÑ',
                description: 'Embedded in document macros (Word, Excel, etc.), executes when the document is opened with macros enabled.',
                symptoms: ['Unexpected document behavior', 'Auto-save disabled', 'New macros appear', 'Files become corrupted'],
                vectors: ['Email attachments', 'Downloaded documents', 'File sharing', 'Malicious templates'],
                prevention: ['Disable macros by default', 'Enable Protected View', 'Use Office security settings', 'Email filtering'],
                removal: ['Disable macros', 'Delete malicious macros', 'Use document recovery', 'Scan with antivirus']
            },
            {
                id: 'polymorphic-virus',
                name: 'Polymorphic Virus',
                category: 'Virus',
                icon: 'üîÄ',
                description: 'Changes its code signature with each infection to evade signature-based detection methods.',
                symptoms: ['Antivirus fails to detect', 'Files change size randomly', 'Multiple infection variants', 'System instability'],
                vectors: ['Drive-by downloads', 'Software cracks', 'Malicious websites', 'Infected software'],
                prevention: ['Behavior-based antivirus', 'Heuristic scanning', 'Regular signature updates', 'Application whitelisting'],
                removal: ['Advanced malware removal tools', 'Behavioral analysis', 'System restore', 'Professional remediation']
            },
            {
                id: 'armored-virus',
                name: 'Armored Virus',
                category: 'Virus',
                icon: 'üõ°Ô∏è',
                description: 'Uses techniques to make reverse engineering and analysis difficult, protecting itself from security researchers.',
                symptoms: ['Difficult to remove', 'Antivirus struggles', 'Protected processes', 'Analysis tools fail'],
                vectors: ['Advanced persistent threats', 'Targeted attacks', 'Social engineering', 'Zero-day exploits'],
                prevention: ['Multi-layered security', 'Advanced threat protection', 'Sandboxing', 'Network segmentation'],
                removal: ['Specialized removal tools', 'Safe mode removal', 'Forensic analysis', 'Complete system rebuild']
            },
            {
                id: 'worm',
                name: 'Network Worm',
                category: 'Worm',
                icon: 'üêõ',
                description: 'Self-replicating malware that spreads automatically across networks without user interaction, exploiting vulnerabilities.',
                symptoms: ['Network slowdown', 'High bandwidth usage', 'Multiple system infections', 'Unusual network traffic'],
                vectors: ['Network vulnerabilities', 'Email spreading', 'File sharing', 'Removable media'],
                prevention: ['Patch management', 'Network segmentation', 'Firewall rules', 'Intrusion detection systems'],
                removal: ['Disconnect from network', 'Patch vulnerabilities', 'Remove malware', 'Clean all infected systems']
            },
            {
                id: 'rat',
                name: 'Remote Access Trojan (RAT)',
                category: 'Trojan',
                icon: 'üé≠',
                description: 'Disguised as legitimate software, provides unauthorized remote access and control over infected systems.',
                symptoms: ['Unexpected remote connections', 'Mouse moves on its own', 'Camera/microphone activation', 'Files accessed remotely'],
                vectors: ['Software bundling', 'Phishing emails', 'Social engineering', 'Drive-by downloads'],
                prevention: ['Download from trusted sources', 'User education', 'Application control', 'Network monitoring'],
                removal: ['Identify malicious processes', 'Block C&C communication', 'Remove trojan files', 'Change all passwords']
            },
            {
                id: 'backdoor',
                name: 'Backdoor Trojan',
                category: 'Trojan',
                icon: 'üö™',
                description: 'Creates hidden entry points in systems to bypass normal authentication, allowing persistent unauthorized access.',
                symptoms: ['Unknown user accounts', 'Firewall rules changes', 'Open ports', 'Unexpected services running'],
                vectors: ['Compromised software', 'Supply chain attacks', 'Insider threats', 'Exploited vulnerabilities'],
                prevention: ['Regular security audits', 'Monitor user accounts', 'Port scanning', 'File integrity monitoring'],
                removal: ['Close unauthorized ports', 'Remove backdoor accounts', 'Patch vulnerabilities', 'Review firewall rules']
            },
            {
                id: 'crypto-ransomware',
                name: 'Crypto Ransomware',
                category: 'Ransomware',
                icon: 'üîí',
                description: 'Encrypts user files and demands payment (usually cryptocurrency) for the decryption key.',
                symptoms: ['Files encrypted/inaccessible', 'Changed file extensions', 'Ransom note displayed', 'Desktop wallpaper changed'],
                vectors: ['Phishing emails', 'RDP vulnerabilities', 'Software exploits', 'Malicious advertisements'],
                prevention: ['Regular backups (offline)', 'Email filtering', 'Patch management', 'User training', 'Disable macros'],
                removal: ['Disconnect from network', 'Identify ransomware variant', 'Use decryption tools if available', 'Restore from backup']
            },
            {
                id: 'locker-ransomware',
                name: 'Locker Ransomware',
                category: 'Ransomware',
                icon: 'üö´',
                description: 'Locks users out of their entire system or device, preventing access until ransom is paid.',
                symptoms: ['Cannot access desktop', 'Lock screen displayed', 'Boot prevention', 'Full screen ransom demand'],
                vectors: ['Malicious apps', 'Fake updates', 'Phishing', 'Infected websites'],
                prevention: ['Safe browsing practices', 'Legitimate software sources', 'User account control', 'Security software'],
                removal: ['Safe mode boot', 'System restore', 'Bootable antivirus tools', 'Master password if available']
            },
            {
                id: 'keylogger',
                name: 'Keylogger',
                category: 'Spyware',
                icon: '‚å®Ô∏è',
                description: 'Records keystrokes to capture sensitive information like passwords, credit card numbers, and personal data.',
                symptoms: ['Slow typing response', 'Unexpected log files', 'Unauthorized account access', 'Strange processes running'],
                vectors: ['Trojan downloads', 'Phishing', 'Physical access', 'Infected software'],
                prevention: ['Virtual keyboards for sensitive input', 'Antivirus with anti-keylogger', 'Regular malware scans', 'User awareness'],
                removal: ['Identify keylogger process', 'Remove malicious files', 'Change all passwords', 'Monitor for data breaches']
            },
            {
                id: 'adware',
                name: 'Adware',
                category: 'Spyware',
                icon: 'üì¢',
                description: 'Displays unwanted advertisements, tracks browsing behavior, and may redirect searches to generate revenue.',
                symptoms: ['Pop-up ads', 'Browser redirects', 'New toolbars', 'Homepage changed', 'Slow browser performance'],
                vectors: ['Software bundling', 'Freeware/shareware', 'Fake download buttons', 'Browser extensions'],
                prevention: ['Custom installation', 'Ad blockers', 'Browser security settings', 'Download from official sources'],
                removal: ['Uninstall suspicious programs', 'Remove browser extensions', 'Reset browser settings', 'Use adware removal tools']
            },
            {
                id: 'kernel-rootkit',
                name: 'Kernel-Level Rootkit',
                category: 'Rootkit',
                icon: 'üëª',
                description: 'Operates at the operating system kernel level, hiding its presence and providing privileged access to attackers.',
                symptoms: ['Extremely difficult to detect', 'Hidden processes/files', 'Security tools disabled', 'System instability'],
                vectors: ['Driver exploits', 'Privilege escalation', 'Supply chain compromise', 'Zero-day vulnerabilities'],
                prevention: ['Kernel-mode code signing', 'UEFI Secure Boot', 'Trusted Boot', 'Regular integrity checks'],
                removal: ['Specialized rootkit detectors', 'Boot from clean media', 'Offline scanning', 'Often requires reinstallation']
            },
            {
                id: 'bootloader-rootkit',
                name: 'Bootloader Rootkit',
                category: 'Rootkit',
                icon: '‚öôÔ∏è',
                description: 'Infects the bootloader to load before the OS, making detection and removal extremely difficult.',
                symptoms: ['Pre-OS malicious activity', 'Boot process anomalies', 'Persistent despite OS reinstall', 'BIOS/UEFI modifications'],
                vectors: ['Physical access', 'Firmware vulnerabilities', 'Advanced persistent threats', 'Supply chain attacks'],
                prevention: ['UEFI Secure Boot', 'Firmware passwords', 'TPM utilization', 'Physical security', 'Firmware updates'],
                removal: ['BIOS/UEFI reflash', 'Secure Boot restoration', 'Hardware replacement may be needed', 'Professional forensics']
            },
            {
                id: 'cryptominer',
                name: 'Cryptominer Malware',
                category: 'Cryptominer',
                icon: '‚õèÔ∏è',
                description: 'Uses system resources to mine cryptocurrency without authorization, causing performance degradation and hardware damage.',
                symptoms: ['High CPU/GPU usage', 'System overheating', 'Increased electricity bills', 'Slow performance', 'Fan noise'],
                vectors: ['Browser-based mining', 'Trojanized software', 'Compromised websites', 'Malicious scripts'],
                prevention: ['Script blockers', 'Monitor resource usage', 'Browser extensions for mining protection', 'Regular scans'],
                removal: ['Identify mining processes', 'Remove malicious software', 'Clear browser cache/extensions', 'Monitor performance']
            },
            {
                id: 'logic-bomb',
                name: 'Logic Bomb',
                category: 'Logic Bomb',
                icon: 'üí£',
                description: 'Malicious code that remains dormant until specific conditions are met (date, event, action), then executes payload.',
                symptoms: ['Sudden data deletion', 'System failure on specific date', 'Triggered by specific action', 'Time-delayed damage'],
                vectors: ['Insider threats', 'Compromised software updates', 'Backdoor installation', 'Malicious employees'],
                prevention: ['Code reviews', 'Access controls', 'Employee monitoring', 'Separation of duties', 'Version control'],
                removal: ['Code analysis', 'Identify trigger conditions', 'Remove malicious code', 'Restore from clean backups']
            },
            {
                id: 'fileless-malware',
                name: 'Fileless Malware',
                category: 'Fileless',
                icon: 'üå´Ô∏è',
                description: 'Operates in memory without writing files to disk, using legitimate tools (PowerShell, WMI) to avoid detection.',
                symptoms: ['No malicious files found', 'Legitimate tools misused', 'Registry modifications', 'Memory-resident threats'],
                vectors: ['Phishing with malicious links', 'Exploit kits', 'Compromised websites', 'Macro-based attacks'],
                prevention: ['Disable PowerShell for regular users', 'Application whitelisting', 'Memory protection', 'Behavioral monitoring'],
                removal: ['Memory analysis', 'Process monitoring', 'Registry cleanup', 'Reboot clears memory-based threats']
            }
        ];

        // Symptoms Database
        const symptomsDatabase = [
            { id: 's1', text: 'System running extremely slow', malware: ['worm', 'cryptominer', 'rootkit'] },
            { id: 's2', text: 'Files encrypted or inaccessible', malware: ['crypto-ransomware'] },
            { id: 's3', text: 'Cannot access desktop/locked out', malware: ['locker-ransomware'] },
            { id: 's4', text: 'Pop-up advertisements everywhere', malware: ['adware'] },
            { id: 's5', text: 'High CPU/GPU usage when idle', malware: ['cryptominer'] },
            { id: 's6', text: 'System fails to boot properly', malware: ['boot-virus', 'bootloader-rootkit'] },
            { id: 's7', text: 'Unexpected network traffic', malware: ['worm', 'rat', 'backdoor'] },
            { id: 's8', text: 'Unknown programs running', malware: ['trojan', 'rat', 'rootkit'] },
            { id: 's9', text: 'Antivirus disabled or removed', malware: ['rootkit', 'armored-virus'] },
            { id: 's10', text: 'Mouse moves on its own', malware: ['rat'] },
            { id: 's11', text: 'New browser toolbars appeared', malware: ['adware'] },
            { id: 's12', text: 'Files modified without permission', malware: ['rat', 'backdoor', 'macro-virus'] },
            { id: 's13', text: 'Webcam light turns on unexpectedly', malware: ['rat'] },
            { id: 's14', text: 'Passwords changed without authorization', malware: ['keylogger', 'rat'] },
            { id: 's15', text: 'System overheating', malware: ['cryptominer'] },
            { id: 's16', text: 'Documents behaving strangely', malware: ['macro-virus'] },
            { id: 's17', text: 'Network spreading to other devices', malware: ['worm'] },
            { id: 's18', text: 'Security tools failing to run', malware: ['rootkit', 'armored-virus'] }
        ];

        // Defense Layers Database
        const defenseLayers = [
            {
                id: 'perimeter',
                title: 'Perimeter Defense',
                description: 'First line of defense against external threats',
                options: [
                    { id: 'firewall', name: 'Next-Gen Firewall', icon: 'üî•', value: 15 },
                    { id: 'ids', name: 'Intrusion Detection', icon: 'üö®', value: 10 },
                    { id: 'email-filter', name: 'Email Filtering', icon: 'üìß', value: 12 },
                    { id: 'web-filter', name: 'Web Content Filter', icon: 'üåê', value: 10 }
                ]
            },
            {
                id: 'endpoint',
                title: 'Endpoint Protection',
                description: 'Protect individual devices from malware',
                options: [
                    { id: 'antivirus', name: 'Antivirus Software', icon: 'üõ°Ô∏è', value: 15 },
                    { id: 'edr', name: 'EDR Solution', icon: 'üëÅÔ∏è', value: 12 },
                    { id: 'host-firewall', name: 'Host-Based Firewall', icon: 'üîí', value: 8 },
                    { id: 'app-whitelist', name: 'Application Whitelisting', icon: '‚úÖ', value: 10 }
                ]
            },
            {
                id: 'data',
                title: 'Data Protection',
                description: 'Safeguard critical data and backups',
                options: [
                    { id: 'backup', name: 'Regular Backups', icon: 'üíæ', value: 15 },
                    { id: 'encryption', name: 'Data Encryption', icon: 'üîê', value: 10 },
                    { id: 'dlp', name: 'Data Loss Prevention', icon: 'üö´', value: 8 },
                    { id: 'offline-backup', name: 'Offline Backups', icon: 'üì¶', value: 12 }
                ]
            },
            {
                id: 'user',
                title: 'User Security',
                description: 'Human element protection and awareness',
                options: [
                    { id: 'training', name: 'Security Training', icon: 'üéì', value: 10 },
                    { id: 'mfa', name: 'Multi-Factor Auth', icon: 'üîë', value: 12 },
                    { id: 'least-privilege', name: 'Least Privilege', icon: 'üë§', value: 8 },
                    { id: 'password-policy', name: 'Strong Passwords', icon: 'üîí', value: 5 }
                ]
            }
        ];

        // Quiz Questions Database
        const quizQuestions = [
            {
                question: 'Which type of malware infects the Master Boot Record (MBR) and executes before the operating system loads?',
                answers: [
                    'Macro Virus',
                    'Boot Sector Virus',
                    'Fileless Malware',
                    'Logic Bomb'
                ],
                correct: 1,
                explanation: 'Boot Sector Viruses specifically target the MBR or boot sector of storage devices, allowing them to execute before the OS loads. This makes them particularly dangerous and difficult to detect with OS-based security tools.'
            },
            {
                question: 'A user reports that their files have been encrypted and a ransom note demands Bitcoin payment. What type of malware is this?',
                answers: [
                    'Spyware',
                    'Adware',
                    'Crypto Ransomware',
                    'Trojan'
                ],
                correct: 2,
                explanation: 'Crypto Ransomware encrypts user files and demands payment (typically in cryptocurrency) for the decryption key. The best defense is regular offline backups, as paying the ransom does not guarantee file recovery.'
            },
            {
                question: 'What distinguishes a worm from a virus?',
                answers: [
                    'Worms require user interaction to spread',
                    'Worms self-replicate across networks without user interaction',
                    'Worms only affect email systems',
                    'Worms cannot cause damage to systems'
                ],
                correct: 1,
                explanation: 'Worms are self-replicating malware that spread automatically across networks without requiring user interaction, unlike viruses which typically need a host file and user action to propagate.'
            },
            {
                question: 'Which malware type operates at the kernel level, making it extremely difficult to detect and remove?',
                answers: [
                    'Adware',
                    'Macro Virus',
                    'Kernel-Level Rootkit',
                    'Keylogger'
                ],
                correct: 2,
                explanation: 'Kernel-Level Rootkits operate at the deepest level of the operating system, giving them the ability to hide their presence from security tools and maintain privileged access. They often require specialized detection tools or system reinstallation to remove.'
            },
            {
                question: 'A technician notices extremely high CPU usage on a workstation even when idle. Which malware is most likely responsible?',
                answers: [
                    'Cryptominer',
                    'Logic Bomb',
                    'Macro Virus',
                    'Boot Sector Virus'
                ],
                correct: 0,
                explanation: 'Cryptominer malware uses system resources (CPU/GPU) to mine cryptocurrency without authorization, resulting in high resource usage, system slowdown, overheating, and increased electricity consumption.'
            },
            {
                question: 'What type of malware disguises itself as legitimate software but provides unauthorized remote access to an attacker?',
                answers: [
                    'Worm',
                    'Remote Access Trojan (RAT)',
                    'Adware',
                    'Polymorphic Virus'
                ],
                correct: 1,
                explanation: 'Remote Access Trojans (RATs) disguise themselves as legitimate software while providing attackers with unauthorized remote access and control over infected systems, including the ability to access files, activate cameras, and monitor user activity.'
            },
            {
                question: 'Which malware type operates entirely in memory without writing files to disk?',
                answers: [
                    'Boot Sector Virus',
                    'Macro Virus',
                    'Fileless Malware',
                    'Armored Virus'
                ],
                correct: 2,
                explanation: 'Fileless Malware operates in memory without writing files to disk, often using legitimate system tools like PowerShell or WMI. This makes it extremely difficult to detect with traditional file-based antivirus solutions.'
            },
            {
                question: 'What is the primary characteristic of a polymorphic virus?',
                answers: [
                    'It spreads through email only',
                    'It changes its code signature with each infection',
                    'It only infects mobile devices',
                    'It requires administrator privileges'
                ],
                correct: 1,
                explanation: 'Polymorphic Viruses change their code signature with each infection to evade signature-based detection methods. This requires security solutions to use heuristic and behavior-based detection techniques.'
            },
            {
                question: 'Which type of spyware specifically records user keystrokes to capture sensitive information?',
                answers: [
                    'Adware',
                    'Rootkit',
                    'Keylogger',
                    'Ransomware'
                ],
                correct: 2,
                explanation: 'Keyloggers are a type of spyware that record keystrokes to capture sensitive information like passwords, credit card numbers, and personal data. Virtual keyboards can help mitigate this threat for sensitive input.'
            },
            {
                question: 'A logic bomb is best described as malware that:',
                answers: [
                    'Spreads through logical ports',
                    'Executes its payload when specific conditions are met',
                    'Uses logical operations to encrypt files',
                    'Targets logical disk partitions'
                ],
                correct: 1,
                explanation: 'Logic Bombs are malicious code that remain dormant until specific conditions are met (such as a specific date, event, or action), then execute their payload. They are often associated with insider threats and disgruntled employees.'
            }
        ];

        // State Management
        let currentTab = 'gallery';
        let simulationStep = 0;
        let simulationType = 'virus';
        let selectedSymptoms = new Set();
        let selectedDefenses = {};
        let currentQuizQuestion = 0;
        let quizAnswers = [];
        let quizScore = 0;

        // Initialize Application
        document.addEventListener('DOMContentLoaded', function() {
            initializeTabs();
            renderMalwareGallery();
            renderSymptomChecker();
            renderDefenseBuilder();
            initializeQuiz();
            setupEventListeners();
        });

        // Tab Management
        function initializeTabs() {
            const tabButtons = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetTab = button.getAttribute('data-tab');

                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));

                    button.classList.add('active');
                    document.getElementById(targetTab).classList.add('active');
                    currentTab = targetTab;
                });
            });
        }

        // Render Malware Gallery
        function renderMalwareGallery() {
            const grid = document.getElementById('malwareGrid');
            grid.innerHTML = '';

            malwareDatabase.forEach(malware => {
                const card = document.createElement('div');
                card.className = 'malware-card';
                card.innerHTML = `
                    <span class="malware-icon">${malware.icon}</span>
                    <h3 class="malware-title">${malware.name}</h3>
                    <span class="malware-category">${malware.category}</span>
                    <p class="malware-description">${malware.description}</p>
                    <div class="malware-details">
                        <div class="detail-section">
                            <div class="detail-label">Symptoms:</div>
                            <ul class="detail-list">
                                ${malware.symptoms.map(s => `<li>${s}</li>`).join('')}
                            </ul>
                        </div>
                        <div class="detail-section">
                            <div class="detail-label">Attack Vectors:</div>
                            <ul class="detail-list">
                                ${malware.vectors.map(v => `<li>${v}</li>`).join('')}
                            </ul>
                        </div>
                        <div class="detail-section">
                            <div class="detail-label">Prevention:</div>
                            <ul class="detail-list">
                                ${malware.prevention.map(p => `<li>${p}</li>`).join('')}
                            </ul>
                        </div>
                        <div class="detail-section">
                            <div class="detail-label">Removal:</div>
                            <ul class="detail-list">
                                ${malware.removal.map(r => `<li>${r}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // Infection Simulator
        const simulationScenarios = {
            virus: [
                { step: 1, title: 'Initial Infection', description: 'User downloads infected file from untrusted source or inserts infected USB drive into computer.', infected: [0] },
                { step: 2, title: 'File Execution', description: 'User executes the infected file. The virus code activates and begins searching for host files.', infected: [0] },
                { step: 3, title: 'Host File Infection', description: 'Virus attaches itself to executable files and documents on the system, modifying them to include viral code.', infected: [0, 1] },
                { step: 4, title: 'Boot Sector Modification', description: 'Virus writes itself to the Master Boot Record (MBR) to ensure persistence across reboots.', infected: [0, 1, 2] },
                { step: 5, title: 'Spread via Removable Media', description: 'When USB drives are connected, the virus copies itself to them, ready to infect other systems.', infected: [0, 1, 2, 3] }
            ],
            worm: [
                { step: 1, title: 'Network Scanning', description: 'Worm begins scanning the network for vulnerable systems using port scanning and service enumeration.', infected: [0] },
                { step: 2, title: 'Vulnerability Exploitation', description: 'Worm identifies unpatched systems and exploits known vulnerabilities (e.g., SMB, RDP) to gain access.', infected: [0, 1] },
                { step: 3, title: 'Self-Replication', description: 'Worm copies itself to newly infected systems without any user interaction required.', infected: [0, 1, 2] },
                { step: 4, title: 'Rapid Propagation', description: 'Each infected system becomes a new infection source, causing exponential spread across the network.', infected: [0, 1, 2, 3] },
                { step: 5, title: 'Payload Delivery', description: 'Worm may deliver additional payloads such as ransomware, backdoors, or data exfiltration tools.', infected: [0, 1, 2, 3, 4] }
            ],
            trojan: [
                { step: 1, title: 'Social Engineering', description: 'Attacker sends convincing email or creates fake website offering legitimate-looking software download.', infected: [] },
                { step: 2, title: 'User Downloads Trojan', description: 'Victim downloads what appears to be legitimate software (game, utility, document) containing hidden RAT.', infected: [0] },
                { step: 3, title: 'Installation & Hiding', description: 'Trojan installs itself, creates persistence mechanisms, and hides from Task Manager and security tools.', infected: [0] },
                { step: 4, title: 'Command & Control', description: 'RAT establishes connection to attacker\'s C&C server, awaiting commands for remote control.', infected: [0] },
                { step: 5, title: 'Remote Access Established', description: 'Attacker gains full remote control: file access, keylogging, screen capture, webcam/microphone activation.', infected: [0] }
            ],
            ransomware: [
                { step: 1, title: 'Phishing Email Delivery', description: 'Victim receives phishing email with malicious attachment or link disguised as invoice, delivery notice, etc.', infected: [] },
                { step: 2, title: 'Initial Execution', description: 'User opens attachment or clicks link, executing ransomware payload on their system.', infected: [0] },
                { step: 3, title: 'File Discovery', description: 'Ransomware scans all drives (local, network, cloud) cataloging documents, images, databases, and backups.', infected: [0, 1] },
                { step: 4, title: 'Encryption Process', description: 'Files are encrypted using strong encryption (AES-256). Original files are securely deleted. Extensions changed.', infected: [0, 1, 2] },
                { step: 5, title: 'Ransom Demand', description: 'Ransom note displayed on all screens with Bitcoin payment instructions. Wallpaper changed. Countdown timer started.', infected: [0, 1, 2, 3] }
            ],
            rootkit: [
                { step: 1, title: 'Privilege Escalation', description: 'Attacker exploits vulnerability or uses social engineering to gain administrator/root privileges.', infected: [0] },
                { step: 2, title: 'Kernel Module Installation', description: 'Rootkit installs malicious kernel module or driver, operating at the deepest system level.', infected: [0] },
                { step: 3, title: 'System API Hooking', description: 'Rootkit intercepts system calls to hide files, processes, network connections, and registry entries.', infected: [0, 1] },
                { step: 4, title: 'Security Tool Evasion', description: 'Rootkit hides from antivirus, Task Manager, and administrative tools by manipulating their queries.', infected: [0, 1, 2] },
                { step: 5, title: 'Persistent Backdoor', description: 'Rootkit maintains hidden backdoor access, survives reboots, and can download additional malware undetected.', infected: [0, 1, 2, 3] }
            ]
        };

        function startInfectionSimulation() {
            const selectedType = document.getElementById('simulatorMalware').value;
            simulationType = selectedType;
            simulationStep = 0;

            const scenario = simulationScenarios[selectedType];
            const stage = document.getElementById('simulationStage');

            renderSimulationStep(scenario[simulationStep]);
            animateSimulation(scenario);
        }

        function renderSimulationStep(stepData) {
            const stage = document.getElementById('simulationStage');
            const iconMap = {
                virus: 'üíæ',
                worm: 'üêõ',
                trojan: 'üé≠',
                ransomware: 'üîí',
                rootkit: 'üëª'
            };

            stage.innerHTML = `
                <div class="stage-step active">
                    <div class="step-number">${stepData.step}</div>
                    <h3 class="step-title">${stepData.title}</h3>
                    <p class="step-description">${stepData.description}</p>
                    <div class="step-visual">
                        <div class="network-diagram">
                            <div class="network-node ${stepData.infected.includes(0) ? 'infected' : ''}">
                                <div class="node-icon">üíª</div>
                                <div class="node-label">Patient Zero</div>
                            </div>
                            <div class="network-node ${stepData.infected.includes(1) ? 'infected' : ''}">
                                <div class="node-icon">üíª</div>
                                <div class="node-label">System 1</div>
                            </div>
                            <div class="network-node ${stepData.infected.includes(2) ? 'infected' : ''}">
                                <div class="node-icon">üíª</div>
                                <div class="node-label">System 2</div>
                            </div>
                            <div class="network-node ${stepData.infected.includes(3) ? 'infected' : ''}">
                                <div class="node-icon">üíª</div>
                                <div class="node-label">System 3</div>
                            </div>
                            <div class="network-node ${stepData.infected.includes(4) ? 'infected' : ''}">
                                <div class="node-icon">üíª</div>
                                <div class="node-label">Server</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function animateSimulation(scenario) {
            let currentStep = 0;
            const totalSteps = scenario.length;

            const interval = setInterval(() => {
                if (currentStep < totalSteps) {
                    renderSimulationStep(scenario[currentStep]);
                    updateProgress((currentStep + 1) / totalSteps * 100);
                    currentStep++;
                } else {
                    clearInterval(interval);
                }
            }, 3000);
        }

        function updateProgress(percent) {
            const progressBar = document.getElementById('simProgress');
            progressBar.style.width = percent + '%';
            progressBar.textContent = Math.round(percent) + '%';
        }

        // Symptom Checker
        function renderSymptomChecker() {
            const grid = document.getElementById('symptomGrid');
            grid.innerHTML = '';

            symptomsDatabase.forEach(symptom => {
                const item = document.createElement('div');
                item.className = 'symptom-item';
                item.innerHTML = `
                    <label style="cursor: pointer; display: flex; align-items: center;">
                        <input type="checkbox" value="${symptom.id}" style="margin-right: 10px;">
                        <span>${symptom.text}</span>
                    </label>
                `;

                item.addEventListener('click', function(e) {
                    if (e.target.tagName !== 'INPUT') {
                        const checkbox = item.querySelector('input[type="checkbox"]');
                        checkbox.checked = !checkbox.checked;
                    }
                    item.classList.toggle('selected');
                });

                grid.appendChild(item);
            });
        }

        function analyzeSymptoms() {
            const checkboxes = document.querySelectorAll('#symptomGrid input[type="checkbox"]:checked');
            const selectedSymptomIds = Array.from(checkboxes).map(cb => cb.value);

            if (selectedSymptomIds.length === 0) {
                alert('Please select at least one symptom to analyze.');
                return;
            }

            // Calculate malware probabilities
            const malwareScores = {};

            selectedSymptomIds.forEach(symptomId => {
                const symptom = symptomsDatabase.find(s => s.id === symptomId);
                symptom.malware.forEach(malwareId => {
                    malwareScores[malwareId] = (malwareScores[malwareId] || 0) + 1;
                });
            });

            // Sort by score
            const sortedMalware = Object.entries(malwareScores)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 5);

            // Display results
            displayDiagnosis(sortedMalware, selectedSymptomIds.length);
        }

        function displayDiagnosis(matches, totalSymptoms) {
            const resultDiv = document.getElementById('diagnosisResult');

            if (matches.length === 0) {
                resultDiv.innerHTML = `
                    <h3 class="diagnosis-title">No Strong Matches Found</h3>
                    <p class="text-center" style="color: var(--text-gray);">The symptoms selected don't strongly indicate a specific malware type. Consider running a comprehensive security scan.</p>
                `;
            } else {
                const threatsHTML = matches.map(([malwareId, score]) => {
                    const malware = malwareDatabase.find(m => m.id === malwareId);
                    const confidence = Math.round((score / totalSymptoms) * 100);

                    return `
                        <div class="threat-card">
                            <div style="font-size: 48px; text-align: center; margin-bottom: 10px;">${malware.icon}</div>
                            <div class="threat-name">${malware.name}</div>
                            <div class="confidence-meter">
                                <div class="confidence-fill" style="width: ${confidence}%"></div>
                            </div>
                            <div class="confidence-label">Confidence: ${confidence}%</div>
                            <p style="color: var(--text-gray); margin-top: 10px; font-size: 0.9em;">${malware.description}</p>
                            <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--border-color);">
                                <div style="color: var(--gold); font-weight: 600; margin-bottom: 5px;">Recommended Actions:</div>
                                <ul class="detail-list" style="font-size: 0.85em;">
                                    ${malware.removal.slice(0, 2).map(r => `<li>${r}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                    `;
                }).join('');

                resultDiv.innerHTML = `
                    <h3 class="diagnosis-title">Possible Malware Threats Detected</h3>
                    <div class="possible-threats">${threatsHTML}</div>
                `;
            }

            resultDiv.classList.add('show');
        }

        // Defense Builder
        function renderDefenseBuilder() {
            const container = document.getElementById('defenseLayers');
            container.innerHTML = '';

            defenseLayers.forEach(layer => {
                const layerDiv = document.createElement('div');
                layerDiv.className = 'defense-layer';

                const optionsHTML = layer.options.map(option => `
                    <div class="defense-option" data-layer="${layer.id}" data-option="${option.id}" data-value="${option.value}">
                        <div class="option-icon">${option.icon}</div>
                        <div style="font-weight: 600; color: var(--text-light);">${option.name}</div>
                    </div>
                `).join('');

                layerDiv.innerHTML = `
                    <div class="layer-header">
                        <div class="layer-title">${layer.title}</div>
                        <div class="layer-status incomplete" data-layer="${layer.id}">Not Configured</div>
                    </div>
                    <p style="color: var(--text-gray); margin-bottom: 20px;">${layer.description}</p>
                    <div class="defense-options">${optionsHTML}</div>
                `;

                container.appendChild(layerDiv);
            });

            // Add click handlers
            document.querySelectorAll('.defense-option').forEach(option => {
                option.addEventListener('click', function() {
                    const layerId = this.getAttribute('data-layer');
                    const optionId = this.getAttribute('data-option');
                    const value = parseInt(this.getAttribute('data-value'));

                    // Toggle selection
                    this.classList.toggle('selected');

                    // Update stored selections
                    if (!selectedDefenses[layerId]) {
                        selectedDefenses[layerId] = [];
                    }

                    const index = selectedDefenses[layerId].findIndex(o => o.id === optionId);
                    if (index > -1) {
                        selectedDefenses[layerId].splice(index, 1);
                    } else {
                        selectedDefenses[layerId].push({ id: optionId, value: value });
                    }

                    // Update layer status
                    updateLayerStatus(layerId);
                    calculateDefenseScore();
                });
            });
        }

        function updateLayerStatus(layerId) {
            const statusEl = document.querySelector(`.layer-status[data-layer="${layerId}"]`);
            const selections = selectedDefenses[layerId] || [];

            if (selections.length > 0) {
                statusEl.textContent = `${selections.length} Selected`;
                statusEl.className = 'layer-status complete';
            } else {
                statusEl.textContent = 'Not Configured';
                statusEl.className = 'layer-status incomplete';
            }
        }

        function calculateDefenseScore() {
            let totalScore = 0;
            const maxScore = 100;

            Object.values(selectedDefenses).forEach(layerOptions => {
                layerOptions.forEach(option => {
                    totalScore += option.value;
                });
            });

            const percentage = Math.min(totalScore, maxScore);
            const scoreDisplay = document.querySelector('.score-display');
            const scoreRating = document.querySelector('.score-rating');
            const scoreFeedback = document.querySelector('.score-feedback');

            scoreDisplay.textContent = percentage + '%';

            if (percentage >= 80) {
                scoreRating.textContent = 'Excellent Defense';
                scoreRating.style.color = 'var(--success)';
                scoreFeedback.textContent = 'Your layered defense strategy provides comprehensive protection against most malware threats. Continue monitoring and updating your security measures.';
            } else if (percentage >= 60) {
                scoreRating.textContent = 'Good Defense';
                scoreRating.style.color = 'var(--warning)';
                scoreFeedback.textContent = 'Your defense strategy is solid but could be improved. Consider adding more security layers for comprehensive protection.';
            } else if (percentage >= 40) {
                scoreRating.textContent = 'Moderate Defense';
                scoreRating.style.color = 'var(--warning)';
                scoreFeedback.textContent = 'Your defense has significant gaps. Add more security controls across different layers to improve protection.';
            } else if (percentage >= 20) {
                scoreRating.textContent = 'Weak Defense';
                scoreRating.style.color = 'var(--danger)';
                scoreFeedback.textContent = 'Your systems are vulnerable to malware attacks. Implement additional security measures immediately.';
            } else {
                scoreRating.textContent = 'Critical Risk';
                scoreRating.style.color = 'var(--danger)';
                scoreFeedback.textContent = 'Your systems have minimal protection. Build a comprehensive defense strategy starting with basic security controls.';
            }
        }

        // Quiz System
        function initializeQuiz() {
            currentQuizQuestion = 0;
            quizAnswers = new Array(quizQuestions.length).fill(null);
            quizScore = 0;
            renderQuizQuestion();
        }

        function renderQuizQuestion() {
            const question = quizQuestions[currentQuizQuestion];
            const container = document.getElementById('questionContainer');
            const counter = document.getElementById('questionCounter');
            const scoreEl = document.getElementById('quizScore');

            counter.textContent = `Question ${currentQuizQuestion + 1} of ${quizQuestions.length}`;

            const answeredCount = quizAnswers.filter(a => a !== null).length;
            scoreEl.textContent = `Score: ${quizScore}/${answeredCount}`;

            const answersHTML = question.answers.map((answer, index) => {
                const letter = String.fromCharCode(65 + index);
                const userAnswer = quizAnswers[currentQuizQuestion];
                let className = 'answer-option';

                if (userAnswer !== null) {
                    className += ' disabled';
                    if (index === question.correct) {
                        className += ' correct';
                    } else if (index === userAnswer) {
                        className += ' incorrect';
                    }
                }

                return `
                    <div class="${className}" data-index="${index}">
                        <div class="option-letter">${letter}</div>
                        <div>${answer}</div>
                    </div>
                `;
            }).join('');

            container.innerHTML = `
                <div class="question-text">${question.question}</div>
                <div class="answers-grid">${answersHTML}</div>
            `;

            // Add click handlers for answers
            if (quizAnswers[currentQuizQuestion] === null) {
                document.querySelectorAll('.answer-option').forEach(option => {
                    option.addEventListener('click', function() {
                        const selectedIndex = parseInt(this.getAttribute('data-index'));
                        submitAnswer(selectedIndex);
                    });
                });
            }

            // Show explanation if already answered
            if (quizAnswers[currentQuizQuestion] !== null) {
                showExplanation();
            } else {
                document.getElementById('quizExplanation').classList.remove('show');
            }

            // Update navigation buttons
            updateQuizNavigation();
        }

        function submitAnswer(selectedIndex) {
            const question = quizQuestions[currentQuizQuestion];
            quizAnswers[currentQuizQuestion] = selectedIndex;

            if (selectedIndex === question.correct) {
                quizScore++;
            }

            renderQuizQuestion();
        }

        function showExplanation() {
            const question = quizQuestions[currentQuizQuestion];
            const explanationDiv = document.getElementById('quizExplanation');
            const userAnswer = quizAnswers[currentQuizQuestion];
            const isCorrect = userAnswer === question.correct;

            explanationDiv.innerHTML = `
                <div class="explanation-title">${isCorrect ? '‚úì Correct!' : '‚úó Incorrect'}</div>
                <p style="color: var(--text-gray);">${question.explanation}</p>
            `;
            explanationDiv.classList.add('show');
        }

        function updateQuizNavigation() {
            const prevBtn = document.getElementById('prevQuestion');
            const nextBtn = document.getElementById('nextQuestion');

            prevBtn.disabled = currentQuizQuestion === 0;
            prevBtn.style.opacity = currentQuizQuestion === 0 ? '0.5' : '1';

            if (currentQuizQuestion === quizQuestions.length - 1) {
                const allAnswered = quizAnswers.every(a => a !== null);
                nextBtn.textContent = allAnswered ? 'View Results' : 'Finish Quiz';
            } else {
                nextBtn.textContent = 'Next Question';
            }
        }

        function nextQuestion() {
            if (currentQuizQuestion < quizQuestions.length - 1) {
                currentQuizQuestion++;
                renderQuizQuestion();
            } else {
                showQuizResults();
            }
        }

        function prevQuestion() {
            if (currentQuizQuestion > 0) {
                currentQuizQuestion--;
                renderQuizQuestion();
            }
        }

        function showQuizResults() {
            document.getElementById('questionContainer').style.display = 'none';
            document.getElementById('quizExplanation').style.display = 'none';
            document.querySelector('.quiz-controls').style.display = 'none';
            document.querySelector('.quiz-header').style.display = 'none';

            const resultsDiv = document.getElementById('quizResults');
            const percentage = Math.round((quizScore / quizQuestions.length) * 100);

            document.getElementById('finalScore').textContent = percentage + '%';

            let message = '';
            if (percentage >= 90) {
                message = 'Outstanding! You have excellent knowledge of malware types and their characteristics.';
            } else if (percentage >= 80) {
                message = 'Great job! You have a strong understanding of malware concepts.';
            } else if (percentage >= 70) {
                message = 'Good work! You understand most malware concepts but review areas where you missed questions.';
            } else if (percentage >= 60) {
                message = 'Passing! Review the malware gallery to strengthen your knowledge.';
            } else {
                message = 'More study needed. Review the malware types and try again.';
            }

            document.getElementById('resultsMessage').textContent = `You scored ${quizScore} out of ${quizQuestions.length}. ${message}`;
            resultsDiv.classList.add('show');
        }

        function restartQuiz() {
            document.getElementById('questionContainer').style.display = 'block';
            document.getElementById('quizExplanation').style.display = 'block';
            document.querySelector('.quiz-controls').style.display = 'flex';
            document.querySelector('.quiz-header').style.display = 'flex';
            document.getElementById('quizResults').classList.remove('show');

            initializeQuiz();
        }

        // Event Listeners
        function setupEventListeners() {
            document.getElementById('startSimulation').addEventListener('click', startInfectionSimulation);
            document.getElementById('analyzeSymptoms').addEventListener('click', analyzeSymptoms);
            document.getElementById('nextQuestion').addEventListener('click', nextQuestion);
            document.getElementById('prevQuestion').addEventListener('click', prevQuestion);
            document.getElementById('restartQuiz').addEventListener('click', restartQuiz);
        }
    </script>
</body>
</html>