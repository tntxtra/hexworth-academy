<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Backup Strategy Planner - House of Forge</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #7c2d12 0%, #9a3412 100%);
            color: #fdba74;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(124, 45, 18, 0.9);
            border: 2px solid #ea580c;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        header {
            background: linear-gradient(135deg, #ea580c 0%, #f97316 100%);
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 30px;
            text-align: center;
            position: relative;
        }

        h1 {
            color: #fff;
            font-size: 2.2em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            margin-bottom: 10px;
        }

        .back-link {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #fff;
            text-decoration: none;
            padding: 8px 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 5px;
            transition: background 0.3s;
        }

        .back-link:hover {
            background: rgba(0, 0, 0, 0.4);
        }

        .subtitle {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.1em;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            background: rgba(0, 0, 0, 0.2);
            padding: 10px;
            border-radius: 8px;
        }

        .tab-btn {
            flex: 1;
            min-width: 150px;
            padding: 12px 20px;
            background: rgba(234, 88, 12, 0.3);
            border: 2px solid #ea580c;
            border-radius: 6px;
            color: #fdba74;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1em;
            font-weight: bold;
        }

        .tab-btn:hover {
            background: rgba(234, 88, 12, 0.5);
            transform: translateY(-2px);
        }

        .tab-btn.active {
            background: #ea580c;
            color: #fff;
            box-shadow: 0 4px 12px rgba(234, 88, 12, 0.5);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.4s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section {
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid rgba(234, 88, 12, 0.3);
        }

        h2 {
            color: #f97316;
            margin-bottom: 15px;
            font-size: 1.8em;
            border-bottom: 2px solid #ea580c;
            padding-bottom: 10px;
        }

        h3 {
            color: #fdba74;
            margin: 15px 0 10px;
            font-size: 1.3em;
        }

        .backup-types {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .backup-card {
            background: rgba(234, 88, 12, 0.2);
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #ea580c;
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }

        .backup-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(234, 88, 12, 0.4);
        }

        .backup-card h3 {
            margin-top: 0;
            color: #f97316;
        }

        .backup-diagram {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .diagram-block {
            width: 60px;
            height: 60px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.85em;
            text-align: center;
            border: 2px solid rgba(255, 255, 255, 0.3);
            animation: blockAppear 0.5s ease-out;
        }

        @keyframes blockAppear {
            from { transform: scale(0); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .full-backup { background: #ea580c; color: #fff; }
        .incremental-backup { background: #f97316; color: #fff; }
        .differential-backup { background: #fdba74; color: #7c2d12; }
        .arrow { color: #fdba74; font-size: 1.5em; }

        .timeline-container {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            overflow-x: auto;
        }

        .timeline {
            display: flex;
            gap: 15px;
            min-width: 900px;
            padding: 20px 0;
        }

        .day-column {
            flex: 1;
            text-align: center;
        }

        .day-label {
            color: #f97316;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .backup-stack {
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: center;
        }

        .backup-item {
            width: 80px;
            height: 50px;
            border-radius: 6px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 0.75em;
            font-weight: bold;
            border: 2px solid rgba(255, 255, 255, 0.3);
            transition: transform 0.3s;
        }

        .backup-item:hover {
            transform: scale(1.1);
            cursor: pointer;
        }

        .rule-321 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .rule-card {
            background: rgba(234, 88, 12, 0.2);
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #ea580c;
            text-align: center;
        }

        .rule-number {
            font-size: 3em;
            color: #ea580c;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .checklist {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .checklist-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px;
            margin: 10px 0;
            background: rgba(234, 88, 12, 0.2);
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .checklist-item:hover {
            background: rgba(234, 88, 12, 0.3);
        }

        .checkbox {
            width: 24px;
            height: 24px;
            border: 2px solid #ea580c;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            background: rgba(0, 0, 0, 0.3);
        }

        .checkbox.checked {
            background: #ea580c;
        }

        .checkbox.checked::after {
            content: '✓';
            color: #fff;
            font-weight: bold;
            font-size: 1.2em;
        }

        .calculator {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .input-group {
            margin: 15px 0;
        }

        label {
            display: block;
            color: #fdba74;
            margin-bottom: 8px;
            font-weight: bold;
        }

        input[type="number"],
        input[type="range"],
        select {
            width: 100%;
            padding: 10px;
            background: rgba(0, 0, 0, 0.4);
            border: 2px solid #ea580c;
            border-radius: 6px;
            color: #fdba74;
            font-size: 1em;
        }

        input[type="range"] {
            padding: 0;
            height: 8px;
            cursor: pointer;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #ea580c;
            cursor: pointer;
            border-radius: 50%;
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #ea580c;
            cursor: pointer;
            border-radius: 50%;
            border: none;
        }

        .btn {
            background: #ea580c;
            color: #fff;
            padding: 12px 30px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s;
            margin: 10px 5px;
        }

        .btn:hover {
            background: #f97316;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(234, 88, 12, 0.5);
        }

        .result-box {
            background: rgba(234, 88, 12, 0.2);
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #ea580c;
            margin: 20px 0;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            margin: 5px 0;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
        }

        .result-value {
            color: #f97316;
            font-weight: bold;
            font-size: 1.1em;
        }

        .rotation-scheme {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .scheme-visual {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            margin: 20px 0;
        }

        .tape-stack {
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: center;
        }

        .tape {
            width: 80px;
            height: 40px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9em;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .daily-tape { background: #fdba74; color: #7c2d12; }
        .weekly-tape { background: #f97316; color: #fff; }
        .monthly-tape { background: #ea580c; color: #fff; }

        .quiz-container {
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .question {
            background: rgba(234, 88, 12, 0.2);
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            border: 2px solid #ea580c;
        }

        .question h3 {
            margin-top: 0;
            color: #f97316;
        }

        .options {
            margin: 15px 0;
        }

        .option {
            background: rgba(0, 0, 0, 0.3);
            padding: 12px 15px;
            margin: 8px 0;
            border-radius: 6px;
            border: 2px solid rgba(234, 88, 12, 0.5);
            cursor: pointer;
            transition: all 0.3s;
        }

        .option:hover {
            background: rgba(234, 88, 12, 0.3);
            border-color: #ea580c;
        }

        .option.selected {
            background: rgba(234, 88, 12, 0.4);
            border-color: #f97316;
        }

        .option.correct {
            background: rgba(34, 197, 94, 0.3);
            border-color: #22c55e;
        }

        .option.incorrect {
            background: rgba(239, 68, 68, 0.3);
            border-color: #ef4444;
        }

        .score-display {
            text-align: center;
            font-size: 1.5em;
            color: #f97316;
            font-weight: bold;
            margin: 20px 0;
            padding: 15px;
            background: rgba(234, 88, 12, 0.2);
            border-radius: 8px;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
            border: 2px solid #ea580c;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ea580c 0%, #f97316 100%);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-weight: bold;
        }

        .info-box {
            background: rgba(253, 186, 116, 0.1);
            border-left: 4px solid #fdba74;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .warning-box {
            background: rgba(239, 68, 68, 0.1);
            border-left: 4px solid #ef4444;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }

        .flex-row {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
        }

        .flex-row > * {
            flex: 1;
            min-width: 200px;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.6em;
            }

            .back-link {
                position: static;
                transform: none;
                display: inline-block;
                margin-bottom: 15px;
            }

            .tab-btn {
                min-width: 120px;
                font-size: 0.9em;
                padding: 10px 15px;
            }

            .backup-types {
                grid-template-columns: 1fr;
            }

            .timeline {
                min-width: 700px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="../../catalog.html" class="back-link">← Back to Catalog</a>
            <h1>Backup Strategy Planner</h1>
            <div class="subtitle">House of Forge - Data Protection & Recovery Guide</div>
        </header>

        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('types')">Backup Types</button>
            <button class="tab-btn" onclick="switchTab('timeline')">Timeline</button>
            <button class="tab-btn" onclick="switchTab('321rule')">3-2-1 Rule</button>
            <button class="tab-btn" onclick="switchTab('calculator')">Calculator</button>
            <button class="tab-btn" onclick="switchTab('rotation')">Rotation</button>
            <button class="tab-btn" onclick="switchTab('disaster')">DR Planning</button>
            <button class="tab-btn" onclick="switchTab('quiz')">Quiz</button>
        </div>

        <!-- Backup Types Tab -->
        <div id="types" class="tab-content active">
            <div class="section">
                <h2>Understanding Backup Types</h2>
                <p>Different backup types serve different purposes. Understanding each type helps you design an effective backup strategy.</p>

                <div class="backup-types">
                    <div class="backup-card">
                        <h3>Full Backup</h3>
                        <div class="backup-diagram">
                            <div class="diagram-block full-backup">ALL<br>DATA</div>
                        </div>
                        <p><strong>Complete copy</strong> of all selected data. Slowest but simplest to restore.</p>
                        <div class="info-box">
                            <strong>Pros:</strong> Simple restoration, single file needed<br>
                            <strong>Cons:</strong> Time-consuming, requires most storage<br>
                            <strong>Best for:</strong> Weekly or monthly schedules
                        </div>
                    </div>

                    <div class="backup-card">
                        <h3>Incremental Backup</h3>
                        <div class="backup-diagram">
                            <div class="diagram-block full-backup">Full</div>
                            <span class="arrow">→</span>
                            <div class="diagram-block incremental-backup">+Δ1</div>
                            <span class="arrow">→</span>
                            <div class="diagram-block incremental-backup">+Δ2</div>
                        </div>
                        <p><strong>Only changed data</strong> since last backup (any type). Fastest, minimal storage.</p>
                        <div class="info-box">
                            <strong>Pros:</strong> Fast, efficient storage<br>
                            <strong>Cons:</strong> Complex restore, needs full chain<br>
                            <strong>Best for:</strong> Daily backups with weekly full
                        </div>
                    </div>

                    <div class="backup-card">
                        <h3>Differential Backup</h3>
                        <div class="backup-diagram">
                            <div class="diagram-block full-backup">Full</div>
                            <span class="arrow">→</span>
                            <div class="diagram-block differential-backup">Δ1</div>
                            <span class="arrow">→</span>
                            <div class="diagram-block differential-backup">Δ1+2</div>
                        </div>
                        <p><strong>All changes since last full</strong> backup. Balanced approach.</p>
                        <div class="info-box">
                            <strong>Pros:</strong> Faster restore than incremental<br>
                            <strong>Cons:</strong> Grows larger over time<br>
                            <strong>Best for:</strong> Weekly full + daily differential
                        </div>
                    </div>

                    <div class="backup-card">
                        <h3>Mirror Backup</h3>
                        <div class="backup-diagram">
                            <div class="diagram-block full-backup">Source</div>
                            <span class="arrow">⇄</span>
                            <div class="diagram-block full-backup">Mirror</div>
                        </div>
                        <p><strong>Exact copy</strong> that syncs deletions. No versioning.</p>
                        <div class="warning-box">
                            <strong>Warning:</strong> Deletions and corruption sync immediately. Not a true backup - use with versioned backups!
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Timeline Tab -->
        <div id="timeline" class="tab-content">
            <div class="section">
                <h2>Backup Timeline Visualizer</h2>
                <p>See how different backup strategies work over a week:</p>

                <div class="calculator">
                    <div class="input-group">
                        <label>Backup Strategy:</label>
                        <select id="timelineStrategy" onchange="updateTimeline()">
                            <option value="full-only">Full Backup Only (Weekly)</option>
                            <option value="full-incremental" selected>Full + Incremental</option>
                            <option value="full-differential">Full + Differential</option>
                        </select>
                    </div>
                </div>

                <div class="timeline-container">
                    <div class="timeline" id="timelineDisplay"></div>
                </div>

                <div class="result-box" id="timelineStats">
                    <h3>Recovery Scenario Analysis</h3>
                    <div id="recoveryInfo"></div>
                </div>

                <div class="info-box">
                    <strong>Understanding Recovery:</strong> Full backups require only one file. Incremental requires all files in the chain. Differential needs the full backup plus the latest differential.
                </div>
            </div>
        </div>

        <!-- 3-2-1 Rule Tab -->
        <div id="321rule" class="tab-content">
            <div class="section">
                <h2>The 3-2-1 Backup Rule</h2>
                <p>Industry-standard best practice for data protection:</p>

                <div class="rule-321">
                    <div class="rule-card">
                        <div class="rule-number">3</div>
                        <h3>Three Copies</h3>
                        <p>Keep at least three copies of your data: the original plus two backups. This protects against hardware failure and human error.</p>
                    </div>

                    <div class="rule-card">
                        <div class="rule-number">2</div>
                        <h3>Two Media Types</h3>
                        <p>Store backups on two different media types (e.g., HDD + Cloud, SSD + Tape). This protects against media-specific failures.</p>
                    </div>

                    <div class="rule-card">
                        <div class="rule-number">1</div>
                        <h3>One Offsite</h3>
                        <p>Keep at least one backup copy offsite or in the cloud. This protects against physical disasters like fire or flood.</p>
                    </div>
                </div>

                <div class="checklist">
                    <h3>3-2-1 Implementation Checklist</h3>
                    <div class="checklist-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <div>Primary data on production system (workstation, server, etc.)</div>
                    </div>
                    <div class="checklist-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <div>First backup copy on local external drive or NAS</div>
                    </div>
                    <div class="checklist-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <div>Second backup copy on different media type</div>
                    </div>
                    <div class="checklist-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <div>Offsite backup (cloud service, remote location, safety deposit box)</div>
                    </div>
                    <div class="checklist-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <div>Automated backup schedule configured</div>
                    </div>
                    <div class="checklist-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <div>Regular backup verification and test restores performed</div>
                    </div>
                    <div class="checklist-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <div>Backup monitoring and alerting configured</div>
                    </div>
                    <div class="checklist-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <div>Documentation of backup procedures and recovery steps</div>
                    </div>
                </div>

                <div class="result-box">
                    <h3>Enhanced: 3-2-1-1-0 Rule</h3>
                    <p><strong>+1:</strong> Keep one backup offline (air-gapped) for ransomware protection</p>
                    <p><strong>0:</strong> Zero errors - verify backups regularly with test restores</p>
                </div>
            </div>
        </div>

        <!-- Calculator Tab -->
        <div id="calculator" class="tab-content">
            <div class="section">
                <h2>Backup Storage Calculator</h2>
                <p>Calculate storage requirements for different backup strategies:</p>

                <div class="calculator">
                    <div class="input-group">
                        <label>Initial Data Size (GB):</label>
                        <input type="number" id="dataSize" value="500" min="1" max="100000" oninput="calculateStorage()">
                    </div>

                    <div class="input-group">
                        <label>Daily Change Rate: <span id="changeRateDisplay">5%</span></label>
                        <input type="range" id="changeRate" min="0.5" max="50" step="0.5" value="5" oninput="updateChangeRate(); calculateStorage()">
                    </div>

                    <div class="input-group">
                        <label>Backup Period (weeks):</label>
                        <input type="number" id="backupWeeks" value="4" min="1" max="52" oninput="calculateStorage()">
                    </div>

                    <div class="input-group">
                        <label>Backup Strategy:</label>
                        <select id="calcStrategy" onchange="calculateStorage()">
                            <option value="full-only">Weekly Full Backups Only</option>
                            <option value="full-daily">Daily Full Backups</option>
                            <option value="full-incremental" selected>Full (Weekly) + Daily Incremental</option>
                            <option value="full-differential">Full (Weekly) + Daily Differential</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label>Transfer Speed (Mbps):</label>
                        <input type="number" id="transferSpeed" value="100" min="1" max="10000" oninput="calculateStorage()">
                    </div>

                    <button class="btn" onclick="calculateStorage()">Calculate</button>
                </div>

                <div class="result-box" id="calcResults">
                    <h3>Storage Requirements</h3>
                    <div id="storageResults"></div>
                </div>

                <div class="result-box" id="timeResults">
                    <h3>Time Estimates</h3>
                    <div id="timeEstimates"></div>
                </div>
            </div>
        </div>

        <!-- Rotation Schemes Tab -->
        <div id="rotation" class="tab-content">
            <div class="section">
                <h2>Backup Rotation Schemes</h2>
                <p>Strategies for managing backup media and retention:</p>

                <div class="rotation-scheme">
                    <h3>Grandfather-Father-Son (GFS)</h3>
                    <p>Most popular rotation scheme. Provides multiple recovery points with efficient storage.</p>

                    <div class="scheme-visual">
                        <div class="tape-stack">
                            <div style="color: #fdba74; font-weight: bold; margin-bottom: 10px;">Daily (Son)</div>
                            <div class="tape daily-tape">Mon</div>
                            <div class="tape daily-tape">Tue</div>
                            <div class="tape daily-tape">Wed</div>
                            <div class="tape daily-tape">Thu</div>
                            <div class="tape daily-tape">Fri</div>
                        </div>
                        <div class="tape-stack">
                            <div style="color: #f97316; font-weight: bold; margin-bottom: 10px;">Weekly (Father)</div>
                            <div class="tape weekly-tape">Week 1</div>
                            <div class="tape weekly-tape">Week 2</div>
                            <div class="tape weekly-tape">Week 3</div>
                            <div class="tape weekly-tape">Week 4</div>
                        </div>
                        <div class="tape-stack">
                            <div style="color: #ea580c; font-weight: bold; margin-bottom: 10px;">Monthly (Grandfather)</div>
                            <div class="tape monthly-tape">Jan</div>
                            <div class="tape monthly-tape">Feb</div>
                            <div class="tape monthly-tape">Mar</div>
                            <div class="tape monthly-tape">...</div>
                        </div>
                    </div>

                    <div class="info-box">
                        <strong>Retention:</strong> Daily (5-7 days), Weekly (4-5 weeks), Monthly (12 months or more)<br>
                        <strong>Best for:</strong> Business environments with compliance requirements
                    </div>
                </div>

                <div class="rotation-scheme">
                    <h3>Tower of Hanoi</h3>
                    <p>Mathematical rotation scheme that provides exponentially spaced backups. Very efficient but complex.</p>

                    <div class="calculator">
                        <div class="input-group">
                            <label>Number of Backup Sets:</label>
                            <select id="hanoiSets" onchange="generateHanoi()">
                                <option value="3">3 Sets</option>
                                <option value="4">4 Sets</option>
                                <option value="5" selected>5 Sets</option>
                            </select>
                        </div>
                        <button class="btn" onclick="generateHanoi()">Generate Schedule</button>
                    </div>

                    <div class="result-box" id="hanoiSchedule"></div>

                    <div class="info-box">
                        <strong>Pattern:</strong> Set A every 2 days, Set B every 4 days, Set C every 8 days, etc.<br>
                        <strong>Best for:</strong> Scenarios with limited media but need historical retention
                    </div>
                </div>

                <div class="rotation-scheme">
                    <h3>Round Robin (Simple Rotation)</h3>
                    <p>Cycles through a fixed set of backup media in order. Simple but provides limited history.</p>

                    <div class="scheme-visual">
                        <div class="tape daily-tape">Set 1</div>
                        <span class="arrow">→</span>
                        <div class="tape daily-tape">Set 2</div>
                        <span class="arrow">→</span>
                        <div class="tape daily-tape">Set 3</div>
                        <span class="arrow">→</span>
                        <div class="tape daily-tape">Set 4</div>
                        <span class="arrow">→</span>
                        <div class="tape daily-tape">Set 1...</div>
                    </div>

                    <div class="info-box">
                        <strong>Retention:</strong> Equals number of backup sets<br>
                        <strong>Best for:</strong> Simple environments or personal backups with limited media
                    </div>
                </div>
            </div>
        </div>

        <!-- Disaster Recovery Tab -->
        <div id="disaster" class="tab-content">
            <div class="section">
                <h2>Disaster Recovery Planning</h2>
                <p>Prepare for the worst-case scenario with a comprehensive recovery plan:</p>

                <div class="result-box">
                    <h3>Key Metrics</h3>
                    <div class="result-item">
                        <span><strong>RTO (Recovery Time Objective):</strong> Maximum acceptable downtime</span>
                    </div>
                    <div class="result-item">
                        <span><strong>RPO (Recovery Point Objective):</strong> Maximum acceptable data loss</span>
                    </div>
                </div>

                <div class="calculator">
                    <h3>Calculate Your Requirements</h3>
                    <div class="input-group">
                        <label>How much downtime can your organization tolerate?</label>
                        <select id="rtoSelect">
                            <option value="0">Near-zero (High Availability)</option>
                            <option value="1">1 hour (Mission Critical)</option>
                            <option value="4">4 hours (Business Critical)</option>
                            <option value="24" selected>24 hours (Important)</option>
                            <option value="72">72 hours (Standard)</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label>How much data loss can you accept?</label>
                        <select id="rpoSelect">
                            <option value="0">Zero (Real-time Replication)</option>
                            <option value="1">1 hour (Hourly Backups)</option>
                            <option value="24" selected>24 hours (Daily Backups)</option>
                            <option value="168">1 week (Weekly Backups)</option>
                        </select>
                    </div>

                    <button class="btn" onclick="analyzeDR()">Analyze Requirements</button>
                </div>

                <div class="result-box" id="drRecommendations"></div>

                <div class="checklist">
                    <h3>Disaster Recovery Checklist</h3>
                    <div class="checklist-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <div>Document all critical systems and data locations</div>
                    </div>
                    <div class="checklist-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <div>Define RTO and RPO for each system</div>
                    </div>
                    <div class="checklist-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <div>Create detailed recovery procedures (step-by-step)</div>
                    </div>
                    <div class="checklist-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <div>Identify required hardware and software for recovery</div>
                    </div>
                    <div class="checklist-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <div>Assign recovery team roles and responsibilities</div>
                    </div>
                    <div class="checklist-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <div>Test backup restoration regularly (at least quarterly)</div>
                    </div>
                    <div class="checklist-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <div>Conduct full DR drill annually</div>
                    </div>
                    <div class="checklist-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <div>Keep DR plan documentation both onsite and offsite</div>
                    </div>
                    <div class="checklist-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <div>Maintain contact list for recovery team and vendors</div>
                    </div>
                    <div class="checklist-item" onclick="toggleCheckbox(this)">
                        <div class="checkbox"></div>
                        <div>Review and update DR plan after major changes</div>
                    </div>
                </div>

                <div class="warning-box">
                    <strong>Remember:</strong> An untested backup is not a backup! Regular testing is critical to ensure your recovery procedures work when needed.
                </div>
            </div>
        </div>

        <!-- Quiz Tab -->
        <div id="quiz" class="tab-content">
            <div class="section">
                <h2>Backup Concepts Quiz</h2>
                <p>Test your understanding of backup strategies:</p>

                <div class="score-display" id="quizScore">Score: 0 / 0</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="quizProgress" style="width: 0%">0%</div>
                </div>

                <div class="quiz-container" id="quizContainer"></div>

                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn" onclick="startQuiz()">Start Quiz</button>
                    <button class="btn" onclick="resetQuiz()">Reset</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            if (tabName === 'timeline') updateTimeline();
            if (tabName === 'calculator') calculateStorage();
            if (tabName === 'rotation') generateHanoi();
        }

        // Timeline Visualizer
        function updateTimeline() {
            const strategy = document.getElementById('timelineStrategy').value;
            const timeline = document.getElementById('timelineDisplay');
            const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];

            let html = '';

            days.forEach((day, index) => {
                html += `<div class="day-column"><div class="day-label">${day}</div><div class="backup-stack">`;

                if (strategy === 'full-only') {
                    if (index === 0) {
                        html += `<div class="backup-item full-backup" title="Full Backup - All Data">Full<br>100%</div>`;
                    } else {
                        html += `<div class="backup-item" style="background: transparent; border: 2px dashed rgba(234, 88, 12, 0.3);">No<br>Backup</div>`;
                    }
                } else if (strategy === 'full-incremental') {
                    if (index === 0) {
                        html += `<div class="backup-item full-backup" title="Full Backup">Full<br>100%</div>`;
                    } else {
                        html += `<div class="backup-item incremental-backup" title="Incremental - Changes only">Incr<br>${5 + index}%</div>`;
                    }
                } else if (strategy === 'full-differential') {
                    if (index === 0) {
                        html += `<div class="backup-item full-backup" title="Full Backup">Full<br>100%</div>`;
                    } else {
                        const size = 5 + (index * 5);
                        html += `<div class="backup-item differential-backup" title="Differential - All changes since full">Diff<br>${size}%</div>`;
                    }
                }

                html += '</div></div>';
            });

            timeline.innerHTML = html;
            updateRecoveryInfo(strategy);
        }

        function updateRecoveryInfo(strategy) {
            const info = document.getElementById('recoveryInfo');
            let html = '';

            if (strategy === 'full-only') {
                html = `
                    <div class="result-item"><span>Backups Needed for Recovery:</span><span class="result-value">1 (Full only)</span></div>
                    <div class="result-item"><span>Recovery Complexity:</span><span class="result-value">Very Simple</span></div>
                    <div class="result-item"><span>Weekly Storage Used:</span><span class="result-value">100% (1x data size)</span></div>
                    <div class="result-item"><span>Data Loss Risk:</span><span class="result-value">High (up to 7 days)</span></div>
                `;
            } else if (strategy === 'full-incremental') {
                html = `
                    <div class="result-item"><span>Backups Needed for Recovery:</span><span class="result-value">Full + All Incrementals</span></div>
                    <div class="result-item"><span>Recovery Complexity:</span><span class="result-value">Complex</span></div>
                    <div class="result-item"><span>Weekly Storage Used:</span><span class="result-value">~140% (minimal)</span></div>
                    <div class="result-item"><span>Data Loss Risk:</span><span class="result-value">Low (max 1 day)</span></div>
                `;
            } else {
                html = `
                    <div class="result-item"><span>Backups Needed for Recovery:</span><span class="result-value">Full + Latest Differential</span></div>
                    <div class="result-item"><span>Recovery Complexity:</span><span class="result-value">Moderate</span></div>
                    <div class="result-item"><span>Weekly Storage Used:</span><span class="result-value">~220% (balanced)</span></div>
                    <div class="result-item"><span>Data Loss Risk:</span><span class="result-value">Low (max 1 day)</span></div>
                `;
            }

            info.innerHTML = html;
        }

        // 3-2-1 Rule Checkbox
        function toggleCheckbox(item) {
            const checkbox = item.querySelector('.checkbox');
            checkbox.classList.toggle('checked');
        }

        // Calculator functions
        function updateChangeRate() {
            const rate = document.getElementById('changeRate').value;
            document.getElementById('changeRateDisplay').textContent = rate + '%';
        }

        function calculateStorage() {
            const dataSize = parseFloat(document.getElementById('dataSize').value);
            const changeRate = parseFloat(document.getElementById('changeRate').value) / 100;
            const weeks = parseInt(document.getElementById('backupWeeks').value);
            const strategy = document.getElementById('calcStrategy').value;
            const speedMbps = parseFloat(document.getElementById('transferSpeed').value);

            const days = weeks * 7;
            let totalStorage = 0;
            let backupTime = 0;
            let restoreTime = 0;

            if (strategy === 'full-only') {
                totalStorage = dataSize;
                backupTime = dataSize;
                restoreTime = dataSize;
            } else if (strategy === 'full-daily') {
                totalStorage = dataSize * days;
                backupTime = dataSize;
                restoreTime = dataSize;
            } else if (strategy === 'full-incremental') {
                totalStorage = dataSize;
                for (let i = 1; i < days; i++) {
                    totalStorage += dataSize * changeRate;
                }
                backupTime = dataSize * changeRate;
                restoreTime = totalStorage;
            } else if (strategy === 'full-differential') {
                totalStorage = dataSize;
                const diffsPerWeek = 6;
                for (let w = 0; w < weeks; w++) {
                    for (let d = 1; d <= diffsPerWeek; d++) {
                        totalStorage += dataSize * changeRate * d;
                    }
                }
                backupTime = dataSize * changeRate * 6;
                restoreTime = dataSize + (dataSize * changeRate * 6);
            }

            const backupTimeHours = (backupTime * 8) / speedMbps / 3600;
            const restoreTimeHours = (restoreTime * 8) / speedMbps / 3600;

            const storageHTML = `
                <div class="result-item"><span>Total Storage Required:</span><span class="result-value">${totalStorage.toFixed(2)} GB</span></div>
                <div class="result-item"><span>Storage as % of Original:</span><span class="result-value">${((totalStorage / dataSize) * 100).toFixed(1)}%</span></div>
                <div class="result-item"><span>Number of Backup Sets:</span><span class="result-value">${strategy === 'full-only' ? 1 : days}</span></div>
            `;

            const timeHTML = `
                <div class="result-item"><span>Typical Backup Time:</span><span class="result-value">${formatTime(backupTimeHours)}</span></div>
                <div class="result-item"><span>Full Restore Time:</span><span class="result-value">${formatTime(restoreTimeHours)}</span></div>
                <div class="result-item"><span>Transfer Speed:</span><span class="result-value">${speedMbps} Mbps</span></div>
            `;

            document.getElementById('storageResults').innerHTML = storageHTML;
            document.getElementById('timeEstimates').innerHTML = timeHTML;
        }

        function formatTime(hours) {
            if (hours < 1) {
                return (hours * 60).toFixed(1) + ' minutes';
            } else if (hours < 24) {
                return hours.toFixed(2) + ' hours';
            } else {
                return (hours / 24).toFixed(2) + ' days';
            }
        }

        // Tower of Hanoi rotation
        function generateHanoi() {
            const sets = parseInt(document.getElementById('hanoiSets').value);
            const days = 30;
            let schedule = [];

            for (let day = 1; day <= days; day++) {
                for (let set = 0; set < sets; set++) {
                    if (day % Math.pow(2, set + 1) === 0) {
                        schedule.push(`Day ${day}: Use Set ${String.fromCharCode(65 + set)}`);
                        break;
                    }
                }
            }

            let html = '<h3>30-Day Schedule:</h3><div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px;">';
            schedule.forEach(item => {
                html += `<div style="background: rgba(234, 88, 12, 0.2); padding: 10px; border-radius: 4px; border: 1px solid #ea580c;">${item}</div>`;
            });
            html += '</div>';

            document.getElementById('hanoiSchedule').innerHTML = html;
        }

        // Disaster Recovery Analysis
        function analyzeDR() {
            const rto = parseInt(document.getElementById('rtoSelect').value);
            const rpo = parseInt(document.getElementById('rpoSelect').value);

            let recommendations = '<h3>Recommended Strategy</h3>';

            if (rto === 0) {
                recommendations += `
                    <div class="result-item">
                        <span><strong>High Availability Solution Required:</strong></span>
                    </div>
                    <p>You need active-active or active-passive clustering with real-time failover. Consider:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Load-balanced server clusters</li>
                        <li>Database replication (synchronous)</li>
                        <li>Geographic redundancy</li>
                        <li>Automated failover systems</li>
                    </ul>
                `;
            } else if (rto <= 4) {
                recommendations += `
                    <div class="result-item">
                        <span><strong>Hot Standby Required:</strong></span>
                    </div>
                    <p>Maintain ready-to-run backup systems:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Warm standby servers</li>
                        <li>Rapid provisioning capabilities</li>
                        <li>Automated recovery scripts</li>
                        <li>Pre-configured backup hardware</li>
                    </ul>
                `;
            } else if (rto <= 24) {
                recommendations += `
                    <div class="result-item">
                        <span><strong>Warm Standby Acceptable:</strong></span>
                    </div>
                    <p>Standard DR with documented procedures:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Daily backup verification</li>
                        <li>Detailed recovery documentation</li>
                        <li>Regular DR testing</li>
                        <li>Available replacement hardware</li>
                    </ul>
                `;
            } else {
                recommendations += `
                    <div class="result-item">
                        <span><strong>Cold Standby Acceptable:</strong></span>
                    </div>
                    <p>Basic DR with standard backup procedures:</p>
                    <ul style="margin-left: 20px; margin-top: 10px;">
                        <li>Weekly full backups</li>
                        <li>Offsite storage</li>
                        <li>Hardware procurement plan</li>
                        <li>Annual DR testing</li>
                    </ul>
                `;
            }

            recommendations += '<h3 style="margin-top: 20px;">Backup Frequency</h3>';

            if (rpo === 0) {
                recommendations += `<p><strong>Continuous Data Protection (CDP)</strong> or real-time replication required. Every transaction must be replicated.</p>`;
            } else if (rpo === 1) {
                recommendations += `<p><strong>Hourly backups</strong> with transaction log backups between full backups.</p>`;
            } else if (rpo === 24) {
                recommendations += `<p><strong>Daily backups</strong> are sufficient. Use incremental or differential backups.</p>`;
            } else {
                recommendations += `<p><strong>Weekly backups</strong> are acceptable for this data criticality level.</p>`;
            }

            document.getElementById('drRecommendations').innerHTML = recommendations;
        }

        // Quiz functionality
        const quizQuestions = [
            {
                question: "Which backup type requires the most storage space over time?",
                options: ["Incremental", "Differential", "Full (daily)", "Mirror"],
                correct: 2,
                explanation: "Daily full backups require the most storage as they copy all data every time."
            },
            {
                question: "In the 3-2-1 rule, what does the '1' represent?",
                options: ["One backup per day", "One offsite copy", "One full backup per week", "One administrator"],
                correct: 1,
                explanation: "The '1' means at least one backup copy should be kept offsite for disaster protection."
            },
            {
                question: "Which backup type provides the fastest daily backup time?",
                options: ["Full backup", "Differential backup", "Incremental backup", "Mirror backup"],
                correct: 2,
                explanation: "Incremental backups only copy data changed since the last backup, making them fastest."
            },
            {
                question: "What does RPO stand for?",
                options: ["Recovery Point Objective", "Restore Process Order", "Rapid Processing Option", "Redundant Protection Organization"],
                correct: 0,
                explanation: "RPO (Recovery Point Objective) is the maximum acceptable data loss measured in time."
            },
            {
                question: "Which rotation scheme uses the pattern: daily, weekly, monthly?",
                options: ["Round Robin", "Tower of Hanoi", "Grandfather-Father-Son", "Mirror Sync"],
                correct: 2,
                explanation: "Grandfather-Father-Son (GFS) uses daily (son), weekly (father), and monthly (grandfather) backups."
            },
            {
                question: "To restore from a week of incremental backups, you need:",
                options: ["Only the latest incremental", "Last full + latest incremental", "Last full + all incrementals", "Any two incrementals"],
                correct: 2,
                explanation: "Incremental backups require the full backup plus all incremental backups in sequence."
            },
            {
                question: "What is the main risk of using only mirror backups?",
                options: ["Too much storage needed", "Slow backup speed", "Deletions and corruption sync immediately", "Requires special hardware"],
                correct: 2,
                explanation: "Mirror backups sync all changes including deletions and corruption, providing no versioning."
            },
            {
                question: "What does RTO measure?",
                options: ["Maximum acceptable downtime", "Maximum data loss", "Backup speed", "Storage requirements"],
                correct: 0,
                explanation: "RTO (Recovery Time Objective) defines the maximum acceptable downtime during recovery."
            },
            {
                question: "In the 3-2-1-1-0 rule, what does the additional '1' represent?",
                options: ["One year retention", "One administrator", "One offline/air-gapped copy", "One cloud backup"],
                correct: 2,
                explanation: "The additional '1' means keeping one backup offline for ransomware protection."
            },
            {
                question: "Differential backups copy:",
                options: ["Everything", "Changes since last backup", "Changes since last full backup", "Only new files"],
                correct: 2,
                explanation: "Differential backups copy all changes since the last full backup."
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        let answered = false;

        function startQuiz() {
            currentQuestion = 0;
            score = 0;
            answered = false;
            displayQuestion();
        }

        function displayQuestion() {
            if (currentQuestion >= quizQuestions.length) {
                showResults();
                return;
            }

            const q = quizQuestions[currentQuestion];
            let html = `
                <div class="question">
                    <h3>Question ${currentQuestion + 1} of ${quizQuestions.length}</h3>
                    <p style="font-size: 1.1em; margin: 15px 0;">${q.question}</p>
                    <div class="options">
            `;

            q.options.forEach((option, index) => {
                html += `<div class="option" onclick="selectAnswer(${index})">${option}</div>`;
            });

            html += `
                    </div>
                    <div id="explanation" style="margin-top: 15px; padding: 15px; background: rgba(234, 88, 12, 0.1); border-radius: 6px; display: none;"></div>
                    <button class="btn" onclick="nextQuestion()" id="nextBtn" style="display: none; margin-top: 15px;">Next Question</button>
                </div>
            `;

            document.getElementById('quizContainer').innerHTML = html;
            updateQuizScore();
            answered = false;
        }

        function selectAnswer(index) {
            if (answered) return;

            const q = quizQuestions[currentQuestion];
            const options = document.querySelectorAll('.option');

            options[index].classList.add('selected');

            setTimeout(() => {
                answered = true;

                if (index === q.correct) {
                    options[index].classList.add('correct');
                    score++;
                } else {
                    options[index].classList.add('incorrect');
                    options[q.correct].classList.add('correct');
                }

                document.getElementById('explanation').innerHTML = `<strong>Explanation:</strong> ${q.explanation}`;
                document.getElementById('explanation').style.display = 'block';
                document.getElementById('nextBtn').style.display = 'inline-block';

                updateQuizScore();
            }, 300);
        }

        function nextQuestion() {
            currentQuestion++;
            displayQuestion();
        }

        function updateQuizScore() {
            document.getElementById('quizScore').textContent = `Score: ${score} / ${currentQuestion + (answered ? 1 : 0)}`;
            const progress = ((currentQuestion / quizQuestions.length) * 100).toFixed(0);
            const progressBar = document.getElementById('quizProgress');
            progressBar.style.width = progress + '%';
            progressBar.textContent = progress + '%';
        }

        function showResults() {
            const percentage = ((score / quizQuestions.length) * 100).toFixed(0);
            let message = '';

            if (percentage >= 90) {
                message = 'Excellent! You have mastered backup strategies!';
            } else if (percentage >= 70) {
                message = 'Good job! You have a solid understanding of backups.';
            } else if (percentage >= 50) {
                message = 'Not bad! Review the material to strengthen your knowledge.';
            } else {
                message = 'Keep learning! Review the backup types and best practices.';
            }

            const html = `
                <div class="question">
                    <h3>Quiz Complete!</h3>
                    <div style="text-align: center; margin: 30px 0;">
                        <div style="font-size: 4em; color: #ea580c; font-weight: bold;">${percentage}%</div>
                        <div style="font-size: 1.5em; margin: 20px 0;">${score} out of ${quizQuestions.length} correct</div>
                        <div style="font-size: 1.2em; color: #fdba74; margin: 20px 0;">${message}</div>
                    </div>
                    <button class="btn" onclick="startQuiz()">Try Again</button>
                </div>
            `;

            document.getElementById('quizContainer').innerHTML = html;
        }

        function resetQuiz() {
            document.getElementById('quizContainer').innerHTML = '<p style="text-align: center; padding: 40px; font-size: 1.2em;">Click "Start Quiz" to begin testing your knowledge!</p>';
            document.getElementById('quizScore').textContent = 'Score: 0 / 0';
            document.getElementById('quizProgress').style.width = '0%';
            document.getElementById('quizProgress').textContent = '0%';
        }

        // Initialize on load
        window.onload = function() {
            updateTimeline();
            calculateStorage();
            resetQuiz();
        };
    </script>
</body>
</html>