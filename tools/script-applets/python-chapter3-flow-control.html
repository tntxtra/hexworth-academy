<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Chapter 3: Flow Control | House of Script</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-green: #166534;
            --light-green: #22c55e;
            --purple: #7c3aed;
            --light-purple: #a78bfa;
            --dark-bg: #0f172a;
            --card-bg: #1e293b;
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --border-color: #334155;
            --success: #10b981;
            --error: #ef4444;
            --warning: #f59e0b;
            --code-bg: #0d1117;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--dark-bg) 0%, #1a2332 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 20px;
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--purple) 100%);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
            color: var(--light-green);
        }

        .tab-container {
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .tabs {
            display: flex;
            background: var(--dark-bg);
            overflow-x: auto;
            border-bottom: 2px solid var(--border-color);
        }

        .tab {
            padding: 18px 30px;
            cursor: pointer;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s;
            white-space: nowrap;
            position: relative;
        }

        .tab:hover {
            background: var(--card-bg);
            color: var(--light-green);
        }

        .tab.active {
            color: var(--light-green);
            background: var(--card-bg);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-green), var(--purple));
        }

        .tab-content {
            display: none;
            padding: 30px;
            animation: fadeIn 0.3s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section {
            background: var(--dark-bg);
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 25px;
            border: 1px solid var(--border-color);
        }

        h2 {
            color: var(--light-green);
            margin-bottom: 20px;
            font-size: 1.8em;
            border-left: 4px solid var(--purple);
            padding-left: 15px;
        }

        h3 {
            color: var(--light-purple);
            margin: 20px 0 15px 0;
            font-size: 1.3em;
        }

        .code-block {
            background: var(--code-bg);
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid var(--primary-green);
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            position: relative;
        }

        .code-block code {
            color: #e6edf3;
            line-height: 1.8;
        }

        .keyword { color: #ff7b72; }
        .string { color: #a5d6ff; }
        .number { color: #79c0ff; }
        .comment { color: #8b949e; font-style: italic; }
        .function { color: #d2a8ff; }
        .operator { color: #ffa657; }

        /* Flowchart Visualizer */
        .flowchart-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 20px;
        }

        .flowchart-editor {
            background: var(--dark-bg);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
        }

        .flowchart-display {
            background: var(--code-bg);
            padding: 30px;
            border-radius: 10px;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .flowchart-node {
            background: var(--card-bg);
            padding: 15px 25px;
            border-radius: 8px;
            border: 2px solid var(--primary-green);
            margin: 15px auto;
            text-align: center;
            max-width: 250px;
            position: relative;
            transition: all 0.3s;
        }

        .flowchart-node.active {
            background: var(--primary-green);
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(34, 197, 94, 0.5);
        }

        .flowchart-node.decision {
            clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
            padding: 25px;
            min-width: 180px;
            min-height: 180px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .flowchart-arrow {
            text-align: center;
            font-size: 1.5em;
            color: var(--purple);
            margin: 5px 0;
        }

        .flowchart-branches {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .branch-label {
            color: var(--light-green);
            font-weight: bold;
            text-align: center;
            margin-bottom: 10px;
        }

        .control-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        button {
            background: linear-gradient(135deg, var(--primary-green), var(--light-green));
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(34, 197, 94, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        button.secondary {
            background: linear-gradient(135deg, var(--purple), var(--light-purple));
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Loop Simulator */
        .simulator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .simulator-code {
            background: var(--code-bg);
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
        }

        .code-line {
            padding: 5px 10px;
            margin: 2px 0;
            border-radius: 4px;
            transition: all 0.3s;
        }

        .code-line.executing {
            background: var(--primary-green);
            box-shadow: 0 0 15px rgba(34, 197, 94, 0.5);
        }

        .code-line.completed {
            background: rgba(34, 197, 94, 0.2);
        }

        .variables-panel {
            background: var(--dark-bg);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
        }

        .variable-item {
            background: var(--card-bg);
            padding: 12px;
            margin: 10px 0;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
        }

        .variable-item.changed {
            background: var(--primary-green);
            animation: pulse 0.5s;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .variable-name {
            color: var(--light-purple);
            font-weight: bold;
        }

        .variable-value {
            color: var(--light-green);
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
        }

        .output-console {
            background: var(--code-bg);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            min-height: 100px;
            font-family: 'Courier New', monospace;
            border: 1px solid var(--primary-green);
        }

        .output-line {
            color: var(--light-green);
            padding: 3px 0;
        }

        /* Condition Builder */
        .builder-container {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .builder-palette {
            background: var(--dark-bg);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
        }

        .palette-item {
            background: var(--card-bg);
            padding: 10px 15px;
            margin: 8px 0;
            border-radius: 6px;
            cursor: move;
            border: 2px solid var(--primary-green);
            transition: all 0.3s;
            text-align: center;
        }

        .palette-item:hover {
            background: var(--primary-green);
            transform: translateX(5px);
        }

        .builder-workspace {
            background: var(--code-bg);
            padding: 30px;
            border-radius: 10px;
            min-height: 400px;
            border: 2px dashed var(--border-color);
        }

        .builder-workspace.drag-over {
            border-color: var(--light-green);
            background: rgba(34, 197, 94, 0.1);
        }

        .condition-block {
            background: var(--card-bg);
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border: 2px solid var(--purple);
            display: inline-flex;
            align-items: center;
            gap: 10px;
            cursor: grab;
        }

        .condition-block.dragging {
            opacity: 0.5;
        }

        .remove-btn {
            background: var(--error);
            color: white;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            font-size: 0.9em;
            padding: 0;
        }

        .result-display {
            background: var(--dark-bg);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border: 2px solid var(--primary-green);
        }

        .result-display.true {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.1);
        }

        .result-display.false {
            border-color: var(--error);
            background: rgba(239, 68, 68, 0.1);
        }

        /* Quiz Section */
        .quiz-question {
            background: var(--dark-bg);
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
        }

        .question-text {
            font-size: 1.1em;
            margin-bottom: 20px;
            color: var(--light-green);
            font-weight: 600;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .quiz-option {
            background: var(--card-bg);
            padding: 15px 20px;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid var(--border-color);
            transition: all 0.3s;
        }

        .quiz-option:hover {
            border-color: var(--purple);
            background: rgba(124, 58, 237, 0.1);
        }

        .quiz-option.selected {
            border-color: var(--light-green);
            background: rgba(34, 197, 94, 0.1);
        }

        .quiz-option.correct {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.2);
        }

        .quiz-option.incorrect {
            border-color: var(--error);
            background: rgba(239, 68, 68, 0.2);
        }

        .quiz-feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }

        .quiz-feedback.show {
            display: block;
        }

        .quiz-feedback.correct {
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid var(--success);
            color: var(--success);
        }

        .quiz-feedback.incorrect {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid var(--error);
            color: var(--error);
        }

        .quiz-score {
            background: linear-gradient(135deg, var(--primary-green), var(--purple));
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.3em;
            margin-bottom: 20px;
        }

        .score-number {
            font-size: 2em;
            font-weight: bold;
            color: var(--light-green);
        }

        /* Reference Section */
        .reference-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .reference-card {
            background: var(--dark-bg);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
            transition: all 0.3s;
        }

        .reference-card:hover {
            border-color: var(--primary-green);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .reference-card h4 {
            color: var(--light-green);
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .operator-table {
            width: 100%;
            margin-top: 15px;
            border-collapse: collapse;
        }

        .operator-table td {
            padding: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .operator-table td:first-child {
            color: var(--light-purple);
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }

        .input-group {
            margin: 15px 0;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--light-green);
            font-weight: 600;
        }

        input[type="number"],
        input[type="text"],
        select {
            width: 100%;
            padding: 12px;
            background: var(--code-bg);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1em;
        }

        input:focus,
        select:focus {
            outline: none;
            border-color: var(--primary-green);
        }

        .example-list {
            list-style: none;
            padding-left: 0;
        }

        .example-list li {
            padding: 10px;
            margin: 8px 0;
            background: var(--card-bg);
            border-radius: 6px;
            border-left: 3px solid var(--purple);
        }

        /* Responsive Design */
        @media (max-width: 968px) {
            .flowchart-container,
            .simulator-grid,
            .builder-container {
                grid-template-columns: 1fr;
            }

            .tabs {
                flex-wrap: wrap;
            }

            .tab {
                flex: 1 1 auto;
                min-width: 120px;
            }

            h1 {
                font-size: 2em;
            }

            .flowchart-branches {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 640px) {
            body {
                padding: 10px;
            }

            .tab-content {
                padding: 15px;
            }

            .section {
                padding: 15px;
            }

            h1 {
                font-size: 1.6em;
            }

            h2 {
                font-size: 1.4em;
            }
        }

        .info-box {
            background: rgba(124, 58, 237, 0.1);
            border-left: 4px solid var(--purple);
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }

        .info-box strong {
            color: var(--light-purple);
        }

        .execution-steps {
            background: var(--dark-bg);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            max-height: 300px;
            overflow-y: auto;
        }

        .step-item {
            padding: 8px;
            margin: 5px 0;
            background: var(--card-bg);
            border-radius: 4px;
            border-left: 3px solid var(--primary-green);
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .loop-type-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .loop-type-btn {
            flex: 1;
            min-width: 150px;
        }

        .loop-type-btn.active {
            background: linear-gradient(135deg, var(--purple), var(--light-purple));
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Python Chapter 3: Flow Control</h1>
            <div class="subtitle">Master Conditional Logic, Loops, and Program Flow</div>
        </header>

        <div class="tab-container">
            <div class="tabs">
                <button class="tab active" data-tab="overview">Overview</button>
                <button class="tab" data-tab="flowchart">Flowchart Visualizer</button>
                <button class="tab" data-tab="simulator">Loop Simulator</button>
                <button class="tab" data-tab="builder">Condition Builder</button>
                <button class="tab" data-tab="reference">Quick Reference</button>
                <button class="tab" data-tab="quiz">Quiz</button>
            </div>

            <!-- Overview Tab -->
            <div class="tab-content active" id="overview">
                <div class="section">
                    <h2>Introduction to Flow Control</h2>
                    <p>Flow control statements allow your program to make decisions and repeat actions. They are the building blocks of program logic, enabling your code to respond to different conditions and process data efficiently.</p>

                    <h3>Key Concepts Covered</h3>
                    <ul class="example-list">
                        <li><strong>Conditional Statements:</strong> if, elif, else - Make decisions based on conditions</li>
                        <li><strong>Comparison Operators:</strong> ==, !=, &lt;, &gt;, &lt;=, &gt;= - Compare values</li>
                        <li><strong>Logical Operators:</strong> and, or, not - Combine conditions</li>
                        <li><strong>While Loops:</strong> Repeat code while a condition is true</li>
                        <li><strong>For Loops:</strong> Iterate over sequences with range()</li>
                        <li><strong>Loop Control:</strong> break, continue, and pass statements</li>
                        <li><strong>Loop-Else:</strong> Execute code when loops complete normally</li>
                        <li><strong>Truthy/Falsy:</strong> Understanding boolean evaluation</li>
                    </ul>
                </div>

                <div class="section">
                    <h2>Conditional Statements (if/elif/else)</h2>
                    <p>Conditional statements allow your program to execute different code blocks based on whether conditions are true or false.</p>

                    <div class="code-block"><code><span class="comment"># Basic if statement</span>
<span class="keyword">if</span> temperature > <span class="number">30</span>:
    <span class="function">print</span>(<span class="string">"It's hot outside!"</span>)

<span class="comment"># if-else statement</span>
<span class="keyword">if</span> age >= <span class="number">18</span>:
    <span class="function">print</span>(<span class="string">"You can vote"</span>)
<span class="keyword">else</span>:
    <span class="function">print</span>(<span class="string">"You cannot vote yet"</span>)

<span class="comment"># if-elif-else statement</span>
<span class="keyword">if</span> score >= <span class="number">90</span>:
    grade = <span class="string">"A"</span>
<span class="keyword">elif</span> score >= <span class="number">80</span>:
    grade = <span class="string">"B"</span>
<span class="keyword">elif</span> score >= <span class="number">70</span>:
    grade = <span class="string">"C"</span>
<span class="keyword">else</span>:
    grade = <span class="string">"F"</span></code></div>

                    <div class="info-box">
                        <strong>Key Point:</strong> Python uses indentation (usually 4 spaces) to define code blocks. All statements at the same indentation level belong to the same block.
                    </div>
                </div>

                <div class="section">
                    <h2>Comparison and Logical Operators</h2>
                    <div class="reference-grid">
                        <div class="reference-card">
                            <h4>Comparison Operators</h4>
                            <table class="operator-table">
                                <tr><td>==</td><td>Equal to</td></tr>
                                <tr><td>!=</td><td>Not equal to</td></tr>
                                <tr><td>&lt;</td><td>Less than</td></tr>
                                <tr><td>&gt;</td><td>Greater than</td></tr>
                                <tr><td>&lt;=</td><td>Less than or equal</td></tr>
                                <tr><td>&gt;=</td><td>Greater than or equal</td></tr>
                            </table>
                        </div>
                        <div class="reference-card">
                            <h4>Logical Operators</h4>
                            <table class="operator-table">
                                <tr><td>and</td><td>Both conditions must be True</td></tr>
                                <tr><td>or</td><td>At least one condition must be True</td></tr>
                                <tr><td>not</td><td>Reverses the boolean value</td></tr>
                            </table>
                        </div>
                    </div>

                    <div class="code-block"><code><span class="comment"># Using logical operators</span>
<span class="keyword">if</span> age >= <span class="number">18</span> <span class="keyword">and</span> has_license:
    <span class="function">print</span>(<span class="string">"You can drive"</span>)

<span class="keyword">if</span> is_weekend <span class="keyword">or</span> is_holiday:
    <span class="function">print</span>(<span class="string">"Time to relax!"</span>)

<span class="keyword">if not</span> is_raining:
    <span class="function">print</span>(<span class="string">"Let's go for a walk"</span>)</code></div>
                </div>

                <div class="section">
                    <h2>Loops: While and For</h2>

                    <h3>While Loops</h3>
                    <p>Execute code repeatedly while a condition is true.</p>
                    <div class="code-block"><code><span class="comment"># Basic while loop</span>
count = <span class="number">0</span>
<span class="keyword">while</span> count < <span class="number">5</span>:
    <span class="function">print</span>(count)
    count += <span class="number">1</span>

<span class="comment"># While with break</span>
<span class="keyword">while True</span>:
    user_input = <span class="function">input</span>(<span class="string">"Enter 'quit' to exit: "</span>)
    <span class="keyword">if</span> user_input == <span class="string">"quit"</span>:
        <span class="keyword">break</span>

<span class="comment"># While with continue</span>
i = <span class="number">0</span>
<span class="keyword">while</span> i < <span class="number">10</span>:
    i += <span class="number">1</span>
    <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">0</span>:
        <span class="keyword">continue</span>  <span class="comment"># Skip even numbers</span>
    <span class="function">print</span>(i)</code></div>

                    <h3>For Loops</h3>
                    <p>Iterate over sequences using the range() function.</p>
                    <div class="code-block"><code><span class="comment"># Basic for loop</span>
<span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(<span class="number">5</span>):
    <span class="function">print</span>(i)  <span class="comment"># Prints 0, 1, 2, 3, 4</span>

<span class="comment"># Range with start and stop</span>
<span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(<span class="number">1</span>, <span class="number">6</span>):
    <span class="function">print</span>(i)  <span class="comment"># Prints 1, 2, 3, 4, 5</span>

<span class="comment"># Range with step</span>
<span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(<span class="number">0</span>, <span class="number">10</span>, <span class="number">2</span>):
    <span class="function">print</span>(i)  <span class="comment"># Prints 0, 2, 4, 6, 8</span>

<span class="comment"># Nested loops</span>
<span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(<span class="number">3</span>):
    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="function">range</span>(<span class="number">3</span>):
        <span class="function">print</span>(<span class="string">f"i={i}, j={j}"</span>)</code></div>
                </div>

                <div class="section">
                    <h2>Special Loop Features</h2>

                    <h3>Loop-Else Clause</h3>
                    <p>The else clause executes when a loop completes normally (without hitting a break statement).</p>
                    <div class="code-block"><code><span class="comment"># For-else example</span>
<span class="keyword">for</span> n <span class="keyword">in</span> <span class="function">range</span>(<span class="number">2</span>, <span class="number">10</span>):
    <span class="keyword">for</span> x <span class="keyword">in</span> <span class="function">range</span>(<span class="number">2</span>, n):
        <span class="keyword">if</span> n % x == <span class="number">0</span>:
            <span class="function">print</span>(<span class="string">f"{n} is not prime"</span>)
            <span class="keyword">break</span>
    <span class="keyword">else</span>:
        <span class="function">print</span>(<span class="string">f"{n} is prime"</span>)</code></div>

                    <h3>The Pass Statement</h3>
                    <p>A null operation that does nothing. Used as a placeholder.</p>
                    <div class="code-block"><code><span class="comment"># Using pass as placeholder</span>
<span class="keyword">if</span> condition:
    <span class="keyword">pass</span>  <span class="comment"># TODO: implement this later</span>
<span class="keyword">else</span>:
    <span class="function">handle_error</span>()</code></div>

                    <h3>Truthy and Falsy Values</h3>
                    <p>In Python, many values can be evaluated as True or False in boolean contexts.</p>
                    <div class="code-block"><code><span class="comment"># Falsy values: False, None, 0, 0.0, "", [], {}, ()</span>
<span class="comment"># Everything else is truthy</span>

items = []
<span class="keyword">if not</span> items:  <span class="comment"># Empty list is falsy</span>
    <span class="function">print</span>(<span class="string">"No items"</span>)

name = <span class="string">"Alice"</span>
<span class="keyword">if</span> name:  <span class="comment"># Non-empty string is truthy</span>
    <span class="function">print</span>(<span class="string">f"Hello, {name}"</span>)</code></div>
                </div>
            </div>

            <!-- Flowchart Visualizer Tab -->
            <div class="tab-content" id="flowchart">
                <div class="section">
                    <h2>Interactive Flowchart Visualizer</h2>
                    <p>Visualize how conditional statements flow through different execution paths. Select a code example and step through the execution.</p>

                    <div class="input-group">
                        <label>Select Example Code:</label>
                        <select id="flowchart-select">
                            <option value="age">Age Verification</option>
                            <option value="grade">Grade Calculator</option>
                            <option value="temperature">Temperature Check</option>
                            <option value="login">Login Validation</option>
                        </select>
                    </div>

                    <div class="flowchart-container">
                        <div class="flowchart-editor">
                            <h3>Code Example</h3>
                            <div class="code-block" id="flowchart-code">
                                <code></code>
                            </div>

                            <div class="input-group">
                                <label id="flowchart-input-label">Enter Age:</label>
                                <input type="number" id="flowchart-input" value="25">
                            </div>

                            <div class="control-buttons">
                                <button onclick="runFlowchart()">Execute Code</button>
                                <button class="secondary" onclick="resetFlowchart()">Reset</button>
                            </div>

                            <div class="execution-steps" id="execution-steps"></div>
                        </div>

                        <div class="flowchart-display" id="flowchart-display">
                            <!-- Flowchart nodes will be generated here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Loop Simulator Tab -->
            <div class="tab-content" id="simulator">
                <div class="section">
                    <h2>Loop Simulator</h2>
                    <p>Step through loop execution to see how variables change and understand loop behavior.</p>

                    <div class="loop-type-selector">
                        <button class="loop-type-btn active" onclick="selectLoopType('for')">For Loop</button>
                        <button class="loop-type-btn" onclick="selectLoopType('while')">While Loop</button>
                        <button class="loop-type-btn" onclick="selectLoopType('nested')">Nested Loop</button>
                        <button class="loop-type-btn" onclick="selectLoopType('break')">Break/Continue</button>
                    </div>

                    <div class="simulator-grid">
                        <div class="simulator-code" id="loop-code">
                            <!-- Loop code lines will be generated here -->
                        </div>

                        <div>
                            <div class="variables-panel">
                                <h3>Variables</h3>
                                <div id="loop-variables"></div>
                            </div>

                            <div class="output-console">
                                <h3>Output</h3>
                                <div id="loop-output"></div>
                            </div>
                        </div>
                    </div>

                    <div class="control-buttons">
                        <button onclick="startLoop()">Start</button>
                        <button class="secondary" onclick="stepLoop()">Step</button>
                        <button class="secondary" onclick="runLoop()">Run All</button>
                        <button class="secondary" onclick="resetLoop()">Reset</button>
                    </div>
                </div>
            </div>

            <!-- Condition Builder Tab -->
            <div class="tab-content" id="builder">
                <div class="section">
                    <h2>Condition Builder</h2>
                    <p>Build complex conditions by dragging and dropping operators and values. See how they evaluate in real-time.</p>

                    <div class="builder-container">
                        <div class="builder-palette">
                            <h3>Components</h3>
                            <p style="font-size: 0.9em; color: var(--text-secondary); margin-bottom: 15px;">Click to add to workspace</p>

                            <div style="margin-bottom: 20px;">
                                <strong style="color: var(--light-green); display: block; margin-bottom: 10px;">Variables</strong>
                                <div class="palette-item" onclick="addConditionBlock('age')">age</div>
                                <div class="palette-item" onclick="addConditionBlock('score')">score</div>
                                <div class="palette-item" onclick="addConditionBlock('temp')">temp</div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <strong style="color: var(--light-green); display: block; margin-bottom: 10px;">Comparison</strong>
                                <div class="palette-item" onclick="addConditionBlock('==')">&gt;=</div>
                                <div class="palette-item" onclick="addConditionBlock('>')">></div>
                                <div class="palette-item" onclick="addConditionBlock('<')"><</div>
                                <div class="palette-item" onclick="addConditionBlock('==')">==</div>
                            </div>

                            <div style="margin-bottom: 20px;">
                                <strong style="color: var(--light-green); display: block; margin-bottom: 10px;">Logical</strong>
                                <div class="palette-item" onclick="addConditionBlock('and')">and</div>
                                <div class="palette-item" onclick="addConditionBlock('or')">or</div>
                                <div class="palette-item" onclick="addConditionBlock('not')">not</div>
                            </div>

                            <div>
                                <strong style="color: var(--light-green); display: block; margin-bottom: 10px;">Values</strong>
                                <div class="palette-item" onclick="addConditionBlock('18')">18</div>
                                <div class="palette-item" onclick="addConditionBlock('100')">100</div>
                                <div class="palette-item" onclick="addConditionBlock('True')">True</div>
                            </div>
                        </div>

                        <div>
                            <div class="builder-workspace" id="builder-workspace">
                                <h3>Build Your Condition</h3>
                                <p style="color: var(--text-secondary); margin-bottom: 20px;">Click components from the palette to build a condition</p>
                                <div id="condition-blocks"></div>
                            </div>

                            <div style="margin-top: 20px;">
                                <div class="input-group">
                                    <label>Set Variable Values:</label>
                                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px;">
                                        <div>
                                            <label style="font-size: 0.9em;">age:</label>
                                            <input type="number" id="var-age" value="25" onchange="evaluateCondition()">
                                        </div>
                                        <div>
                                            <label style="font-size: 0.9em;">score:</label>
                                            <input type="number" id="var-score" value="85" onchange="evaluateCondition()">
                                        </div>
                                        <div>
                                            <label style="font-size: 0.9em;">temp:</label>
                                            <input type="number" id="var-temp" value="72" onchange="evaluateCondition()">
                                        </div>
                                    </div>
                                </div>

                                <div class="control-buttons">
                                    <button onclick="evaluateCondition()">Evaluate</button>
                                    <button class="secondary" onclick="clearCondition()">Clear</button>
                                </div>

                                <div class="result-display" id="condition-result">
                                    <h3>Result</h3>
                                    <p id="result-expression" style="font-family: 'Courier New', monospace; color: var(--light-green); font-size: 1.1em; margin: 10px 0;"></p>
                                    <p id="result-value" style="font-size: 1.5em; font-weight: bold;"></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reference Tab -->
            <div class="tab-content" id="reference">
                <div class="section">
                    <h2>Quick Reference Guide</h2>

                    <div class="reference-grid">
                        <div class="reference-card">
                            <h4>if Statement Syntax</h4>
                            <div class="code-block"><code><span class="keyword">if</span> condition:
    <span class="comment"># code block</span>
<span class="keyword">elif</span> condition:
    <span class="comment"># code block</span>
<span class="keyword">else</span>:
    <span class="comment"># code block</span></code></div>
                        </div>

                        <div class="reference-card">
                            <h4>while Loop Syntax</h4>
                            <div class="code-block"><code><span class="keyword">while</span> condition:
    <span class="comment"># code block</span>
    <span class="keyword">if</span> exit_condition:
        <span class="keyword">break</span>
    <span class="keyword">if</span> skip_condition:
        <span class="keyword">continue</span></code></div>
                        </div>

                        <div class="reference-card">
                            <h4>for Loop Syntax</h4>
                            <div class="code-block"><code><span class="keyword">for</span> var <span class="keyword">in</span> <span class="function">range</span>(start, stop, step):
    <span class="comment"># code block</span>

<span class="comment"># range(5) → 0,1,2,3,4</span>
<span class="comment"># range(2,7) → 2,3,4,5,6</span>
<span class="comment"># range(0,10,2) → 0,2,4,6,8</span></code></div>
                        </div>

                        <div class="reference-card">
                            <h4>Comparison Operators</h4>
                            <table class="operator-table">
                                <tr><td>==</td><td>Equal to</td></tr>
                                <tr><td>!=</td><td>Not equal to</td></tr>
                                <tr><td>&lt;</td><td>Less than</td></tr>
                                <tr><td>&gt;</td><td>Greater than</td></tr>
                                <tr><td>&lt;=</td><td>Less than or equal to</td></tr>
                                <tr><td>&gt;=</td><td>Greater than or equal to</td></tr>
                            </table>
                        </div>

                        <div class="reference-card">
                            <h4>Logical Operators</h4>
                            <table class="operator-table">
                                <tr><td>and</td><td>True if both are True</td></tr>
                                <tr><td>or</td><td>True if at least one is True</td></tr>
                                <tr><td>not</td><td>Reverses the boolean</td></tr>
                            </table>
                        </div>

                        <div class="reference-card">
                            <h4>Truthy and Falsy Values</h4>
                            <div style="margin-top: 10px;">
                                <strong style="color: var(--error);">Falsy Values:</strong>
                                <ul style="margin-left: 20px; margin-top: 5px;">
                                    <li>False, None</li>
                                    <li>0, 0.0</li>
                                    <li>"" (empty string)</li>
                                    <li>[], {}, () (empty collections)</li>
                                </ul>
                                <strong style="color: var(--success); display: block; margin-top: 10px;">Truthy Values:</strong>
                                <p style="margin-top: 5px;">Everything else!</p>
                            </div>
                        </div>

                        <div class="reference-card">
                            <h4>Loop Control</h4>
                            <table class="operator-table">
                                <tr><td>break</td><td>Exit the loop immediately</td></tr>
                                <tr><td>continue</td><td>Skip to next iteration</td></tr>
                                <tr><td>pass</td><td>Do nothing (placeholder)</td></tr>
                            </table>
                        </div>

                        <div class="reference-card">
                            <h4>Loop-Else Clause</h4>
                            <div class="code-block"><code><span class="keyword">for</span> item <span class="keyword">in</span> items:
    <span class="keyword">if</span> found:
        <span class="keyword">break</span>
<span class="keyword">else</span>:
    <span class="comment"># Runs if no break</span></code></div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2>Common Patterns</h2>

                    <h3>Input Validation Loop</h3>
                    <div class="code-block"><code><span class="keyword">while True</span>:
    user_input = <span class="function">input</span>(<span class="string">"Enter a positive number: "</span>)
    <span class="keyword">if</span> user_input.<span class="function">isdigit</span>() <span class="keyword">and</span> <span class="function">int</span>(user_input) > <span class="number">0</span>:
        number = <span class="function">int</span>(user_input)
        <span class="keyword">break</span>
    <span class="function">print</span>(<span class="string">"Invalid input. Try again."</span>)</code></div>

                    <h3>Counting Loop</h3>
                    <div class="code-block"><code>count = <span class="number">0</span>
<span class="keyword">for</span> item <span class="keyword">in</span> items:
    <span class="keyword">if</span> item > <span class="number">10</span>:
        count += <span class="number">1</span>
<span class="function">print</span>(<span class="string">f"Found {count} items greater than 10"</span>)</code></div>

                    <h3>Finding an Item</h3>
                    <div class="code-block"><code><span class="keyword">for</span> item <span class="keyword">in</span> items:
    <span class="keyword">if</span> item == target:
        <span class="function">print</span>(<span class="string">f"Found {target}!"</span>)
        <span class="keyword">break</span>
<span class="keyword">else</span>:
    <span class="function">print</span>(<span class="string">f"{target} not found"</span>)</code></div>
                </div>
            </div>

            <!-- Quiz Tab -->
            <div class="tab-content" id="quiz">
                <div class="section">
                    <h2>Test Your Knowledge</h2>
                    <p>Answer the following questions to test your understanding of Python flow control.</p>

                    <div class="quiz-score">
                        <div>Your Score</div>
                        <div class="score-number"><span id="quiz-score">0</span> / 10</div>
                    </div>

                    <div id="quiz-questions"></div>

                    <div class="control-buttons">
                        <button onclick="submitQuiz()">Submit Quiz</button>
                        <button class="secondary" onclick="resetQuiz()">Reset Quiz</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab Management
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabName = tab.dataset.tab;

                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

                tab.classList.add('active');
                document.getElementById(tabName).classList.add('active');
            });
        });

        // Flowchart Visualizer
        const flowchartExamples = {
            age: {
                code: `age = int(input("Enter age: "))
if age >= 18:
    print("You are an adult")
else:
    print("You are a minor")`,
                label: "Enter Age:",
                buildFlowchart: (value) => {
                    const result = value >= 18;
                    return `
                        <div>
                            <div class="flowchart-node active">Start: age = ${value}</div>
                            <div class="flowchart-arrow">↓</div>
                            <div class="flowchart-node decision active">age >= 18?</div>
                            <div class="flowchart-branches">
                                <div>
                                    <div class="branch-label">True</div>
                                    <div class="flowchart-arrow">↓</div>
                                    <div class="flowchart-node ${result ? 'active' : ''}">Print: "You are an adult"</div>
                                </div>
                                <div>
                                    <div class="branch-label">False</div>
                                    <div class="flowchart-arrow">↓</div>
                                    <div class="flowchart-node ${!result ? 'active' : ''}">Print: "You are a minor"</div>
                                </div>
                            </div>
                            <div class="flowchart-arrow">↓</div>
                            <div class="flowchart-node active">End</div>
                        </div>
                    `;
                }
            },
            grade: {
                code: `score = int(input("Enter score: "))
if score >= 90:
    grade = "A"
elif score >= 80:
    grade = "B"
elif score >= 70:
    grade = "C"
else:
    grade = "F"
print(f"Grade: {grade}")`,
                label: "Enter Score:",
                buildFlowchart: (value) => {
                    let grade = 'F', path = 3;
                    if (value >= 90) { grade = 'A'; path = 0; }
                    else if (value >= 80) { grade = 'B'; path = 1; }
                    else if (value >= 70) { grade = 'C'; path = 2; }

                    return `
                        <div>
                            <div class="flowchart-node active">Start: score = ${value}</div>
                            <div class="flowchart-arrow">↓</div>
                            <div class="flowchart-node decision active">score >= 90?</div>
                            <div class="flowchart-branches">
                                <div>
                                    <div class="branch-label">True</div>
                                    <div class="flowchart-node ${path === 0 ? 'active' : ''}">grade = "A"</div>
                                </div>
                                <div>
                                    <div class="branch-label">False</div>
                                    <div class="flowchart-node decision ${path > 0 ? 'active' : ''}">score >= 80?</div>
                                    <div class="flowchart-branches">
                                        <div>
                                            <div class="branch-label" style="font-size: 0.8em;">True</div>
                                            <div class="flowchart-node" style="font-size: 0.9em; padding: 10px;" ${path === 1 ? 'class="active"' : ''}>grade = "B"</div>
                                        </div>
                                        <div>
                                            <div class="branch-label" style="font-size: 0.8em;">False</div>
                                            <div class="flowchart-node" style="font-size: 0.9em; padding: 10px;" ${path >= 2 ? 'class="active"' : ''}>Continue...</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="flowchart-arrow">↓</div>
                            <div class="flowchart-node active">Print: "Grade: ${grade}"</div>
                        </div>
                    `;
                }
            },
            temperature: {
                code: `temp = int(input("Enter temperature: "))
if temp > 30:
    print("Hot")
elif temp > 20:
    print("Warm")
elif temp > 10:
    print("Cool")
else:
    print("Cold")`,
                label: "Enter Temperature:",
                buildFlowchart: (value) => {
                    let msg = 'Cold', path = 3;
                    if (value > 30) { msg = 'Hot'; path = 0; }
                    else if (value > 20) { msg = 'Warm'; path = 1; }
                    else if (value > 10) { msg = 'Cool'; path = 2; }

                    return `
                        <div>
                            <div class="flowchart-node active">Start: temp = ${value}</div>
                            <div class="flowchart-arrow">↓</div>
                            <div class="flowchart-node decision active">temp > 30?</div>
                            <div class="flowchart-branches">
                                <div>
                                    <div class="branch-label">True</div>
                                    <div class="flowchart-node ${path === 0 ? 'active' : ''}">Print: "Hot"</div>
                                </div>
                                <div>
                                    <div class="branch-label">False</div>
                                    <div class="flowchart-node decision ${path > 0 ? 'active' : ''}">temp > 20?</div>
                                    <div class="branch-label" style="margin-top: 10px;">${path === 1 ? 'True → "Warm"' : path > 1 ? 'False → Continue' : 'Not evaluated'}</div>
                                </div>
                            </div>
                            <div class="flowchart-arrow">↓</div>
                            <div class="flowchart-node active">Print: "${msg}"</div>
                        </div>
                    `;
                }
            },
            login: {
                code: `username = input("Username: ")
password = input("Password: ")
if username == "admin" and password == "secret":
    print("Access granted")
else:
    print("Access denied")`,
                label: "Enter 1 for correct login, 0 for wrong:",
                buildFlowchart: (value) => {
                    const result = value === 1;
                    return `
                        <div>
                            <div class="flowchart-node active">Start: Get credentials</div>
                            <div class="flowchart-arrow">↓</div>
                            <div class="flowchart-node decision active">username == "admin"<br>AND<br>password == "secret"?</div>
                            <div class="flowchart-branches">
                                <div>
                                    <div class="branch-label">True</div>
                                    <div class="flowchart-arrow">↓</div>
                                    <div class="flowchart-node ${result ? 'active' : ''}">Print: "Access granted"</div>
                                </div>
                                <div>
                                    <div class="branch-label">False</div>
                                    <div class="flowchart-arrow">↓</div>
                                    <div class="flowchart-node ${!result ? 'active' : ''}">Print: "Access denied"</div>
                                </div>
                            </div>
                            <div class="flowchart-arrow">↓</div>
                            <div class="flowchart-node active">End</div>
                        </div>
                    `;
                }
            }
        };

        let currentFlowchartExample = 'age';

        document.getElementById('flowchart-select').addEventListener('change', (e) => {
            currentFlowchartExample = e.target.value;
            loadFlowchartExample();
        });

        function loadFlowchartExample() {
            const example = flowchartExamples[currentFlowchartExample];
            const codeElement = document.querySelector('#flowchart-code code');
            codeElement.innerHTML = highlightCode(example.code);
            document.getElementById('flowchart-input-label').textContent = example.label;
            document.getElementById('flowchart-input').value = currentFlowchartExample === 'age' ? 25 :
                                                                 currentFlowchartExample === 'grade' ? 85 :
                                                                 currentFlowchartExample === 'temperature' ? 25 : 1;
            resetFlowchart();
        }

        function highlightCode(code) {
            return code
                .replace(/\b(if|elif|else|while|for|in|and|or|not|break|continue|pass|True|False|None)\b/g, '<span class="keyword">$1</span>')
                .replace(/\b(print|input|int|range)\b/g, '<span class="function">$1</span>')
                .replace(/"([^"]*)"/g, '<span class="string">"$1"</span>')
                .replace(/\b(\d+)\b/g, '<span class="number">$1</span>')
                .replace(/#.*/g, '<span class="comment">$&</span>')
                .replace(/([<>=!+\-*/%]+)/g, '<span class="operator">$1</span>');
        }

        function runFlowchart() {
            const value = parseInt(document.getElementById('flowchart-input').value);
            const example = flowchartExamples[currentFlowchartExample];
            const flowchartDisplay = document.getElementById('flowchart-display');

            flowchartDisplay.innerHTML = example.buildFlowchart(value);

            // Add execution steps
            const stepsDiv = document.getElementById('execution-steps');
            stepsDiv.innerHTML = '<h3>Execution Steps</h3>';

            if (currentFlowchartExample === 'age') {
                stepsDiv.innerHTML += `
                    <div class="step-item">Step 1: age = ${value}</div>
                    <div class="step-item">Step 2: Evaluate condition (age >= 18) = ${value >= 18}</div>
                    <div class="step-item">Step 3: Execute ${value >= 18 ? 'if' : 'else'} block</div>
                    <div class="step-item">Step 4: Print "${value >= 18 ? 'You are an adult' : 'You are a minor'}"</div>
                `;
            } else if (currentFlowchartExample === 'grade') {
                const grade = value >= 90 ? 'A' : value >= 80 ? 'B' : value >= 70 ? 'C' : 'F';
                stepsDiv.innerHTML += `
                    <div class="step-item">Step 1: score = ${value}</div>
                    <div class="step-item">Step 2: Check if score >= 90: ${value >= 90}</div>
                    ${value < 90 ? `<div class="step-item">Step 3: Check if score >= 80: ${value >= 80}</div>` : ''}
                    ${value < 80 ? `<div class="step-item">Step 4: Check if score >= 70: ${value >= 70}</div>` : ''}
                    <div class="step-item">Step 5: grade = "${grade}"</div>
                    <div class="step-item">Step 6: Print "Grade: ${grade}"</div>
                `;
            }
        }

        function resetFlowchart() {
            document.getElementById('flowchart-display').innerHTML = '<p style="color: var(--text-secondary);">Click "Execute Code" to visualize the flow</p>';
            document.getElementById('execution-steps').innerHTML = '';
        }

        // Loop Simulator
        const loopExamples = {
            for: {
                code: [
                    'for i in range(5):',
                    '    print(i)',
                    '    total += i'
                ],
                variables: { i: null, total: 0 },
                steps: []
            },
            while: {
                code: [
                    'count = 0',
                    'while count < 5:',
                    '    print(count)',
                    '    count += 1'
                ],
                variables: { count: 0 },
                steps: []
            },
            nested: {
                code: [
                    'for i in range(3):',
                    '    for j in range(2):',
                    '        print(f"i={i}, j={j}")'
                ],
                variables: { i: null, j: null },
                steps: []
            },
            break: {
                code: [
                    'for i in range(10):',
                    '    if i == 5:',
                    '        break',
                    '    print(i)'
                ],
                variables: { i: null },
                steps: []
            }
        };

        let currentLoopType = 'for';
        let loopState = {
            currentLine: 0,
            variables: {},
            output: [],
            running: false,
            stepMode: false
        };

        function selectLoopType(type) {
            currentLoopType = type;
            document.querySelectorAll('.loop-type-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            resetLoop();
            loadLoopCode();
        }

        function loadLoopCode() {
            const example = loopExamples[currentLoopType];
            const codeDiv = document.getElementById('loop-code');
            codeDiv.innerHTML = example.code.map((line, i) =>
                `<div class="code-line" data-line="${i}">${highlightCode(line)}</div>`
            ).join('');

            loopState.variables = { ...example.variables };
            updateVariablesDisplay();
        }

        function updateVariablesDisplay() {
            const varsDiv = document.getElementById('loop-variables');
            varsDiv.innerHTML = Object.entries(loopState.variables)
                .map(([name, value]) => `
                    <div class="variable-item">
                        <span class="variable-name">${name}</span>
                        <span class="variable-value">${value === null ? 'undefined' : value}</span>
                    </div>
                `).join('');
        }

        function updateOutputDisplay() {
            const outputDiv = document.getElementById('loop-output');
            outputDiv.innerHTML = loopState.output
                .map(line => `<div class="output-line">${line}</div>`)
                .join('');
        }

        function startLoop() {
            resetLoop();
            loopState.running = true;
            loopState.stepMode = false;
            runLoop();
        }

        function stepLoop() {
            if (!loopState.running) {
                loopState.running = true;
                loopState.stepMode = true;
            }
            executeLoopStep();
        }

        function runLoop() {
            if (currentLoopType === 'for') {
                for (let i = 0; i < 5; i++) {
                    highlightLine(1);
                    loopState.variables.i = i;
                    loopState.variables.total += i;
                    loopState.output.push(i.toString());
                    updateVariablesDisplay();
                    updateOutputDisplay();
                }
                setTimeout(() => {
                    document.querySelectorAll('.code-line').forEach(el => el.classList.remove('executing'));
                    document.querySelectorAll('.code-line').forEach(el => el.classList.add('completed'));
                }, 100);
            } else if (currentLoopType === 'while') {
                let count = 0;
                const interval = setInterval(() => {
                    if (count >= 5) {
                        clearInterval(interval);
                        document.querySelectorAll('.code-line').forEach(el => el.classList.remove('executing'));
                        document.querySelectorAll('.code-line').forEach(el => el.classList.add('completed'));
                        return;
                    }
                    highlightLine(2);
                    loopState.variables.count = count;
                    loopState.output.push(count.toString());
                    updateVariablesDisplay();
                    updateOutputDisplay();
                    count++;
                }, 500);
            } else if (currentLoopType === 'nested') {
                let step = 0;
                const interval = setInterval(() => {
                    if (step >= 6) {
                        clearInterval(interval);
                        document.querySelectorAll('.code-line').forEach(el => el.classList.remove('executing'));
                        return;
                    }
                    const i = Math.floor(step / 2);
                    const j = step % 2;
                    highlightLine(2);
                    loopState.variables.i = i;
                    loopState.variables.j = j;
                    loopState.output.push(`i=${i}, j=${j}`);
                    updateVariablesDisplay();
                    updateOutputDisplay();
                    step++;
                }, 600);
            } else if (currentLoopType === 'break') {
                let i = 0;
                const interval = setInterval(() => {
                    if (i === 5) {
                        highlightLine(2);
                        setTimeout(() => {
                            clearInterval(interval);
                            document.querySelectorAll('.code-line').forEach(el => el.classList.remove('executing'));
                        }, 300);
                        return;
                    }
                    highlightLine(3);
                    loopState.variables.i = i;
                    loopState.output.push(i.toString());
                    updateVariablesDisplay();
                    updateOutputDisplay();
                    i++;
                }, 500);
            }
        }

        function executeLoopStep() {
            // Simplified single-step execution
            if (loopState.stepMode) {
                if (currentLoopType === 'for' && loopState.variables.i === null) {
                    loopState.variables.i = 0;
                } else if (loopState.variables.i !== null && loopState.variables.i < 4) {
                    loopState.variables.i++;
                    loopState.variables.total += loopState.variables.i;
                    loopState.output.push(loopState.variables.i.toString());
                }
                highlightLine(1);
                updateVariablesDisplay();
                updateOutputDisplay();
            }
        }

        function resetLoop() {
            loopState = {
                currentLine: 0,
                variables: {},
                output: [],
                running: false,
                stepMode: false
            };
            document.querySelectorAll('.code-line').forEach(el => {
                el.classList.remove('executing', 'completed');
            });
            loadLoopCode();
            document.getElementById('loop-output').innerHTML = '';
        }

        function highlightLine(lineNum) {
            document.querySelectorAll('.code-line').forEach(el => el.classList.remove('executing'));
            const line = document.querySelector(`[data-line="${lineNum}"]`);
            if (line) line.classList.add('executing');
        }

        // Condition Builder
        let conditionBlocks = [];

        function addConditionBlock(value) {
            conditionBlocks.push(value);
            renderConditionBlocks();
            evaluateCondition();
        }

        function removeConditionBlock(index) {
            conditionBlocks.splice(index, 1);
            renderConditionBlocks();
            evaluateCondition();
        }

        function renderConditionBlocks() {
            const container = document.getElementById('condition-blocks');
            container.innerHTML = conditionBlocks.map((block, i) => `
                <div class="condition-block">
                    <span>${block}</span>
                    <button class="remove-btn" onclick="removeConditionBlock(${i})">×</button>
                </div>
            `).join(' ');
        }

        function evaluateCondition() {
            if (conditionBlocks.length === 0) {
                document.getElementById('result-expression').textContent = 'Build a condition...';
                document.getElementById('result-value').textContent = '';
                document.getElementById('condition-result').className = 'result-display';
                return;
            }

            const expression = conditionBlocks.join(' ');
            document.getElementById('result-expression').textContent = expression;

            try {
                // Get variable values
                const age = parseInt(document.getElementById('var-age').value);
                const score = parseInt(document.getElementById('var-score').value);
                const temp = parseInt(document.getElementById('var-temp').value);

                // Simple evaluation (this is a simplified version)
                let result = false;
                const expr = expression
                    .replace(/age/g, age.toString())
                    .replace(/score/g, score.toString())
                    .replace(/temp/g, temp.toString());

                // Very basic evaluation - in production, use a proper parser
                if (expr.includes('>=')) {
                    const [left, right] = expr.split('>=').map(s => s.trim());
                    result = parseFloat(left) >= parseFloat(right);
                } else if (expr.includes('>')) {
                    const [left, right] = expr.split('>').map(s => s.trim());
                    result = parseFloat(left) > parseFloat(right);
                } else if (expr.includes('<=')) {
                    const [left, right] = expr.split('<=').map(s => s.trim());
                    result = parseFloat(left) <= parseFloat(right);
                } else if (expr.includes('<')) {
                    const [left, right] = expr.split('<').map(s => s.trim());
                    result = parseFloat(left) < parseFloat(right);
                } else if (expr.includes('==')) {
                    const [left, right] = expr.split('==').map(s => s.trim());
                    result = left === right;
                }

                document.getElementById('result-value').textContent = result ? 'True' : 'False';
                document.getElementById('condition-result').className = `result-display ${result ? 'true' : 'false'}`;
            } catch (e) {
                document.getElementById('result-value').textContent = 'Invalid expression';
                document.getElementById('condition-result').className = 'result-display';
            }
        }

        function clearCondition() {
            conditionBlocks = [];
            renderConditionBlocks();
            evaluateCondition();
        }

        // Quiz Section
        const quizQuestions = [
            {
                question: "What will this code print?\n\nx = 10\nif x > 5:\n    print('A')\nelif x > 8:\n    print('B')\nelse:\n    print('C')",
                options: ["A", "B", "C", "Nothing"],
                correct: 0,
                explanation: "The first condition (x > 5) is True, so it prints 'A' and skips the rest."
            },
            {
                question: "How many times will this loop execute?\n\nfor i in range(3, 10, 2):\n    print(i)",
                options: ["3", "4", "5", "7"],
                correct: 1,
                explanation: "range(3, 10, 2) produces: 3, 5, 7, 9 (4 numbers)"
            },
            {
                question: "What's the difference between 'break' and 'continue'?",
                options: [
                    "break exits the loop, continue skips to next iteration",
                    "continue exits the loop, break skips to next iteration",
                    "They do the same thing",
                    "break is for while loops, continue is for for loops"
                ],
                correct: 0,
                explanation: "break terminates the loop entirely, while continue skips the remaining code in the current iteration."
            },
            {
                question: "Which value is NOT falsy in Python?",
                options: ["0", "[]", "''", "'False'"],
                correct: 3,
                explanation: "The string 'False' is truthy because it's a non-empty string. Only False (boolean) is falsy."
            },
            {
                question: "What will this print?\n\nfor i in range(5):\n    if i == 3:\n        break\nelse:\n    print('Complete')",
                options: ["Complete", "Nothing", "3", "Error"],
                correct: 1,
                explanation: "The else clause only runs if the loop completes without hitting break."
            },
            {
                question: "What does 'pass' do in Python?",
                options: [
                    "Exits the current function",
                    "Skips to the next iteration",
                    "Does nothing (placeholder)",
                    "Passes a value to the next line"
                ],
                correct: 2,
                explanation: "pass is a null operation used as a placeholder when a statement is syntactically required but you don't want to execute any code."
            },
            {
                question: "What's the output?\n\nx = 5\ny = 10\nif x > 3 and y < 8:\n    print('A')\nelif x > 3 or y < 8:\n    print('B')\nelse:\n    print('C')",
                options: ["A", "B", "C", "Error"],
                correct: 1,
                explanation: "The first condition is False (y < 8 is False), but the second condition is True (x > 3 is True)."
            },
            {
                question: "How many times will the inner loop execute?\n\nfor i in range(3):\n    for j in range(2):\n        print(i, j)",
                options: ["2", "3", "5", "6"],
                correct: 3,
                explanation: "The outer loop runs 3 times, and for each iteration, the inner loop runs 2 times: 3 × 2 = 6"
            },
            {
                question: "What will this code output?\n\ni = 0\nwhile i < 5:\n    i += 1\n    if i == 3:\n        continue\n    print(i)",
                options: ["1 2 3 4 5", "1 2 4 5", "0 1 2 4 5", "1 2 3 4"],
                correct: 1,
                explanation: "When i equals 3, continue skips the print statement, so 3 is not printed."
            },
            {
                question: "Which operator has the highest precedence?",
                options: ["or", "and", "not", "They all have the same precedence"],
                correct: 2,
                explanation: "The precedence order is: not (highest), and, or (lowest)"
            }
        ];

        let quizAnswers = new Array(quizQuestions.length).fill(null);

        function loadQuiz() {
            const container = document.getElementById('quiz-questions');
            container.innerHTML = quizQuestions.map((q, i) => `
                <div class="quiz-question" data-question="${i}">
                    <div class="question-text">Question ${i + 1}: ${q.question.replace(/\n/g, '<br>')}</div>
                    <div class="quiz-options">
                        ${q.options.map((opt, j) => `
                            <div class="quiz-option" data-question="${i}" data-option="${j}" onclick="selectQuizOption(${i}, ${j})">
                                ${opt}
                            </div>
                        `).join('')}
                    </div>
                    <div class="quiz-feedback" id="feedback-${i}"></div>
                </div>
            `).join('');
        }

        function selectQuizOption(questionIndex, optionIndex) {
            quizAnswers[questionIndex] = optionIndex;

            // Remove selected class from all options in this question
            document.querySelectorAll(`[data-question="${questionIndex}"].quiz-option`).forEach(opt => {
                opt.classList.remove('selected');
            });

            // Add selected class to chosen option
            event.target.classList.add('selected');
        }

        function submitQuiz() {
            let score = 0;

            quizQuestions.forEach((q, i) => {
                const feedback = document.getElementById(`feedback-${i}`);
                const options = document.querySelectorAll(`[data-question="${i}"].quiz-option`);

                options.forEach((opt, j) => {
                    opt.classList.remove('correct', 'incorrect');
                    if (j === q.correct) {
                        opt.classList.add('correct');
                    } else if (j === quizAnswers[i] && j !== q.correct) {
                        opt.classList.add('incorrect');
                    }
                });

                if (quizAnswers[i] === q.correct) {
                    score++;
                    feedback.className = 'quiz-feedback show correct';
                    feedback.textContent = '✓ Correct! ' + q.explanation;
                } else {
                    feedback.className = 'quiz-feedback show incorrect';
                    feedback.textContent = '✗ Incorrect. ' + q.explanation;
                }
            });

            document.getElementById('quiz-score').textContent = score;
        }

        function resetQuiz() {
            quizAnswers = new Array(quizQuestions.length).fill(null);
            document.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('selected', 'correct', 'incorrect');
            });
            document.querySelectorAll('.quiz-feedback').forEach(fb => {
                fb.className = 'quiz-feedback';
                fb.textContent = '';
            });
            document.getElementById('quiz-score').textContent = '0';
        }

        // Initialize
        loadFlowchartExample();
        loadLoopCode();
        loadQuiz();
    </script>
</body>
</html>