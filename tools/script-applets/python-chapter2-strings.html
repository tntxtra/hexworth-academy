<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Chapter 2: Strings - Interactive Learning Applet</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            color: #e0e0e0;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(135deg, #166534 0%, #15803d 100%);
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        header h1 {
            font-size: 2.5em;
            color: #fff;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        header p {
            font-size: 1.2em;
            color: #d1fae5;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab-button {
            background: #2d3748;
            color: #e0e0e0;
            border: 2px solid #4a5568;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 150px;
        }

        .tab-button:hover {
            background: #4a5568;
            transform: translateY(-2px);
        }

        .tab-button.active {
            background: linear-gradient(135deg, #166534 0%, #15803d 100%);
            border-color: #166534;
            color: #fff;
            box-shadow: 0 5px 15px rgba(22, 101, 52, 0.4);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: rgba(45, 55, 72, 0.95);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
            border: 1px solid #4a5568;
        }

        .card h2 {
            color: #10b981;
            margin-bottom: 15px;
            font-size: 1.8em;
            border-bottom: 2px solid #166534;
            padding-bottom: 10px;
        }

        .card h3 {
            color: #34d399;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .code-block {
            background: #1a202c;
            border-left: 4px solid #166534;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            margin: 15px 0;
            color: #e0e0e0;
        }

        .code-block code {
            color: #e0e0e0;
        }

        .keyword { color: #7c3aed; font-weight: bold; }
        .string { color: #34d399; }
        .comment { color: #9ca3af; font-style: italic; }
        .function { color: #60a5fa; }
        .number { color: #fbbf24; }

        .interactive-console {
            background: #1a202c;
            border: 2px solid #166534;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .console-input {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .console-input input {
            flex: 1;
            background: #2d3748;
            border: 1px solid #4a5568;
            color: #e0e0e0;
            padding: 12px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 1em;
        }

        .console-input button {
            background: linear-gradient(135deg, #166534 0%, #15803d 100%);
            color: #fff;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .console-input button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(22, 101, 52, 0.4);
        }

        .console-output {
            background: #0f172a;
            border: 1px solid #4a5568;
            border-radius: 6px;
            padding: 15px;
            min-height: 100px;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
        }

        .output-line {
            margin: 5px 0;
            padding: 5px;
            border-radius: 4px;
        }

        .output-line.input {
            color: #60a5fa;
        }

        .output-line.result {
            color: #34d399;
        }

        .output-line.error {
            color: #f87171;
            background: rgba(248, 113, 113, 0.1);
        }

        .slicing-visualizer {
            background: #1a202c;
            border: 2px solid #7c3aed;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .string-display {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            gap: 5px;
            flex-wrap: wrap;
        }

        .char-box {
            width: 50px;
            height: 60px;
            background: #2d3748;
            border: 2px solid #4a5568;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Courier New', monospace;
            font-size: 1.2em;
            position: relative;
            transition: all 0.3s ease;
        }

        .char-box.highlighted {
            background: #166534;
            border-color: #10b981;
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.4);
        }

        .char-box .index {
            position: absolute;
            top: -25px;
            font-size: 0.8em;
            color: #9ca3af;
        }

        .char-box .neg-index {
            position: absolute;
            bottom: -25px;
            font-size: 0.8em;
            color: #9ca3af;
        }

        .slice-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .slice-controls label {
            display: block;
            color: #10b981;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .slice-controls input,
        .slice-controls select {
            width: 100%;
            background: #2d3748;
            border: 1px solid #4a5568;
            color: #e0e0e0;
            padding: 10px;
            border-radius: 6px;
            font-size: 1em;
        }

        .method-playground {
            background: #1a202c;
            border: 2px solid #7c3aed;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .method-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        .method-btn {
            background: #2d3748;
            color: #e0e0e0;
            border: 2px solid #4a5568;
            padding: 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .method-btn:hover {
            background: #4a5568;
            transform: translateY(-2px);
        }

        .method-btn.active {
            background: #7c3aed;
            border-color: #7c3aed;
            color: #fff;
        }

        .method-demo {
            background: #0f172a;
            border: 1px solid #4a5568;
            border-radius: 6px;
            padding: 20px;
        }

        .quiz-container {
            background: #1a202c;
            border: 2px solid #166534;
            border-radius: 8px;
            padding: 25px;
            margin: 20px 0;
        }

        .question {
            margin-bottom: 25px;
            padding: 20px;
            background: #2d3748;
            border-radius: 8px;
            border-left: 4px solid #7c3aed;
        }

        .question h4 {
            color: #10b981;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            background: #1a202c;
            border: 2px solid #4a5568;
            padding: 12px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option:hover {
            background: #2d3748;
            border-color: #7c3aed;
        }

        .option.selected {
            border-color: #60a5fa;
            background: rgba(96, 165, 250, 0.1);
        }

        .option.correct {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.2);
        }

        .option.incorrect {
            border-color: #f87171;
            background: rgba(248, 113, 113, 0.2);
        }

        .submit-quiz {
            background: linear-gradient(135deg, #166534 0%, #15803d 100%);
            color: #fff;
            border: none;
            padding: 15px 40px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .submit-quiz:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(22, 101, 52, 0.4);
        }

        .quiz-result {
            background: #2d3748;
            border: 2px solid #10b981;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
            font-size: 1.2em;
        }

        .example-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .example-card {
            background: #1a202c;
            border: 1px solid #4a5568;
            border-radius: 8px;
            padding: 15px;
            transition: all 0.3s ease;
        }

        .example-card:hover {
            border-color: #7c3aed;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(124, 58, 237, 0.3);
        }

        .example-card h4 {
            color: #7c3aed;
            margin-bottom: 10px;
        }

        .btn-clear {
            background: #ef4444;
            color: #fff;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .btn-clear:hover {
            background: #dc2626;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }

            .tabs {
                flex-direction: column;
            }

            .tab-button {
                min-width: 100%;
            }

            .char-box {
                width: 40px;
                height: 50px;
                font-size: 1em;
            }

            .slice-controls {
                grid-template-columns: 1fr;
            }
        }

        .info-box {
            background: rgba(124, 58, 237, 0.1);
            border-left: 4px solid #7c3aed;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }

        .info-box strong {
            color: #7c3aed;
        }

        .result-display {
            background: #0f172a;
            border: 2px solid #10b981;
            border-radius: 6px;
            padding: 15px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            color: #34d399;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Python Chapter 2: Strings</h1>
            <p>Master String Manipulation with Interactive Examples</p>
        </header>

        <div class="tabs">
            <button class="tab-button active" onclick="switchTab('basics')">String Basics</button>
            <button class="tab-button" onclick="switchTab('explorer')">String Explorer</button>
            <button class="tab-button" onclick="switchTab('slicing')">Slicing Visualizer</button>
            <button class="tab-button" onclick="switchTab('methods')">Methods Playground</button>
            <button class="tab-button" onclick="switchTab('formatting')">String Formatting</button>
            <button class="tab-button" onclick="switchTab('quiz')">Quiz</button>
        </div>

        <!-- BASICS TAB -->
        <div id="basics" class="tab-content active">
            <div class="card">
                <h2>String Basics</h2>

                <h3>1. Creating Strings</h3>
                <p>Strings in Python can be created using single quotes, double quotes, or triple quotes:</p>
                <div class="code-block">
<code><span class="comment"># Single quotes</span>
<span class="keyword">name</span> = <span class="string">'Alice'</span>

<span class="comment"># Double quotes</span>
<span class="keyword">message</span> = <span class="string">"Hello, World!"</span>

<span class="comment"># Triple quotes for multi-line strings</span>
<span class="keyword">paragraph</span> = <span class="string">"""This is a
multi-line string that
spans several lines."""</span></code>
                </div>

                <h3>2. String Indexing</h3>
                <p>Each character in a string has a position (index). Python uses zero-based indexing:</p>
                <div class="example-grid">
                    <div class="example-card">
                        <h4>Positive Indexing</h4>
                        <div class="code-block">
<code><span class="keyword">text</span> = <span class="string">"Python"</span>
<span class="keyword">print</span>(text[<span class="number">0</span>])  <span class="comment"># 'P'</span>
<span class="keyword">print</span>(text[<span class="number">3</span>])  <span class="comment"># 'h'</span></code>
                        </div>
                    </div>
                    <div class="example-card">
                        <h4>Negative Indexing</h4>
                        <div class="code-block">
<code><span class="keyword">text</span> = <span class="string">"Python"</span>
<span class="keyword">print</span>(text[<span class="number">-1</span>])  <span class="comment"># 'n'</span>
<span class="keyword">print</span>(text[<span class="number">-3</span>])  <span class="comment"># 'h'</span></code>
                        </div>
                    </div>
                </div>

                <h3>3. String Immutability</h3>
                <div class="info-box">
                    <strong>Important:</strong> Strings in Python are immutable. This means once a string is created, you cannot change its characters. Any operation that seems to modify a string actually creates a new string.
                </div>
                <div class="code-block">
<code><span class="keyword">text</span> = <span class="string">"Hello"</span>
<span class="comment"># text[0] = 'h'  # This will cause an error!</span>

<span class="comment"># Instead, create a new string:</span>
<span class="keyword">new_text</span> = <span class="string">'h'</span> + text[<span class="number">1</span>:]  <span class="comment"># 'hello'</span></code>
                </div>

                <h3>4. Escape Characters</h3>
                <div class="example-grid">
                    <div class="example-card">
                        <h4>Common Escapes</h4>
                        <div class="code-block">
<code><span class="string">\n</span>  <span class="comment"># Newline</span>
<span class="string">\t</span>  <span class="comment"># Tab</span>
<span class="string">\\</span>  <span class="comment"># Backslash</span>
<span class="string">\'</span>  <span class="comment"># Single quote</span>
<span class="string">\"</span>  <span class="comment"># Double quote</span></code>
                        </div>
                    </div>
                    <div class="example-card">
                        <h4>Example Usage</h4>
                        <div class="code-block">
<code><span class="keyword">text</span> = <span class="string">"Line 1\nLine 2"</span>
<span class="keyword">path</span> = <span class="string">"C:\\Users\\Documents"</span>
<span class="keyword">quote</span> = <span class="string">"She said \"Hi!\""</span></code>
                        </div>
                    </div>
                </div>

                <h3>5. String Operations</h3>
                <div class="example-grid">
                    <div class="example-card">
                        <h4>Concatenation</h4>
                        <div class="code-block">
<code><span class="keyword">first</span> = <span class="string">"Hello"</span>
<span class="keyword">last</span> = <span class="string">"World"</span>
<span class="keyword">result</span> = first + <span class="string">" "</span> + last
<span class="comment"># "Hello World"</span></code>
                        </div>
                    </div>
                    <div class="example-card">
                        <h4>Repetition</h4>
                        <div class="code-block">
<code><span class="keyword">laugh</span> = <span class="string">"ha"</span> * <span class="number">3</span>
<span class="comment"># "hahaha"</span>

<span class="keyword">separator</span> = <span class="string">"-"</span> * <span class="number">20</span>
<span class="comment"># "--------------------"</span></code>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- EXPLORER TAB -->
        <div id="explorer" class="tab-content">
            <div class="card">
                <h2>String Explorer</h2>
                <p>Type Python string operations and see the results instantly. Try examples like:</p>
                <div class="code-block">
<code><span class="string">"Hello".upper()</span>
<span class="string">"WORLD".lower()</span>
<span class="string">"Python"[0:3]</span>
<span class="string">"ha" * 3</span>
<span class="string">"Hello" + " World"</span></code>
                </div>

                <div class="interactive-console">
                    <div class="console-input">
                        <input type="text" id="explorerInput" placeholder='Try: "Hello".upper()' />
                        <button onclick="executeExplorer()">Execute</button>
                        <button class="btn-clear" onclick="clearExplorer()">Clear</button>
                    </div>
                    <div class="console-output" id="explorerOutput">
                        <div class="output-line" style="color: #9ca3af;">Ready to execute Python string operations...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLICING TAB -->
        <div id="slicing" class="tab-content">
            <div class="card">
                <h2>String Slicing Visualizer</h2>
                <p>Visualize how string slicing works with positive and negative indices.</p>

                <div class="slicing-visualizer">
                    <div class="slice-controls">
                        <div>
                            <label for="sliceString">String to Slice:</label>
                            <input type="text" id="sliceString" value="Python" oninput="updateSliceVisualization()" />
                        </div>
                        <div>
                            <label for="sliceStart">Start Index:</label>
                            <input type="number" id="sliceStart" value="0" oninput="updateSliceVisualization()" />
                        </div>
                        <div>
                            <label for="sliceEnd">End Index:</label>
                            <input type="number" id="sliceEnd" value="6" oninput="updateSliceVisualization()" />
                        </div>
                        <div>
                            <label for="sliceStep">Step:</label>
                            <input type="number" id="sliceStep" value="1" oninput="updateSliceVisualization()" />
                        </div>
                    </div>

                    <div class="string-display" id="stringDisplay"></div>

                    <div class="result-display" id="sliceResult"></div>

                    <div class="info-box" style="margin-top: 20px;">
                        <strong>Slicing Syntax:</strong> string[start:end:step]<br>
                        - start: where to begin (inclusive)<br>
                        - end: where to stop (exclusive)<br>
                        - step: how many characters to skip
                    </div>

                    <h3 style="color: #10b981; margin-top: 20px;">Common Slicing Patterns:</h3>
                    <div class="example-grid">
                        <div class="example-card" onclick="applySlicePattern('Python', 0, 3, 1)">
                            <h4>First 3 characters</h4>
                            <div class="code-block">
<code><span class="string">"Python"</span>[<span class="number">0:3</span>]
<span class="comment"># "Pyt"</span></code>
                            </div>
                        </div>
                        <div class="example-card" onclick="applySlicePattern('Python', 2, null, 1)">
                            <h4>From index 2 to end</h4>
                            <div class="code-block">
<code><span class="string">"Python"</span>[<span class="number">2:</span>]
<span class="comment"># "thon"</span></code>
                            </div>
                        </div>
                        <div class="example-card" onclick="applySlicePattern('Python', null, null, -1)">
                            <h4>Reverse string</h4>
                            <div class="code-block">
<code><span class="string">"Python"</span>[::<span class="number">-1</span>]
<span class="comment"># "nohtyP"</span></code>
                            </div>
                        </div>
                        <div class="example-card" onclick="applySlicePattern('Python', null, null, 2)">
                            <h4>Every 2nd character</h4>
                            <div class="code-block">
<code><span class="string">"Python"</span>[::<span class="number">2</span>]
<span class="comment"># "Pto"</span></code>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- METHODS TAB -->
        <div id="methods" class="tab-content">
            <div class="card">
                <h2>String Methods Playground</h2>
                <p>Explore common string methods with interactive examples.</p>

                <div class="method-playground">
                    <div class="method-selector">
                        <button class="method-btn active" onclick="showMethod('upper')">upper()</button>
                        <button class="method-btn" onclick="showMethod('lower')">lower()</button>
                        <button class="method-btn" onclick="showMethod('strip')">strip()</button>
                        <button class="method-btn" onclick="showMethod('split')">split()</button>
                        <button class="method-btn" onclick="showMethod('join')">join()</button>
                        <button class="method-btn" onclick="showMethod('replace')">replace()</button>
                        <button class="method-btn" onclick="showMethod('find')">find()</button>
                        <button class="method-btn" onclick="showMethod('count')">count()</button>
                    </div>

                    <div class="method-demo" id="methodDemo"></div>
                </div>
            </div>
        </div>

        <!-- FORMATTING TAB -->
        <div id="formatting" class="tab-content">
            <div class="card">
                <h2>String Formatting</h2>

                <h3>1. F-Strings (Recommended - Python 3.6+)</h3>
                <p>The most modern and readable way to format strings:</p>
                <div class="code-block">
<code><span class="keyword">name</span> = <span class="string">"Alice"</span>
<span class="keyword">age</span> = <span class="number">25</span>
<span class="keyword">message</span> = <span class="string">f"My name is {name} and I am {age} years old."</span>

<span class="comment"># With expressions</span>
<span class="keyword">price</span> = <span class="number">19.99</span>
<span class="keyword">result</span> = <span class="string">f"Total: ${price * 2:.2f}"</span>  <span class="comment"># "Total: $39.98"</span></code>
                </div>

                <h3>2. .format() Method</h3>
                <p>The traditional formatting method:</p>
                <div class="code-block">
<code><span class="comment"># Positional arguments</span>
<span class="keyword">message</span> = <span class="string">"Hello, {}! You have {} messages."</span>.<span class="function">format</span>(<span class="string">"Bob"</span>, <span class="number">5</span>)

<span class="comment"># Named arguments</span>
<span class="keyword">result</span> = <span class="string">"Name: {name}, Score: {score}"</span>.<span class="function">format</span>(name=<span class="string">"Alice"</span>, score=<span class="number">95</span>)

<span class="comment"># With indices</span>
<span class="keyword">text</span> = <span class="string">"{0} loves {1} and {1} loves {0}"</span>.<span class="function">format</span>(<span class="string">"Alice"</span>, <span class="string">"Bob"</span>)</code>
                </div>

                <h3>3. % Operator (Old Style)</h3>
                <p>The legacy formatting method (still works but less preferred):</p>
                <div class="code-block">
<code><span class="keyword">name</span> = <span class="string">"Alice"</span>
<span class="keyword">age</span> = <span class="number">25</span>
<span class="keyword">message</span> = <span class="string">"My name is %s and I am %d years old."</span> % (name, age)

<span class="comment"># With formatting</span>
<span class="keyword">pi</span> = <span class="number">3.14159</span>
<span class="keyword">result</span> = <span class="string">"Pi is approximately %.2f"</span> % pi  <span class="comment"># "Pi is approximately 3.14"</span></code>
                </div>

                <h3>Interactive Formatting Demo</h3>
                <div class="interactive-console">
                    <div class="slice-controls">
                        <div>
                            <label for="formatName">Name:</label>
                            <input type="text" id="formatName" value="Alice" oninput="updateFormatting()" />
                        </div>
                        <div>
                            <label for="formatAge">Age:</label>
                            <input type="number" id="formatAge" value="25" oninput="updateFormatting()" />
                        </div>
                        <div>
                            <label for="formatCity">City:</label>
                            <input type="text" id="formatCity" value="New York" oninput="updateFormatting()" />
                        </div>
                    </div>
                    <div class="result-display" id="formattingResult"></div>
                </div>
            </div>
        </div>

        <!-- QUIZ TAB -->
        <div id="quiz" class="tab-content">
            <div class="card">
                <h2>String Mastery Quiz</h2>
                <p>Test your understanding of Python strings!</p>

                <div class="quiz-container" id="quizContainer"></div>

                <button class="submit-quiz" onclick="submitQuiz()">Submit Quiz</button>

                <div id="quizResultDisplay"></div>
            </div>
        </div>
    </div>

    <script>
        // Tab Switching
        function switchTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            const buttons = document.querySelectorAll('.tab-button');

            tabs.forEach(tab => tab.classList.remove('active'));
            buttons.forEach(btn => btn.classList.remove('active'));

            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // String Explorer
        function executeExplorer() {
            const input = document.getElementById('explorerInput').value.trim();
            const output = document.getElementById('explorerOutput');

            if (!input) return;

            const inputLine = document.createElement('div');
            inputLine.className = 'output-line input';
            inputLine.textContent = '>>> ' + input;
            output.appendChild(inputLine);

            try {
                const result = evalStringOperation(input);
                const resultLine = document.createElement('div');
                resultLine.className = 'output-line result';
                resultLine.textContent = JSON.stringify(result);
                output.appendChild(resultLine);
            } catch (error) {
                const errorLine = document.createElement('div');
                errorLine.className = 'output-line error';
                errorLine.textContent = 'Error: ' + error.message;
                output.appendChild(errorLine);
            }

            output.scrollTop = output.scrollHeight;
            document.getElementById('explorerInput').value = '';
        }

        function evalStringOperation(input) {
            // Python-to-JavaScript string operation translator
            // Supports common Python string operations

            try {
                let jsCode = input.trim();

                // Handle Python slice notation: "string"[start:end:step]
                const sliceRegex = /^(["'].*?["'])\[(-?\d*):(-?\d*):?(-?\d*)?\]$/;
                const sliceMatch = jsCode.match(sliceRegex);
                if (sliceMatch) {
                    const str = eval(sliceMatch[1]);
                    const start = sliceMatch[2] === '' ? undefined : parseInt(sliceMatch[2]);
                    const end = sliceMatch[3] === '' ? undefined : parseInt(sliceMatch[3]);
                    const step = sliceMatch[4] === '' || sliceMatch[4] === undefined ? 1 : parseInt(sliceMatch[4]);
                    return pythonSlice(str, start, end, step);
                }

                // Handle simple index access: "string"[index]
                const indexRegex = /^(["'].*?["'])\[(-?\d+)\]$/;
                const indexMatch = jsCode.match(indexRegex);
                if (indexMatch) {
                    const str = eval(indexMatch[1]);
                    let index = parseInt(indexMatch[2]);
                    if (index < 0) index = str.length + index;
                    if (index < 0 || index >= str.length) throw new Error('Index out of range');
                    return str[index];
                }

                // Handle string multiplication: "string" * n or n * "string"
                const multRegex1 = /^(["'].*?["'])\s*\*\s*(\d+)$/;
                const multRegex2 = /^(\d+)\s*\*\s*(["'].*?["'])$/;
                const multMatch1 = jsCode.match(multRegex1);
                const multMatch2 = jsCode.match(multRegex2);
                if (multMatch1) {
                    const str = eval(multMatch1[1]);
                    const n = parseInt(multMatch1[2]);
                    return str.repeat(n);
                }
                if (multMatch2) {
                    const n = parseInt(multMatch2[1]);
                    const str = eval(multMatch2[2]);
                    return str.repeat(n);
                }

                // Handle string concatenation: "string1" + "string2"
                const concatRegex = /^(["'].*?["'])\s*\+\s*(["'].*?["'])$/;
                const concatMatch = jsCode.match(concatRegex);
                if (concatMatch) {
                    return eval(concatMatch[1]) + eval(concatMatch[2]);
                }

                // Handle len("string")
                const lenRegex = /^len\((["'].*?["'])\)$/;
                const lenMatch = jsCode.match(lenRegex);
                if (lenMatch) {
                    return eval(lenMatch[1]).length;
                }

                // Translate Python string methods to JavaScript
                jsCode = jsCode
                    // Case methods
                    .replace(/\.upper\(\)/g, '.toUpperCase()')
                    .replace(/\.lower\(\)/g, '.toLowerCase()')
                    .replace(/\.capitalize\(\)/g, '.replace(/^./, m => m.toUpperCase())')
                    .replace(/\.title\(\)/g, '.replace(/\\b\\w/g, m => m.toUpperCase())')
                    .replace(/\.swapcase\(\)/g, '.split("").map(c => c === c.toUpperCase() ? c.toLowerCase() : c.toUpperCase()).join("")')

                    // Whitespace methods
                    .replace(/\.strip\(\)/g, '.trim()')
                    .replace(/\.strip\((["'].*?["'])\)/g, '.replace(new RegExp("^[" + $1 + "]+|[" + $1 + "]+$", "g"), "")')
                    .replace(/\.lstrip\(\)/g, '.trimStart()')
                    .replace(/\.rstrip\(\)/g, '.trimEnd()')

                    // Search/check methods
                    .replace(/\.find\((["'].*?["'])\)/g, '.indexOf($1)')
                    .replace(/\.rfind\((["'].*?["'])\)/g, '.lastIndexOf($1)')
                    .replace(/\.index\((["'].*?["'])\)/g, '.indexOf($1)')
                    .replace(/\.startswith\((["'].*?["'])\)/g, '.startsWith($1)')
                    .replace(/\.endswith\((["'].*?["'])\)/g, '.endsWith($1)')
                    .replace(/\.isdigit\(\)/g, '.match(/^\\d+$/) !== null')
                    .replace(/\.isalpha\(\)/g, '.match(/^[a-zA-Z]+$/) !== null')
                    .replace(/\.isalnum\(\)/g, '.match(/^[a-zA-Z0-9]+$/) !== null')
                    .replace(/\.isspace\(\)/g, '.match(/^\\s+$/) !== null')
                    .replace(/\.isupper\(\)/g, ' === $&.toUpperCase() && $&.match(/[a-zA-Z]/)')
                    .replace(/\.islower\(\)/g, ' === $&.toLowerCase() && $&.match(/[a-zA-Z]/)')

                    // Modification methods
                    .replace(/\.replace\((["'].*?["']),\s*(["'].*?["'])\)/g, '.split($1).join($2)')
                    .replace(/\.center\((\d+)\)/g, '.padStart(Math.ceil(($1 + $&.length) / 2)).padEnd($1)')
                    .replace(/\.ljust\((\d+)\)/g, '.padEnd($1)')
                    .replace(/\.rjust\((\d+)\)/g, '.padStart($1)')
                    .replace(/\.zfill\((\d+)\)/g, '.padStart($1, "0")')

                    // Split/join
                    .replace(/\.split\(\)/g, '.split(/\\s+/)')
                    .replace(/\.split\((["'].*?["'])\)/g, '.split($1)')
                    .replace(/\.join\(\[(.*?)\]\)/g, (match, items) => {
                        return '[' + items + '].join($&.replace(".join([" + items + "])", "").match(/^["\'](.*)["\']$/)[1])';
                    })

                    // Count
                    .replace(/\.count\((["'].*?["'])\)/g, '.split($1).length - 1');

                // Handle join specially: "-".join(["a", "b", "c"])
                const joinRegex = /^(["'].*?["'])\.join\(\[(.*?)\]\)$/;
                const joinMatch = jsCode.match(joinRegex);
                if (joinMatch) {
                    const separator = eval(joinMatch[1]);
                    const items = eval('[' + joinMatch[2] + ']');
                    return items.join(separator);
                }

                // Execute the translated JavaScript
                const safeEval = new Function('return ' + jsCode);
                return safeEval();
            } catch (e) {
                throw new Error('Invalid Python string operation. Try: "Hello".upper(), "Python"[0:3], "ha" * 3');
            }
        }

        // Python-style slice function
        function pythonSlice(str, start, end, step = 1) {
            const len = str.length;

            if (step === 0) throw new Error('slice step cannot be zero');

            // Handle negative step (reverse)
            if (step < 0) {
                // Default values for reverse
                if (start === undefined) start = len - 1;
                if (end === undefined) end = -len - 1;

                // Normalize negative indices
                if (start < 0) start = Math.max(-1, len + start);
                if (end < 0 && end !== -len - 1) end = len + end;

                let result = '';
                for (let i = start; i > end && i >= 0; i += step) {
                    if (i < len) result += str[i];
                }
                return result;
            }

            // Handle positive step
            if (start === undefined) start = 0;
            if (end === undefined) end = len;

            // Normalize negative indices
            if (start < 0) start = Math.max(0, len + start);
            if (end < 0) end = Math.max(0, len + end);

            // Clamp to bounds
            start = Math.max(0, Math.min(len, start));
            end = Math.max(0, Math.min(len, end));

            let result = '';
            for (let i = start; i < end; i += step) {
                result += str[i];
            }
            return result;
        }

        function clearExplorer() {
            document.getElementById('explorerOutput').innerHTML = '<div class="output-line" style="color: #9ca3af;">Console cleared. Ready for new operations...</div>';
        }

        // Handle Enter key in explorer
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('explorerInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    executeExplorer();
                }
            });
        });

        // Slicing Visualizer
        function updateSliceVisualization() {
            const text = document.getElementById('sliceString').value;
            const start = parseInt(document.getElementById('sliceStart').value) || 0;
            const end = parseInt(document.getElementById('sliceEnd').value) || text.length;
            const step = parseInt(document.getElementById('sliceStep').value) || 1;

            const display = document.getElementById('stringDisplay');
            display.innerHTML = '';

            // Create character boxes
            for (let i = 0; i < text.length; i++) {
                const box = document.createElement('div');
                box.className = 'char-box';
                box.textContent = text[i];

                // Add indices
                const posIndex = document.createElement('div');
                posIndex.className = 'index';
                posIndex.textContent = i;
                box.appendChild(posIndex);

                const negIndex = document.createElement('div');
                negIndex.className = 'neg-index';
                negIndex.textContent = i - text.length;
                box.appendChild(negIndex);

                // Highlight selected characters
                if (isInSlice(i, start, end, step, text.length)) {
                    box.classList.add('highlighted');
                }

                display.appendChild(box);
            }

            // Show result
            const result = sliceString(text, start, end, step);
            const resultDiv = document.getElementById('sliceResult');
            resultDiv.innerHTML = `
                <strong>Expression:</strong> "${text}"[${start}:${end}:${step}]<br>
                <strong>Result:</strong> "${result}"
            `;
        }

        function isInSlice(index, start, end, step, length) {
            // Normalize negative indices
            if (start < 0) start = Math.max(0, length + start);
            if (end < 0) end = Math.max(0, length + end);

            // Handle default values
            if (start === undefined || start === null) start = step > 0 ? 0 : length - 1;
            if (end === undefined || end === null) end = step > 0 ? length : -1;

            if (step > 0) {
                if (index >= start && index < end) {
                    return (index - start) % step === 0;
                }
            } else {
                if (index <= start && index > end) {
                    return (start - index) % Math.abs(step) === 0;
                }
            }
            return false;
        }

        function sliceString(str, start, end, step) {
            const length = str.length;

            // Normalize negative indices
            if (start < 0) start = Math.max(0, length + start);
            if (end < 0) end = Math.max(0, length + end);

            let result = '';

            if (step > 0) {
                for (let i = start; i < end && i < length; i += step) {
                    result += str[i];
                }
            } else {
                if (start >= length) start = length - 1;
                for (let i = start; i > end && i >= 0; i += step) {
                    result += str[i];
                }
            }

            return result;
        }

        function applySlicePattern(text, start, end, step) {
            document.getElementById('sliceString').value = text;
            document.getElementById('sliceStart').value = start !== null ? start : (step > 0 ? 0 : text.length - 1);
            document.getElementById('sliceEnd').value = end !== null ? end : (step > 0 ? text.length : -1);
            document.getElementById('sliceStep').value = step;
            updateSliceVisualization();
        }

        // Initialize slicing visualizer
        document.addEventListener('DOMContentLoaded', function() {
            updateSliceVisualization();
            updateFormatting();
            initializeQuiz();
        });

        // String Methods
        const methodExamples = {
            upper: {
                description: 'Converts all characters to uppercase.',
                examples: [
                    { code: '"hello".upper()', result: 'HELLO' },
                    { code: '"Python Programming".upper()', result: 'PYTHON PROGRAMMING' },
                    { code: '"abc123".upper()', result: 'ABC123' }
                ],
                interactive: true
            },
            lower: {
                description: 'Converts all characters to lowercase.',
                examples: [
                    { code: '"HELLO".lower()', result: 'hello' },
                    { code: '"Python Programming".lower()', result: 'python programming' },
                    { code: '"ABC123".lower()', result: 'abc123' }
                ],
                interactive: true
            },
            strip: {
                description: 'Removes leading and trailing whitespace (or specified characters).',
                examples: [
                    { code: '"  hello  ".strip()', result: 'hello' },
                    { code: '"***hello***".strip("*")', result: 'hello' },
                    { code: '"\\n\\tPython\\n".strip()', result: 'Python' }
                ],
                interactive: true
            },
            split: {
                description: 'Splits a string into a list based on a delimiter.',
                examples: [
                    { code: '"apple,banana,cherry".split(",")', result: "['apple', 'banana', 'cherry']" },
                    { code: '"Hello World Python".split()', result: "['Hello', 'World', 'Python']" },
                    { code: '"one-two-three".split("-")', result: "['one', 'two', 'three']" }
                ],
                interactive: true
            },
            join: {
                description: 'Joins a list of strings into a single string with a separator.',
                examples: [
                    { code: '"-".join(["apple", "banana", "cherry"])', result: 'apple-banana-cherry' },
                    { code: '" ".join(["Hello", "World"])', result: 'Hello World' },
                    { code: '"".join(["P", "y", "t", "h", "o", "n"])', result: 'Python' }
                ],
                interactive: true
            },
            replace: {
                description: 'Replaces all occurrences of a substring with another string.',
                examples: [
                    { code: '"Hello World".replace("World", "Python")', result: 'Hello Python' },
                    { code: '"banana".replace("a", "o")', result: 'bonono' },
                    { code: '"one two one".replace("one", "three")', result: 'three two three' }
                ],
                interactive: true
            },
            find: {
                description: 'Returns the index of the first occurrence of a substring (or -1 if not found).',
                examples: [
                    { code: '"Hello World".find("World")', result: '6' },
                    { code: '"Python".find("th")', result: '2' },
                    { code: '"Hello".find("xyz")', result: '-1' }
                ],
                interactive: true
            },
            count: {
                description: 'Counts the number of occurrences of a substring.',
                examples: [
                    { code: '"banana".count("a")', result: '3' },
                    { code: '"hello world".count("l")', result: '3' },
                    { code: '"Python Programming".count("P")', result: '2' }
                ],
                interactive: true
            }
        };

        function showMethod(methodName) {
            const buttons = document.querySelectorAll('.method-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            const demo = document.getElementById('methodDemo');
            const method = methodExamples[methodName];

            let html = `
                <h3 style="color: #7c3aed; margin-bottom: 15px;">${methodName}()</h3>
                <p style="margin-bottom: 20px; color: #d1d5db;">${method.description}</p>
                <h4 style="color: #10b981; margin-bottom: 10px;">Examples:</h4>
            `;

            method.examples.forEach((example, index) => {
                html += `
                    <div class="code-block" style="margin-bottom: 15px;">
                        <code><span class="comment"># Example ${index + 1}</span>
${example.code}
<span class="comment"># Result: ${example.result}</span></code>
                    </div>
                `;
            });

            if (method.interactive) {
                html += `
                    <div style="margin-top: 20px;">
                        <h4 style="color: #10b981; margin-bottom: 10px;">Try it yourself:</h4>
                        <div class="console-input">
                            <input type="text" id="methodInput" placeholder='Try: "your text".${methodName}()' />
                            <button onclick="executeMethod()">Execute</button>
                        </div>
                        <div class="result-display" id="methodResult" style="margin-top: 15px; min-height: 60px;"></div>
                    </div>
                `;
            }

            demo.innerHTML = html;
        }

        function executeMethod() {
            const input = document.getElementById('methodInput').value.trim();
            const result = document.getElementById('methodResult');

            if (!input) {
                result.innerHTML = '<span style="color: #f87171;">Please enter a string operation.</span>';
                return;
            }

            try {
                const output = evalStringOperation(input);
                result.innerHTML = `<strong>Result:</strong> ${JSON.stringify(output)}`;
            } catch (error) {
                result.innerHTML = `<span style="color: #f87171;">Error: ${error.message}</span>`;
            }
        }

        // Initialize with first method
        document.addEventListener('DOMContentLoaded', function() {
            showMethod('upper');
        });

        // String Formatting
        function updateFormatting() {
            const name = document.getElementById('formatName').value;
            const age = document.getElementById('formatAge').value;
            const city = document.getElementById('formatCity').value;

            const resultDiv = document.getElementById('formattingResult');

            resultDiv.innerHTML = `
                <strong>F-String:</strong><br>
                f"Hello, {name}! You are {age} years old and live in {city}."<br>
                <span style="color: #34d399;">→ "Hello, ${name}! You are ${age} years old and live in ${city}."</span><br><br>

                <strong>.format() Method:</strong><br>
                "Hello, {}! You are {} years old.".format("${name}", ${age})<br>
                <span style="color: #34d399;">→ "Hello, ${name}! You are ${age} years old."</span><br><br>

                <strong>% Operator:</strong><br>
                "Name: %s, Age: %d, City: %s" % ("${name}", ${age}, "${city}")<br>
                <span style="color: #34d399;">→ "Name: ${name}, Age: ${age}, City: ${city}"</span>
            `;
        }

        // Quiz System
        const quizQuestions = [
            {
                question: 'What is the result of "Python"[1:4]?',
                options: ['"Pyt"', '"yth"', '"ytho"', '"Pyth"'],
                correct: 1
            },
            {
                question: 'Which method converts a string to uppercase?',
                options: ['.toUpper()', '.uppercase()', '.upper()', '.UPPER()'],
                correct: 2
            },
            {
                question: 'What does "hello world".split() return?',
                options: ['"hello", "world"', '["hello", "world"]', '{"hello", "world"}', '("hello", "world")'],
                correct: 1
            },
            {
                question: 'What is the index of the last character in "Python"?',
                options: ['5', '6', '-1', 'Both 5 and -1 are correct'],
                correct: 3
            },
            {
                question: 'What does "banana".count("a") return?',
                options: ['2', '3', '4', '1'],
                correct: 1
            },
            {
                question: 'Can you change a character in a string after it is created?',
                options: ['Yes, using indexing', 'Yes, using .replace()', 'No, strings are immutable', 'Only if using triple quotes'],
                correct: 2
            },
            {
                question: 'What is the result of "hello" + "world"?',
                options: ['"hello world"', '"helloworld"', 'Error', '"hello+world"'],
                correct: 1
            },
            {
                question: 'What does "Python"[::-1] produce?',
                options: ['"Python"', '"nohtyP"', 'Error', '"Pytho"'],
                correct: 1
            },
            {
                question: 'Which escape character represents a newline?',
                options: ['\\t', '\\n', '\\r', '\\b'],
                correct: 1
            },
            {
                question: 'What is the best way to format strings in modern Python (3.6+)?',
                options: ['% operator', '.format() method', 'f-strings', 'String concatenation'],
                correct: 2
            }
        ];

        let userAnswers = {};

        function initializeQuiz() {
            const container = document.getElementById('quizContainer');
            let html = '';

            quizQuestions.forEach((q, qIndex) => {
                html += `
                    <div class="question" id="question-${qIndex}">
                        <h4>Question ${qIndex + 1}: ${q.question}</h4>
                        <div class="options">
                `;

                q.options.forEach((option, oIndex) => {
                    html += `
                        <div class="option" onclick="selectOption(${qIndex}, ${oIndex})">
                            <input type="radio" name="q${qIndex}" id="q${qIndex}-o${oIndex}" value="${oIndex}" style="margin-right: 10px;">
                            <label for="q${qIndex}-o${oIndex}" style="cursor: pointer;">${option}</label>
                        </div>
                    `;
                });

                html += `
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        function selectOption(questionIndex, optionIndex) {
            userAnswers[questionIndex] = optionIndex;

            // Update visual selection
            const question = document.getElementById(`question-${questionIndex}`);
            const options = question.querySelectorAll('.option');
            options.forEach((opt, idx) => {
                opt.classList.remove('selected');
                if (idx === optionIndex) {
                    opt.classList.add('selected');
                }
            });

            // Check the radio button
            document.getElementById(`q${questionIndex}-o${optionIndex}`).checked = true;
        }

        function submitQuiz() {
            let correct = 0;
            let total = quizQuestions.length;

            quizQuestions.forEach((q, qIndex) => {
                const question = document.getElementById(`question-${qIndex}`);
                const options = question.querySelectorAll('.option');

                options.forEach((opt, oIndex) => {
                    opt.classList.remove('correct', 'incorrect');

                    if (oIndex === q.correct) {
                        opt.classList.add('correct');
                    }

                    if (userAnswers[qIndex] === oIndex && oIndex !== q.correct) {
                        opt.classList.add('incorrect');
                    }
                });

                if (userAnswers[qIndex] === q.correct) {
                    correct++;
                }
            });

            const percentage = Math.round((correct / total) * 100);
            const resultDiv = document.getElementById('quizResultDisplay');

            let message = '';
            let color = '';

            if (percentage >= 90) {
                message = 'Excellent! You have mastered Python strings!';
                color = '#10b981';
            } else if (percentage >= 70) {
                message = 'Great job! You have a solid understanding of strings.';
                color = '#34d399';
            } else if (percentage >= 50) {
                message = 'Good effort! Review the materials and try again.';
                color = '#fbbf24';
            } else {
                message = 'Keep practicing! Review the examples and try again.';
                color = '#f87171';
            }

            resultDiv.innerHTML = `
                <div class="quiz-result" style="border-color: ${color};">
                    <h3 style="color: ${color}; margin-bottom: 10px;">Quiz Results</h3>
                    <p style="font-size: 2em; font-weight: bold; color: ${color};">${correct} / ${total}</p>
                    <p style="font-size: 1.2em; margin-top: 10px;">${percentage}%</p>
                    <p style="margin-top: 15px; color: #d1d5db;">${message}</p>
                </div>
            `;

            // Scroll to results
            resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
    </script>
</body>
</html>