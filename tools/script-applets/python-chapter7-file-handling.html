<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Chapter 7: File Handling - Interactive Learning</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px;
            background: linear-gradient(135deg, #166534 0%, #15803d 100%);
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(22, 101, 52, 0.3);
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            color: #fff;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            font-size: 1.2em;
            color: #d1fae5;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab-button {
            padding: 12px 24px;
            background: #1e293b;
            border: 2px solid #334155;
            border-radius: 8px;
            color: #e2e8f0;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 150px;
        }

        .tab-button:hover {
            background: #334155;
            border-color: #166534;
            transform: translateY(-2px);
        }

        .tab-button.active {
            background: #166534;
            border-color: #16a34a;
            color: #fff;
            box-shadow: 0 5px 20px rgba(22, 101, 52, 0.4);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card {
            background: #1e293b;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            border: 1px solid #334155;
        }

        .card h2 {
            color: #16a34a;
            margin-bottom: 15px;
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card h3 {
            color: #7c3aed;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .file-mode-card {
            background: #0f172a;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #166534;
            transition: all 0.3s ease;
        }

        .file-mode-card:hover {
            transform: translateX(5px);
            border-left-color: #7c3aed;
            box-shadow: 0 5px 15px rgba(124, 58, 237, 0.2);
        }

        .file-mode-card h4 {
            color: #16a34a;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .file-mode-card code {
            background: #334155;
            padding: 3px 8px;
            border-radius: 4px;
            color: #fbbf24;
            font-family: 'Courier New', monospace;
        }

        .virtual-fs {
            background: #0f172a;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .fs-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .fs-controls input,
        .fs-controls select,
        .fs-controls textarea {
            padding: 10px;
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 6px;
            color: #e2e8f0;
            font-size: 1em;
            flex: 1;
            min-width: 150px;
        }

        .fs-controls textarea {
            min-height: 80px;
            resize: vertical;
            font-family: 'Courier New', monospace;
        }

        button {
            padding: 10px 20px;
            background: #166534;
            border: none;
            border-radius: 6px;
            color: #fff;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        button:hover {
            background: #15803d;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(22, 101, 52, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        button.secondary {
            background: #7c3aed;
        }

        button.secondary:hover {
            background: #6d28d9;
        }

        .file-display {
            background: #000;
            border-radius: 8px;
            padding: 20px;
            margin-top: 15px;
            min-height: 150px;
            font-family: 'Courier New', monospace;
            color: #10b981;
            border: 2px solid #166534;
            overflow-x: auto;
        }

        .file-list {
            list-style: none;
            margin-top: 15px;
        }

        .file-item {
            background: #1e293b;
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
        }

        .file-item:hover {
            background: #334155;
            transform: translateX(5px);
        }

        .file-icon {
            font-size: 1.5em;
            margin-right: 10px;
        }

        .code-simulator {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .code-panel,
        .output-panel {
            background: #0f172a;
            border-radius: 10px;
            padding: 20px;
        }

        .code-panel h4,
        .output-panel h4 {
            color: #16a34a;
            margin-bottom: 15px;
        }

        .code-example {
            background: #000;
            border-radius: 6px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            line-height: 1.6;
            overflow-x: auto;
            border: 2px solid #334155;
        }

        .code-line {
            display: block;
            color: #e2e8f0;
        }

        .code-line.highlight {
            background: rgba(22, 101, 52, 0.3);
            border-left: 3px solid #16a34a;
            padding-left: 10px;
            animation: pulse 1s ease-in-out;
        }

        @keyframes pulse {
            0%, 100% { background: rgba(22, 101, 52, 0.3); }
            50% { background: rgba(22, 101, 52, 0.6); }
        }

        .keyword { color: #7c3aed; }
        .string { color: #fbbf24; }
        .function { color: #16a34a; }
        .comment { color: #64748b; font-style: italic; }

        .path-builder {
            background: #0f172a;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .path-segments {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .path-segment {
            background: #1e293b;
            padding: 8px 15px;
            border-radius: 6px;
            border: 2px solid #334155;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .path-segment:hover {
            border-color: #166534;
            background: #334155;
        }

        .path-segment.active {
            background: #166534;
            border-color: #16a34a;
        }

        .path-display {
            background: #000;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            color: #16a34a;
            font-size: 1.1em;
            margin-top: 10px;
            border: 2px solid #166534;
        }

        .quiz-container {
            margin-top: 20px;
        }

        .quiz-question {
            background: #0f172a;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #7c3aed;
        }

        .quiz-question h4 {
            color: #16a34a;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .quiz-options {
            list-style: none;
        }

        .quiz-option {
            background: #1e293b;
            padding: 12px 20px;
            margin-bottom: 10px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .quiz-option:hover {
            background: #334155;
            border-color: #166534;
        }

        .quiz-option.selected {
            background: #166534;
            border-color: #16a34a;
        }

        .quiz-option.correct {
            background: #166534;
            border-color: #16a34a;
        }

        .quiz-option.incorrect {
            background: #991b1b;
            border-color: #dc2626;
        }

        .quiz-feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 6px;
            display: none;
        }

        .quiz-feedback.show {
            display: block;
        }

        .quiz-feedback.correct {
            background: rgba(22, 101, 52, 0.2);
            border: 1px solid #16a34a;
            color: #10b981;
        }

        .quiz-feedback.incorrect {
            background: rgba(153, 27, 27, 0.2);
            border: 1px solid #dc2626;
            color: #f87171;
        }

        .quiz-score {
            background: #166534;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.5em;
            margin-top: 20px;
            display: none;
        }

        .quiz-score.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .info-box {
            background: rgba(124, 58, 237, 0.1);
            border-left: 4px solid #7c3aed;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }

        .info-box strong {
            color: #7c3aed;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #334155;
        }

        .comparison-table th {
            background: #0f172a;
            color: #16a34a;
            font-weight: 600;
        }

        .comparison-table tr:hover {
            background: #0f172a;
        }

        .code-block {
            background: #000;
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            border: 2px solid #334155;
        }

        .execute-btn {
            margin-top: 10px;
            background: #7c3aed;
        }

        .execute-btn:hover {
            background: #6d28d9;
        }

        .output-area {
            background: #000;
            border-radius: 6px;
            padding: 15px;
            margin-top: 10px;
            min-height: 100px;
            font-family: 'Courier New', monospace;
            color: #10b981;
            border: 2px solid #166534;
        }

        .step-indicator {
            display: inline-block;
            background: #7c3aed;
            color: #fff;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.9em;
            margin-right: 10px;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }

            .tabs {
                flex-direction: column;
            }

            .tab-button {
                width: 100%;
            }

            .code-simulator {
                grid-template-columns: 1fr;
            }

            .grid-2 {
                grid-template-columns: 1fr;
            }
        }

        .csv-demo {
            margin-top: 20px;
        }

        .csv-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: #0f172a;
            border-radius: 8px;
            overflow: hidden;
        }

        .csv-table th,
        .csv-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #334155;
        }

        .csv-table th {
            background: #166534;
            color: #fff;
        }

        .csv-table tr:hover {
            background: #1e293b;
        }

        .json-demo {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .json-input,
        .json-output {
            background: #0f172a;
            border-radius: 10px;
            padding: 20px;
        }

        .file-operation-log {
            background: #000;
            border-radius: 6px;
            padding: 15px;
            margin-top: 15px;
            max-height: 200px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            color: #10b981;
            border: 2px solid #166534;
        }

        .log-entry {
            margin-bottom: 5px;
            opacity: 0;
            animation: slideIn 0.3s ease forwards;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-10px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .success { color: #10b981; }
        .error { color: #f87171; }
        .warning { color: #fbbf24; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Python Chapter 7: File Handling</h1>
            <p>Master file operations, data persistence, and exception handling</p>
        </header>

        <div class="tabs">
            <button class="tab-button active" onclick="switchTab('basics')">File Basics</button>
            <button class="tab-button" onclick="switchTab('modes')">File Modes</button>
            <button class="tab-button" onclick="switchTab('simulator')">Code Simulator</button>
            <button class="tab-button" onclick="switchTab('virtual-fs')">Virtual File System</button>
            <button class="tab-button" onclick="switchTab('csv-json')">CSV & JSON</button>
            <button class="tab-button" onclick="switchTab('exceptions')">Exception Handling</button>
            <button class="tab-button" onclick="switchTab('quiz')">Quiz</button>
        </div>

        <!-- File Basics Tab -->
        <div id="basics" class="tab-content active">
            <div class="card">
                <h2>File Handling Basics</h2>

                <h3>Opening Files - The open() Function</h3>
                <p>The <code>open()</code> function is used to open files in Python. It returns a file object.</p>

                <div class="code-block">
<span class="comment"># Basic syntax</span>
<span class="keyword">file</span> = <span class="function">open</span>(<span class="string">'filename.txt'</span>, <span class="string">'mode'</span>)
                </div>

                <div class="info-box">
                    <strong>Important:</strong> Always close files after use with <code>file.close()</code> or use the <code>with</code> statement for automatic closing.
                </div>

                <h3>Reading Methods</h3>
                <div class="grid-2">
                    <div class="file-mode-card">
                        <h4>read()</h4>
                        <p>Reads entire file content as a single string.</p>
                        <div class="code-block">
<span class="keyword">with</span> <span class="function">open</span>(<span class="string">'file.txt'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> f:
    content = f.<span class="function">read</span>()
    <span class="function">print</span>(content)
                        </div>
                    </div>

                    <div class="file-mode-card">
                        <h4>readline()</h4>
                        <p>Reads a single line from the file.</p>
                        <div class="code-block">
<span class="keyword">with</span> <span class="function">open</span>(<span class="string">'file.txt'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> f:
    line = f.<span class="function">readline</span>()
    <span class="function">print</span>(line)
                        </div>
                    </div>

                    <div class="file-mode-card">
                        <h4>readlines()</h4>
                        <p>Reads all lines and returns them as a list.</p>
                        <div class="code-block">
<span class="keyword">with</span> <span class="function">open</span>(<span class="string">'file.txt'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> f:
    lines = f.<span class="function">readlines</span>()
    <span class="keyword">for</span> line <span class="keyword">in</span> lines:
        <span class="function">print</span>(line)
                        </div>
                    </div>

                    <div class="file-mode-card">
                        <h4>Iterating Lines</h4>
                        <p>Loop through file line by line (memory efficient).</p>
                        <div class="code-block">
<span class="keyword">with</span> <span class="function">open</span>(<span class="string">'file.txt'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> f:
    <span class="keyword">for</span> line <span class="keyword">in</span> f:
        <span class="function">print</span>(line.<span class="function">strip</span>())
                        </div>
                    </div>
                </div>

                <h3>Writing Methods</h3>
                <div class="grid-2">
                    <div class="file-mode-card">
                        <h4>write()</h4>
                        <p>Writes a string to the file.</p>
                        <div class="code-block">
<span class="keyword">with</span> <span class="function">open</span>(<span class="string">'file.txt'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> f:
    f.<span class="function">write</span>(<span class="string">'Hello World\n'</span>)
                        </div>
                    </div>

                    <div class="file-mode-card">
                        <h4>writelines()</h4>
                        <p>Writes a list of strings to the file.</p>
                        <div class="code-block">
lines = [<span class="string">'Line 1\n'</span>, <span class="string">'Line 2\n'</span>]
<span class="keyword">with</span> <span class="function">open</span>(<span class="string">'file.txt'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> f:
    f.<span class="function">writelines</span>(lines)
                        </div>
                    </div>
                </div>

                <h3>The with Statement</h3>
                <div class="info-box">
                    <strong>Best Practice:</strong> The <code>with</code> statement automatically closes the file, even if an exception occurs. It's the recommended way to work with files.
                </div>

                <div class="code-block">
<span class="comment"># Without 'with' - must manually close</span>
file = <span class="function">open</span>(<span class="string">'file.txt'</span>, <span class="string">'r'</span>)
content = file.<span class="function">read</span>()
file.<span class="function">close</span>()  <span class="comment"># Must remember to close!</span>

<span class="comment"># With 'with' - automatically closes</span>
<span class="keyword">with</span> <span class="function">open</span>(<span class="string">'file.txt'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> file:
    content = file.<span class="function">read</span>()
    <span class="comment"># File automatically closed here</span>
                </div>
            </div>
        </div>

        <!-- File Modes Tab -->
        <div id="modes" class="tab-content">
            <div class="card">
                <h2>File Modes Comparison</h2>

                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Mode</th>
                            <th>Description</th>
                            <th>Creates File</th>
                            <th>Position</th>
                            <th>Truncates</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>'r'</code></td>
                            <td>Read only (default)</td>
                            <td>No (error if missing)</td>
                            <td>Beginning</td>
                            <td>No</td>
                        </tr>
                        <tr>
                            <td><code>'w'</code></td>
                            <td>Write only</td>
                            <td>Yes</td>
                            <td>Beginning</td>
                            <td>Yes</td>
                        </tr>
                        <tr>
                            <td><code>'a'</code></td>
                            <td>Append only</td>
                            <td>Yes</td>
                            <td>End</td>
                            <td>No</td>
                        </tr>
                        <tr>
                            <td><code>'r+'</code></td>
                            <td>Read and Write</td>
                            <td>No (error if missing)</td>
                            <td>Beginning</td>
                            <td>No</td>
                        </tr>
                        <tr>
                            <td><code>'w+'</code></td>
                            <td>Read and Write</td>
                            <td>Yes</td>
                            <td>Beginning</td>
                            <td>Yes</td>
                        </tr>
                        <tr>
                            <td><code>'a+'</code></td>
                            <td>Read and Append</td>
                            <td>Yes</td>
                            <td>End</td>
                            <td>No</td>
                        </tr>
                        <tr>
                            <td><code>'b'</code></td>
                            <td>Binary mode (add to any mode)</td>
                            <td>Depends on base mode</td>
                            <td>Depends on base mode</td>
                            <td>Depends on base mode</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Interactive Mode Demonstrator</h3>
                <div class="virtual-fs">
                    <div class="fs-controls">
                        <select id="modeSelect">
                            <option value="r">r - Read</option>
                            <option value="w">w - Write</option>
                            <option value="a">a - Append</option>
                            <option value="r+">r+ - Read/Write</option>
                            <option value="w+">w+ - Write/Read</option>
                            <option value="a+">a+ - Append/Read</option>
                        </select>
                        <button onclick="demonstrateMode()">Demonstrate Mode</button>
                    </div>
                    <div id="modeOutput" class="file-display"></div>
                </div>

                <h3>Detailed Mode Explanations</h3>
                <div class="grid-2">
                    <div class="file-mode-card">
                        <h4>'r' - Read Mode</h4>
                        <p>Opens file for reading. File must exist.</p>
                        <div class="code-block">
<span class="keyword">with</span> <span class="function">open</span>(<span class="string">'data.txt'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> f:
    content = f.<span class="function">read</span>()
    <span class="comment"># FileNotFoundError if file doesn't exist</span>
                        </div>
                    </div>

                    <div class="file-mode-card">
                        <h4>'w' - Write Mode</h4>
                        <p>Creates new file or overwrites existing file.</p>
                        <div class="code-block">
<span class="keyword">with</span> <span class="function">open</span>(<span class="string">'data.txt'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> f:
    f.<span class="function">write</span>(<span class="string">'New content'</span>)
    <span class="comment"># WARNING: Erases all existing content!</span>
                        </div>
                    </div>

                    <div class="file-mode-card">
                        <h4>'a' - Append Mode</h4>
                        <p>Adds content to end of file. Creates if doesn't exist.</p>
                        <div class="code-block">
<span class="keyword">with</span> <span class="function">open</span>(<span class="string">'log.txt'</span>, <span class="string">'a'</span>) <span class="keyword">as</span> f:
    f.<span class="function">write</span>(<span class="string">'New log entry\n'</span>)
    <span class="comment"># Preserves existing content</span>
                        </div>
                    </div>

                    <div class="file-mode-card">
                        <h4>'rb' - Binary Read</h4>
                        <p>Reads binary files (images, videos, etc.).</p>
                        <div class="code-block">
<span class="keyword">with</span> <span class="function">open</span>(<span class="string">'image.png'</span>, <span class="string">'rb'</span>) <span class="keyword">as</span> f:
    binary_data = f.<span class="function">read</span>()
    <span class="comment"># Returns bytes object</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Code Simulator Tab -->
        <div id="simulator" class="tab-content">
            <div class="card">
                <h2>Interactive Code Simulator</h2>
                <p>Watch how file operations execute step by step</p>

                <div class="fs-controls">
                    <select id="simulatorExample">
                        <option value="read">Reading a File</option>
                        <option value="write">Writing to a File</option>
                        <option value="append">Appending to a File</option>
                        <option value="readlines">Reading Lines</option>
                        <option value="with">Using with Statement</option>
                    </select>
                    <button onclick="runSimulation()">Run Simulation</button>
                    <button onclick="resetSimulation()" class="secondary">Reset</button>
                </div>

                <div class="code-simulator">
                    <div class="code-panel">
                        <h4>Python Code</h4>
                        <div id="simulatorCode" class="code-example"></div>
                    </div>
                    <div class="output-panel">
                        <h4>File Contents & Output</h4>
                        <div id="simulatorOutput" class="output-area"></div>
                        <div class="file-operation-log" id="simulatorLog"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Virtual File System Tab -->
        <div id="virtual-fs" class="tab-content">
            <div class="card">
                <h2>Virtual File System</h2>
                <p>Practice file operations in your browser</p>

                <div class="virtual-fs">
                    <h3>Create/Write File</h3>
                    <div class="fs-controls">
                        <input type="text" id="fileName" placeholder="Enter filename (e.g., myfile.txt)">
                        <select id="fileMode">
                            <option value="w">Write (w)</option>
                            <option value="a">Append (a)</option>
                        </select>
                    </div>
                    <div class="fs-controls">
                        <textarea id="fileContent" placeholder="Enter file content..."></textarea>
                    </div>
                    <button onclick="writeFile()">Write to File</button>

                    <h3>Read File</h3>
                    <div class="fs-controls">
                        <select id="readFileName"></select>
                        <button onclick="readFile()">Read File</button>
                        <button onclick="deleteFile()" class="secondary">Delete File</button>
                    </div>

                    <div class="file-display" id="fileContentDisplay"></div>

                    <h3>Your Files</h3>
                    <ul class="file-list" id="fileList"></ul>

                    <h3>Operation Log</h3>
                    <div class="file-operation-log" id="operationLog"></div>
                </div>
            </div>

            <div class="card">
                <h2>File Paths & OS Module</h2>

                <h3>Path Types</h3>
                <div class="grid-2">
                    <div class="file-mode-card">
                        <h4>Absolute Path</h4>
                        <p>Complete path from root directory</p>
                        <div class="code-block">
<span class="comment"># Windows</span>
<span class="string">'C:\\Users\\John\\Documents\\file.txt'</span>

<span class="comment"># Linux/Mac</span>
<span class="string">'/home/john/documents/file.txt'</span>
                        </div>
                    </div>

                    <div class="file-mode-card">
                        <h4>Relative Path</h4>
                        <p>Path relative to current directory</p>
                        <div class="code-block">
<span class="comment"># Same directory</span>
<span class="string">'file.txt'</span>

<span class="comment"># Subdirectory</span>
<span class="string">'data/file.txt'</span>

<span class="comment"># Parent directory</span>
<span class="string">'../file.txt'</span>
                        </div>
                    </div>
                </div>

                <h3>Interactive Path Builder</h3>
                <div class="path-builder">
                    <div class="path-segments">
                        <div class="path-segment" onclick="addPathSegment('/')">/</div>
                        <div class="path-segment" onclick="addPathSegment('home')">home</div>
                        <div class="path-segment" onclick="addPathSegment('user')">user</div>
                        <div class="path-segment" onclick="addPathSegment('documents')">documents</div>
                        <div class="path-segment" onclick="addPathSegment('data')">data</div>
                        <div class="path-segment" onclick="addPathSegment('file.txt')">file.txt</div>
                    </div>
                    <button onclick="clearPath()" class="secondary">Clear Path</button>
                    <div class="path-display" id="pathDisplay">/</div>
                </div>

                <h3>Common OS Module Operations</h3>
                <div class="code-block">
<span class="keyword">import</span> os

<span class="comment"># Get current working directory</span>
current_dir = os.<span class="function">getcwd</span>()

<span class="comment"># Check if file exists</span>
<span class="keyword">if</span> os.path.<span class="function">exists</span>(<span class="string">'file.txt'</span>):
    <span class="function">print</span>(<span class="string">'File exists'</span>)

<span class="comment"># Join path components</span>
path = os.path.<span class="function">join</span>(<span class="string">'folder'</span>, <span class="string">'subfolder'</span>, <span class="string">'file.txt'</span>)

<span class="comment"># Get file size</span>
size = os.path.<span class="function">getsize</span>(<span class="string">'file.txt'</span>)

<span class="comment"># List directory contents</span>
files = os.<span class="function">listdir</span>(<span class="string">'.'</span>)
                </div>
            </div>
        </div>

        <!-- CSV & JSON Tab -->
        <div id="csv-json" class="tab-content">
            <div class="card">
                <h2>Working with CSV Files</h2>

                <h3>CSV Module Basics</h3>
                <div class="code-block">
<span class="keyword">import</span> csv

<span class="comment"># Writing CSV</span>
<span class="keyword">with</span> <span class="function">open</span>(<span class="string">'data.csv'</span>, <span class="string">'w'</span>, newline=<span class="string">''</span>) <span class="keyword">as</span> file:
    writer = csv.<span class="function">writer</span>(file)
    writer.<span class="function">writerow</span>([<span class="string">'Name'</span>, <span class="string">'Age'</span>, <span class="string">'City'</span>])
    writer.<span class="function">writerow</span>([<span class="string">'Alice'</span>, <span class="string">'25'</span>, <span class="string">'New York'</span>])

<span class="comment"># Reading CSV</span>
<span class="keyword">with</span> <span class="function">open</span>(<span class="string">'data.csv'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> file:
    reader = csv.<span class="function">reader</span>(file)
    <span class="keyword">for</span> row <span class="keyword">in</span> reader:
        <span class="function">print</span>(row)
                </div>

                <h3>Interactive CSV Demo</h3>
                <div class="csv-demo">
                    <button onclick="generateCSV()">Generate Sample CSV</button>
                    <button onclick="parseCSV()" class="secondary">Parse CSV</button>

                    <table class="csv-table" id="csvTable">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Age</th>
                                <th>City</th>
                                <th>Occupation</th>
                            </tr>
                        </thead>
                        <tbody id="csvTableBody"></tbody>
                    </table>
                </div>

                <h3>CSV DictWriter & DictReader</h3>
                <div class="code-block">
<span class="keyword">import</span> csv

<span class="comment"># Writing with DictWriter</span>
data = [
    {<span class="string">'name'</span>: <span class="string">'Alice'</span>, <span class="string">'age'</span>: 25, <span class="string">'city'</span>: <span class="string">'NYC'</span>},
    {<span class="string">'name'</span>: <span class="string">'Bob'</span>, <span class="string">'age'</span>: 30, <span class="string">'city'</span>: <span class="string">'LA'</span>}
]

<span class="keyword">with</span> <span class="function">open</span>(<span class="string">'data.csv'</span>, <span class="string">'w'</span>, newline=<span class="string">''</span>) <span class="keyword">as</span> file:
    fieldnames = [<span class="string">'name'</span>, <span class="string">'age'</span>, <span class="string">'city'</span>]
    writer = csv.<span class="function">DictWriter</span>(file, fieldnames=fieldnames)
    writer.<span class="function">writeheader</span>()
    writer.<span class="function">writerows</span>(data)

<span class="comment"># Reading with DictReader</span>
<span class="keyword">with</span> <span class="function">open</span>(<span class="string">'data.csv'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> file:
    reader = csv.<span class="function">DictReader</span>(file)
    <span class="keyword">for</span> row <span class="keyword">in</span> reader:
        <span class="function">print</span>(row[<span class="string">'name'</span>], row[<span class="string">'age'</span>])
                </div>
            </div>

            <div class="card">
                <h2>Working with JSON Files</h2>

                <h3>JSON Module Basics</h3>
                <div class="code-block">
<span class="keyword">import</span> json

<span class="comment"># Writing JSON</span>
data = {
    <span class="string">'name'</span>: <span class="string">'Alice'</span>,
    <span class="string">'age'</span>: 25,
    <span class="string">'skills'</span>: [<span class="string">'Python'</span>, <span class="string">'JavaScript'</span>]
}

<span class="keyword">with</span> <span class="function">open</span>(<span class="string">'data.json'</span>, <span class="string">'w'</span>) <span class="keyword">as</span> file:
    json.<span class="function">dump</span>(data, file, indent=4)

<span class="comment"># Reading JSON</span>
<span class="keyword">with</span> <span class="function">open</span>(<span class="string">'data.json'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> file:
    data = json.<span class="function">load</span>(file)
    <span class="function">print</span>(data[<span class="string">'name'</span>])
                </div>

                <h3>Interactive JSON Demo</h3>
                <div class="json-demo">
                    <div class="json-input">
                        <h4>Python Dictionary</h4>
                        <textarea id="pythonDict" rows="10" style="width: 100%; background: #000; color: #10b981; padding: 15px; border-radius: 6px; font-family: 'Courier New', monospace; border: 2px solid #166534;">
{
    "name": "Alice",
    "age": 25,
    "city": "New York",
    "skills": ["Python", "JavaScript", "SQL"]
}</textarea>
                        <button onclick="convertToJSON()" style="margin-top: 10px; width: 100%;">Convert to JSON File</button>
                    </div>
                    <div class="json-output">
                        <h4>JSON Output</h4>
                        <div id="jsonOutput" class="output-area" style="min-height: 200px;"></div>
                        <button onclick="parseJSON()" class="secondary" style="margin-top: 10px; width: 100%;">Parse JSON</button>
                    </div>
                </div>

                <h3>JSON vs CSV Comparison</h3>
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Feature</th>
                            <th>CSV</th>
                            <th>JSON</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Structure</td>
                            <td>Tabular (rows & columns)</td>
                            <td>Hierarchical (nested objects)</td>
                        </tr>
                        <tr>
                            <td>Data Types</td>
                            <td>All strings (must convert)</td>
                            <td>Multiple types (string, number, boolean, null)</td>
                        </tr>
                        <tr>
                            <td>Best For</td>
                            <td>Simple tabular data, spreadsheets</td>
                            <td>Complex nested data, APIs</td>
                        </tr>
                        <tr>
                            <td>Human Readable</td>
                            <td>Very readable</td>
                            <td>Readable with formatting</td>
                        </tr>
                        <tr>
                            <td>File Size</td>
                            <td>Smaller for simple data</td>
                            <td>Larger due to formatting</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Exception Handling Tab -->
        <div id="exceptions" class="tab-content">
            <div class="card">
                <h2>Exception Handling in File Operations</h2>

                <h3>Common File Exceptions</h3>
                <div class="grid-2">
                    <div class="file-mode-card">
                        <h4>FileNotFoundError</h4>
                        <p>Raised when trying to open a non-existent file in read mode.</p>
                    </div>
                    <div class="file-mode-card">
                        <h4>PermissionError</h4>
                        <p>Raised when lacking permission to access a file.</p>
                    </div>
                    <div class="file-mode-card">
                        <h4>IOError</h4>
                        <p>General input/output operation failure.</p>
                    </div>
                    <div class="file-mode-card">
                        <h4>IsADirectoryError</h4>
                        <p>Raised when trying to open a directory as a file.</p>
                    </div>
                </div>

                <h3>Try-Except-Finally Pattern</h3>
                <div class="code-block">
<span class="keyword">try</span>:
    <span class="comment"># Try to open and read file</span>
    <span class="keyword">with</span> <span class="function">open</span>(<span class="string">'data.txt'</span>, <span class="string">'r'</span>) <span class="keyword">as</span> file:
        content = file.<span class="function">read</span>()
        <span class="function">print</span>(content)

<span class="keyword">except</span> FileNotFoundError:
    <span class="comment"># Handle missing file</span>
    <span class="function">print</span>(<span class="string">'Error: File not found!'</span>)

<span class="keyword">except</span> PermissionError:
    <span class="comment"># Handle permission issues</span>
    <span class="function">print</span>(<span class="string">'Error: No permission to read file!'</span>)

<span class="keyword">except</span> Exception <span class="keyword">as</span> e:
    <span class="comment"># Handle any other exceptions</span>
    <span class="function">print</span>(<span class="string">f'Unexpected error: {e}'</span>)

<span class="keyword">finally</span>:
    <span class="comment"># Always executed (cleanup code)</span>
    <span class="function">print</span>(<span class="string">'File operation completed'</span>)
                </div>

                <h3>Interactive Exception Handler</h3>
                <div class="virtual-fs">
                    <p>Test different exception scenarios:</p>
                    <div class="fs-controls">
                        <select id="exceptionScenario">
                            <option value="not_found">File Not Found</option>
                            <option value="permission">Permission Error</option>
                            <option value="success">Successful Read</option>
                            <option value="write_fail">Write to Read-Only</option>
                        </select>
                        <button onclick="testException()">Test Exception</button>
                    </div>
                    <div id="exceptionOutput" class="output-area"></div>
                </div>

                <h3>Best Practices</h3>
                <div class="info-box">
                    <strong>1. Use Specific Exceptions:</strong> Catch specific exceptions before general ones.
                </div>
                <div class="info-box">
                    <strong>2. Use 'with' Statement:</strong> Ensures file is closed even if exception occurs.
                </div>
                <div class="info-box">
                    <strong>3. Provide Helpful Messages:</strong> Tell users what went wrong and how to fix it.
                </div>
                <div class="info-box">
                    <strong>4. Log Errors:</strong> In production, log errors for debugging.
                </div>

                <h3>Complete Exception Handling Example</h3>
                <div class="code-block">
<span class="keyword">import</span> os

<span class="keyword">def</span> <span class="function">safe_file_read</span>(filename):
    <span class="string">"""Safely read a file with proper exception handling"""</span>

    <span class="comment"># Check if file exists first</span>
    <span class="keyword">if</span> <span class="keyword">not</span> os.path.<span class="function">exists</span>(filename):
        <span class="keyword">return</span> <span class="keyword">None</span>, <span class="string">"File does not exist"</span>

    <span class="keyword">try</span>:
        <span class="keyword">with</span> <span class="function">open</span>(filename, <span class="string">'r'</span>, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> file:
            content = file.<span class="function">read</span>()
            <span class="keyword">return</span> content, <span class="keyword">None</span>

    <span class="keyword">except</span> PermissionError:
        <span class="keyword">return</span> <span class="keyword">None</span>, <span class="string">"Permission denied"</span>

    <span class="keyword">except</span> UnicodeDecodeError:
        <span class="keyword">return</span> <span class="keyword">None</span>, <span class="string">"File encoding error"</span>

    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:
        <span class="keyword">return</span> <span class="keyword">None</span>, <span class="string">f"Unexpected error: {</span><span class="function">str</span>(e)<span class="string">}"</span>

<span class="comment"># Usage</span>
content, error = <span class="function">safe_file_read</span>(<span class="string">'data.txt'</span>)
<span class="keyword">if</span> error:
    <span class="function">print</span>(<span class="string">f"Error: {error}"</span>)
<span class="keyword">else</span>:
    <span class="function">print</span>(content)
                </div>
            </div>
        </div>

        <!-- Quiz Tab -->
        <div id="quiz" class="tab-content">
            <div class="card">
                <h2>File Handling Quiz</h2>
                <p>Test your knowledge of Python file handling concepts</p>

                <div class="quiz-container" id="quizContainer"></div>

                <button onclick="submitQuiz()" style="width: 100%; font-size: 1.2em; padding: 15px;">Submit Quiz</button>

                <div id="quizScore" class="quiz-score"></div>
            </div>
        </div>
    </div>

    <script>
        // Virtual File System
        const virtualFS = {};
        let currentPath = [];

        // Tab Switching
        function switchTab(tabName) {
            // Hide all tab contents
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));

            // Remove active class from all buttons
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(button => button.classList.remove('active'));

            // Show selected tab
            document.getElementById(tabName).classList.add('active');

            // Add active class to clicked button
            event.target.classList.add('active');

            // Update file list if on virtual-fs tab
            if (tabName === 'virtual-fs') {
                updateFileList();
            }
        }

        // File Mode Demonstrator
        function demonstrateMode() {
            const mode = document.getElementById('modeSelect').value;
            const output = document.getElementById('modeOutput');

            let demonstration = '';

            switch(mode) {
                case 'r':
                    demonstration = `
<span class="step-indicator">Step 1</span> Opening file in READ mode ('r')
<span class="step-indicator">Step 2</span> File must exist (Error if not found)
<span class="step-indicator">Step 3</span> Can only read, cannot write
<span class="step-indicator">Step 4</span> Pointer starts at beginning

Example:
with open('data.txt', 'r') as f:
    content = f.read()  # Success!
    f.write('text')     # Error: not writable
                    `;
                    break;
                case 'w':
                    demonstration = `
<span class="step-indicator">Step 1</span> Opening file in WRITE mode ('w')
<span class="step-indicator">Step 2</span> Creates file if doesn't exist
<span class="step-indicator">Step 3</span> TRUNCATES (erases) existing content!
<span class="step-indicator">Step 4</span> Can only write, cannot read

Example:
with open('data.txt', 'w') as f:
    f.write('New content')  # Success!
    # Old content is GONE!
                    `;
                    break;
                case 'a':
                    demonstration = `
<span class="step-indicator">Step 1</span> Opening file in APPEND mode ('a')
<span class="step-indicator">Step 2</span> Creates file if doesn't exist
<span class="step-indicator">Step 3</span> Preserves existing content
<span class="step-indicator">Step 4</span> Pointer starts at end of file

Example:
with open('log.txt', 'a') as f:
    f.write('New log entry\\n')  # Adds to end
    # Existing content preserved
                    `;
                    break;
                case 'r+':
                    demonstration = `
<span class="step-indicator">Step 1</span> Opening file in READ/WRITE mode ('r+')
<span class="step-indicator">Step 2</span> File must exist (Error if not found)
<span class="step-indicator">Step 3</span> Can both read and write
<span class="step-indicator">Step 4</span> Pointer starts at beginning
<span class="step-indicator">Step 5</span> Writing overwrites at current position

Example:
with open('data.txt', 'r+') as f:
    content = f.read()      # Read first
    f.write('Modified')     # Then write
                    `;
                    break;
                case 'w+':
                    demonstration = `
<span class="step-indicator">Step 1</span> Opening file in WRITE/READ mode ('w+')
<span class="step-indicator">Step 2</span> Creates file if doesn't exist
<span class="step-indicator">Step 3</span> TRUNCATES existing content!
<span class="step-indicator">Step 4</span> Can both write and read

Example:
with open('data.txt', 'w+') as f:
    f.write('New content')
    f.seek(0)           # Go back to start
    content = f.read()  # Read what we wrote
                    `;
                    break;
                case 'a+':
                    demonstration = `
<span class="step-indicator">Step 1</span> Opening file in APPEND/READ mode ('a+')
<span class="step-indicator">Step 2</span> Creates file if doesn't exist
<span class="step-indicator">Step 3</span> Preserves existing content
<span class="step-indicator">Step 4</span> Can both append and read
<span class="step-indicator">Step 5</span> Write pointer at end, read from anywhere

Example:
with open('data.txt', 'a+') as f:
    f.write('Appended text')
    f.seek(0)           # Go to start
    content = f.read()  # Read all content
                    `;
                    break;
            }

            output.innerHTML = demonstration;
        }

        // Code Simulator
        const simulations = {
            read: {
                code: `# Reading a file
with open('data.txt', 'r') as file:
    content = file.read()
    print(content)`,
                steps: [
                    { line: 1, output: "Opening 'data.txt' in read mode...", fileContent: "Hello World!\nPython is awesome!\nFile handling is fun!" },
                    { line: 2, output: "Reading entire file content...", fileContent: "Hello World!\nPython is awesome!\nFile handling is fun!" },
                    { line: 3, output: "Output:\nHello World!\nPython is awesome!\nFile handling is fun!", fileContent: "Hello World!\nPython is awesome!\nFile handling is fun!" }
                ]
            },
            write: {
                code: `# Writing to a file
with open('output.txt', 'w') as file:
    file.write('Hello World!\\n')
    file.write('This is line 2')`,
                steps: [
                    { line: 1, output: "Opening 'output.txt' in write mode...", fileContent: "" },
                    { line: 2, output: "Writing first line...", fileContent: "Hello World!\n" },
                    { line: 3, output: "Writing second line...", fileContent: "Hello World!\nThis is line 2" }
                ]
            },
            append: {
                code: `# Appending to a file
with open('log.txt', 'a') as file:
    file.write('New log entry\\n')`,
                steps: [
                    { line: 0, output: "Initial file content:", fileContent: "Log entry 1\nLog entry 2\n" },
                    { line: 1, output: "Opening 'log.txt' in append mode...", fileContent: "Log entry 1\nLog entry 2\n" },
                    { line: 2, output: "Appending new entry...", fileContent: "Log entry 1\nLog entry 2\nNew log entry\n" }
                ]
            },
            readlines: {
                code: `# Reading lines
with open('data.txt', 'r') as file:
    lines = file.readlines()
    for line in lines:
        print(line.strip())`,
                steps: [
                    { line: 1, output: "Opening file...", fileContent: "Line 1\nLine 2\nLine 3" },
                    { line: 2, output: "Reading all lines into list...", fileContent: "Line 1\nLine 2\nLine 3" },
                    { line: 3, output: "Output:\nLine 1", fileContent: "Line 1\nLine 2\nLine 3" },
                    { line: 4, output: "Output:\nLine 1\nLine 2", fileContent: "Line 1\nLine 2\nLine 3" },
                    { line: 4, output: "Output:\nLine 1\nLine 2\nLine 3", fileContent: "Line 1\nLine 2\nLine 3" }
                ]
            },
            with: {
                code: `# Using with statement
with open('data.txt', 'r') as file:
    content = file.read()
    print(content)
# File automatically closed here`,
                steps: [
                    { line: 1, output: "Context manager opens file...", fileContent: "Sample content" },
                    { line: 2, output: "Reading content...", fileContent: "Sample content" },
                    { line: 3, output: "Output: Sample content", fileContent: "Sample content" },
                    { line: 4, output: "Context manager automatically closes file!\nNo need for file.close()", fileContent: "Sample content" }
                ]
            }
        };

        let currentSimulation = null;
        let currentStep = 0;

        function runSimulation() {
            const exampleType = document.getElementById('simulatorExample').value;
            currentSimulation = simulations[exampleType];
            currentStep = 0;

            displaySimulationStep();

            const interval = setInterval(() => {
                currentStep++;
                if (currentStep < currentSimulation.steps.length) {
                    displaySimulationStep();
                } else {
                    clearInterval(interval);
                }
            }, 1500);
        }

        function displaySimulationStep() {
            const codeDisplay = document.getElementById('simulatorCode');
            const outputDisplay = document.getElementById('simulatorOutput');
            const logDisplay = document.getElementById('simulatorLog');

            const step = currentSimulation.steps[currentStep];
            const lines = currentSimulation.code.split('\n');

            let codeHTML = '';
            lines.forEach((line, index) => {
                const lineClass = index === step.line ? 'code-line highlight' : 'code-line';
                codeHTML += `<span class="${lineClass}">${escapeHtml(line)}</span>\n`;
            });

            codeDisplay.innerHTML = codeHTML;
            outputDisplay.textContent = step.fileContent;

            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            logEntry.textContent = `[Step ${currentStep + 1}] ${step.output}`;
            logDisplay.appendChild(logEntry);
            logDisplay.scrollTop = logDisplay.scrollHeight;
        }

        function resetSimulation() {
            document.getElementById('simulatorCode').innerHTML = 'Select an example and click "Run Simulation"';
            document.getElementById('simulatorOutput').textContent = '';
            document.getElementById('simulatorLog').innerHTML = '';
            currentSimulation = null;
            currentStep = 0;
        }

        // Virtual File System Functions
        function writeFile() {
            const fileName = document.getElementById('fileName').value.trim();
            const fileContent = document.getElementById('fileContent').value;
            const mode = document.getElementById('fileMode').value;

            if (!fileName) {
                addLog('Error: Please enter a filename', 'error');
                return;
            }

            if (mode === 'w') {
                virtualFS[fileName] = fileContent;
                addLog(`File '${fileName}' created/overwritten`, 'success');
            } else if (mode === 'a') {
                if (virtualFS[fileName]) {
                    virtualFS[fileName] += fileContent;
                    addLog(`Content appended to '${fileName}'`, 'success');
                } else {
                    virtualFS[fileName] = fileContent;
                    addLog(`File '${fileName}' created`, 'success');
                }
            }

            updateFileList();
            document.getElementById('fileContent').value = '';
        }

        function readFile() {
            const fileName = document.getElementById('readFileName').value;
            const display = document.getElementById('fileContentDisplay');

            if (virtualFS[fileName]) {
                display.textContent = virtualFS[fileName];
                addLog(`Reading file '${fileName}'`, 'success');
            } else {
                display.textContent = 'FileNotFoundError: File does not exist';
                addLog(`Error: File '${fileName}' not found`, 'error');
            }
        }

        function deleteFile() {
            const fileName = document.getElementById('readFileName').value;

            if (virtualFS[fileName]) {
                delete virtualFS[fileName];
                addLog(`File '${fileName}' deleted`, 'warning');
                updateFileList();
                document.getElementById('fileContentDisplay').textContent = '';
            } else {
                addLog(`Error: File '${fileName}' not found`, 'error');
            }
        }

        function updateFileList() {
            const fileList = document.getElementById('fileList');
            const readSelect = document.getElementById('readFileName');

            fileList.innerHTML = '';
            readSelect.innerHTML = '';

            if (Object.keys(virtualFS).length === 0) {
                fileList.innerHTML = '<li class="file-item">No files yet. Create one above!</li>';
                return;
            }

            Object.keys(virtualFS).forEach(fileName => {
                const li = document.createElement('li');
                li.className = 'file-item';
                li.innerHTML = `
                    <span><span class="file-icon"></span>${fileName}</span>
                    <span>${virtualFS[fileName].length} bytes</span>
                `;
                fileList.appendChild(li);

                const option = document.createElement('option');
                option.value = fileName;
                option.textContent = fileName;
                readSelect.appendChild(option);
            });
        }

        function addLog(message, type = 'success') {
            const log = document.getElementById('operationLog');
            const entry = document.createElement('div');
            entry.className = `log-entry ${type}`;
            const timestamp = new Date().toLocaleTimeString();
            entry.textContent = `[${timestamp}] ${message}`;
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight;
        }

        // Path Builder
        function addPathSegment(segment) {
            if (segment === '/') {
                currentPath = ['/'];
            } else {
                if (currentPath.length === 0) currentPath = ['/'];
                currentPath.push(segment);
            }
            updatePathDisplay();
        }

        function clearPath() {
            currentPath = ['/'];
            updatePathDisplay();
        }

        function updatePathDisplay() {
            const display = document.getElementById('pathDisplay');
            if (currentPath.length === 0 || (currentPath.length === 1 && currentPath[0] === '/')) {
                display.textContent = '/';
            } else {
                display.textContent = currentPath.join('/').replace('//', '/');
            }
        }

        // CSV Functions
        function generateCSV() {
            const tbody = document.getElementById('csvTableBody');
            const sampleData = [
                { name: 'Alice Johnson', age: 28, city: 'New York', occupation: 'Software Engineer' },
                { name: 'Bob Smith', age: 35, city: 'Los Angeles', occupation: 'Data Scientist' },
                { name: 'Carol White', age: 42, city: 'Chicago', occupation: 'Product Manager' },
                { name: 'David Brown', age: 31, city: 'Houston', occupation: 'DevOps Engineer' },
                { name: 'Eve Davis', age: 26, city: 'Phoenix', occupation: 'UX Designer' }
            ];

            tbody.innerHTML = '';
            sampleData.forEach(row => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${row.name}</td>
                    <td>${row.age}</td>
                    <td>${row.city}</td>
                    <td>${row.occupation}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        function parseCSV() {
            const csvContent = `Name,Age,City,Occupation
Alice Johnson,28,New York,Software Engineer
Bob Smith,35,Los Angeles,Data Scientist
Carol White,42,Chicago,Product Manager`;

            alert('CSV Content:\n\n' + csvContent + '\n\nParsed successfully! Check the table above.');
        }

        // JSON Functions
        function convertToJSON() {
            const pythonDict = document.getElementById('pythonDict').value;
            const output = document.getElementById('jsonOutput');

            try {
                const parsed = JSON.parse(pythonDict);
                const formatted = JSON.stringify(parsed, null, 4);
                output.innerHTML = `<span class="success">JSON file created successfully!</span>\n\n${escapeHtml(formatted)}`;
            } catch (e) {
                output.innerHTML = `<span class="error">Error: Invalid JSON format</span>\n${e.message}`;
            }
        }

        function parseJSON() {
            const output = document.getElementById('jsonOutput');
            output.innerHTML = `<span class="success">Parsing JSON...</span>\n
Name: Alice
Age: 25
City: New York
Skills: Python, JavaScript, SQL`;
        }

        // Exception Handling
        function testException() {
            const scenario = document.getElementById('exceptionScenario').value;
            const output = document.getElementById('exceptionOutput');

            let result = '';

            switch(scenario) {
                case 'not_found':
                    result = `<span class="error">try:</span>
    with open('missing_file.txt', 'r') as f:
        content = f.read()

<span class="error">except FileNotFoundError:</span>
    print('Error: File not found!')
    print('Please check the filename and try again.')

<span class="keyword">Output:</span>
Error: File not found!
Please check the filename and try again.`;
                    break;

                case 'permission':
                    result = `<span class="error">try:</span>
    with open('/root/protected.txt', 'r') as f:
        content = f.read()

<span class="error">except PermissionError:</span>
    print('Error: Permission denied!')
    print('You do not have access to this file.')

<span class="keyword">Output:</span>
Error: Permission denied!
You do not have access to this file.`;
                    break;

                case 'success':
                    result = `<span class="success">try:</span>
    with open('data.txt', 'r') as f:
        content = f.read()
        print(content)

except FileNotFoundError:
    print('Error: File not found!')

<span class="keyword">Output:</span>
<span class="success">Hello World!
This is sample content.
File read successfully!</span>`;
                    break;

                case 'write_fail':
                    result = `<span class="error">try:</span>
    with open('readonly.txt', 'w') as f:
        f.write('Trying to write...')

<span class="error">except PermissionError:</span>
    print('Error: Cannot write to read-only file!')

<span class="keyword">Output:</span>
Error: Cannot write to read-only file!`;
                    break;
            }

            output.innerHTML = result;
        }

        // Quiz Questions
        const quizQuestions = [
            {
                question: "Which file mode opens a file for reading only?",
                options: ["'w'", "'r'", "'a'", "'r+'"],
                correct: 1,
                explanation: "'r' mode opens a file for reading only. The file must exist."
            },
            {
                question: "What does the 'with' statement ensure when working with files?",
                options: [
                    "File is encrypted",
                    "File is automatically closed",
                    "File is backed up",
                    "File is compressed"
                ],
                correct: 1,
                explanation: "The 'with' statement ensures the file is automatically closed, even if an exception occurs."
            },
            {
                question: "What is the difference between read() and readlines()?",
                options: [
                    "No difference",
                    "read() returns a string, readlines() returns a list",
                    "read() is faster",
                    "readlines() is deprecated"
                ],
                correct: 1,
                explanation: "read() returns the entire file as a single string, while readlines() returns a list of lines."
            },
            {
                question: "Which mode would you use to add content to the end of an existing file?",
                options: ["'r'", "'w'", "'a'", "'r+'"],
                correct: 2,
                explanation: "'a' (append) mode adds content to the end of the file without erasing existing content."
            },
            {
                question: "What happens when you open a file in 'w' mode if it already exists?",
                options: [
                    "Appends to existing content",
                    "Raises an error",
                    "Truncates (erases) all existing content",
                    "Creates a backup first"
                ],
                correct: 2,
                explanation: "'w' mode truncates (erases) all existing content before writing new data."
            },
            {
                question: "Which exception is raised when trying to open a non-existent file in 'r' mode?",
                options: [
                    "IOError",
                    "FileNotFoundError",
                    "ValueError",
                    "PermissionError"
                ],
                correct: 1,
                explanation: "FileNotFoundError is raised when trying to open a file that doesn't exist in read mode."
            },
            {
                question: "What is the purpose of the 'finally' block in exception handling?",
                options: [
                    "Execute code only if no exception occurs",
                    "Execute code only if an exception occurs",
                    "Execute code regardless of whether an exception occurred",
                    "Retry the operation"
                ],
                correct: 2,
                explanation: "The 'finally' block always executes, regardless of whether an exception occurred or not."
            },
            {
                question: "Which format is better for storing hierarchical/nested data?",
                options: ["CSV", "JSON", "Both are equal", "Neither"],
                correct: 1,
                explanation: "JSON supports hierarchical/nested data structures better than CSV, which is tabular."
            },
            {
                question: "What does the 'b' flag do when added to a file mode (e.g., 'rb')?",
                options: [
                    "Backs up the file",
                    "Opens in binary mode",
                    "Buffers the output",
                    "Makes it read-only"
                ],
                correct: 1,
                explanation: "The 'b' flag opens the file in binary mode, which is necessary for non-text files like images."
            },
            {
                question: "Which method writes a list of strings to a file?",
                options: [
                    "write()",
                    "writeline()",
                    "writelines()",
                    "writeall()"
                ],
                correct: 2,
                explanation: "writelines() writes a list of strings to a file. Note: it doesn't add newlines automatically."
            }
        ];

        // Initialize Quiz
        function initializeQuiz() {
            const container = document.getElementById('quizContainer');
            container.innerHTML = '';

            quizQuestions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'quiz-question';
                questionDiv.innerHTML = `
                    <h4>Question ${index + 1}</h4>
                    <p>${q.question}</p>
                    <ul class="quiz-options" id="options-${index}">
                        ${q.options.map((option, optIndex) => `
                            <li class="quiz-option" onclick="selectOption(${index}, ${optIndex})">
                                ${String.fromCharCode(65 + optIndex)}. ${option}
                            </li>
                        `).join('')}
                    </ul>
                    <div class="quiz-feedback" id="feedback-${index}"></div>
                `;
                container.appendChild(questionDiv);
            });
        }

        const selectedAnswers = {};

        function selectOption(questionIndex, optionIndex) {
            selectedAnswers[questionIndex] = optionIndex;

            const options = document.querySelectorAll(`#options-${questionIndex} .quiz-option`);
            options.forEach((opt, idx) => {
                opt.classList.remove('selected');
                if (idx === optionIndex) {
                    opt.classList.add('selected');
                }
            });
        }

        function submitQuiz() {
            let correct = 0;

            quizQuestions.forEach((q, index) => {
                const feedback = document.getElementById(`feedback-${index}`);
                const options = document.querySelectorAll(`#options-${index} .quiz-option`);

                if (selectedAnswers[index] !== undefined) {
                    const isCorrect = selectedAnswers[index] === q.correct;

                    if (isCorrect) {
                        correct++;
                        feedback.className = 'quiz-feedback show correct';
                        feedback.textContent = ' Correct! ' + q.explanation;
                        options[selectedAnswers[index]].classList.add('correct');
                    } else {
                        feedback.className = 'quiz-feedback show incorrect';
                        feedback.textContent = ' Incorrect. ' + q.explanation;
                        options[selectedAnswers[index]].classList.add('incorrect');
                        options[q.correct].classList.add('correct');
                    }
                } else {
                    feedback.className = 'quiz-feedback show incorrect';
                    feedback.textContent = ' Not answered. ' + q.explanation;
                    options[q.correct].classList.add('correct');
                }
            });

            const scoreDiv = document.getElementById('quizScore');
            const percentage = (correct / quizQuestions.length * 100).toFixed(0);
            scoreDiv.className = 'quiz-score show';
            scoreDiv.innerHTML = `
                <h3>Quiz Complete!</h3>
                <p>You scored ${correct} out of ${quizQuestions.length}</p>
                <p style="font-size: 2em; margin: 20px 0;">${percentage}%</p>
                <p>${percentage >= 80 ? ' Excellent work!' : percentage >= 60 ? ' Good job!' : ' Keep practicing!'}</p>
            `;

            scoreDiv.scrollIntoView({ behavior: 'smooth' });
        }

        // Utility Functions
        function escapeHtml(text) {
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#039;'
            };
            return text.replace(/[&<>"']/g, m => map[m]);
        }

        // Initialize on page load
        window.onload = function() {
            initializeQuiz();
            updateFileList();
            updatePathDisplay();
            generateCSV();

            // Initial demonstration
            demonstrateMode();

            // Set initial simulation display
            resetSimulation();
        };
    </script>
</body>
</html>