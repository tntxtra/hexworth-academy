<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Chapter 6: Dictionaries - Interactive Learning Tool</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-green: #166534;
            --light-green: #22c55e;
            --dark-green: #14532d;
            --accent-purple: #7c3aed;
            --light-purple: #a78bfa;
            --bg-dark: #0f172a;
            --bg-card: #1e293b;
            --text-light: #f1f5f9;
            --text-muted: #94a3b8;
            --border-color: #334155;
            --error-red: #ef4444;
            --success-green: #10b981;
            --warning-yellow: #f59e0b;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--bg-dark) 0%, #1a2332 100%);
            color: var(--text-light);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 20px;
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--dark-green) 100%);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(22, 101, 52, 0.3);
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        header p {
            font-size: 1.2em;
            color: var(--text-muted);
        }

        .tab-container {
            margin-bottom: 30px;
        }

        .tab-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
            background: var(--bg-card);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        .tab-btn {
            flex: 1;
            min-width: 150px;
            padding: 12px 20px;
            background: var(--border-color);
            color: var(--text-light);
            border: 2px solid transparent;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .tab-btn:hover {
            background: var(--primary-green);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(22, 101, 52, 0.4);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--light-green) 100%);
            border-color: var(--light-green);
            transform: translateY(-2px);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border-color);
        }

        .card h2 {
            color: var(--light-green);
            margin-bottom: 15px;
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card h3 {
            color: var(--light-purple);
            margin: 20px 0 10px 0;
            font-size: 1.3em;
        }

        .code-block {
            background: var(--bg-dark);
            border-left: 4px solid var(--primary-green);
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
        }

        .code-block code {
            color: var(--light-green);
        }

        .interactive-area {
            background: var(--bg-dark);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid var(--primary-green);
        }

        .dict-visualizer {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            min-height: 100px;
            padding: 20px;
            background: rgba(22, 101, 52, 0.1);
            border-radius: 8px;
            margin: 15px 0;
        }

        .key-value-pair {
            display: flex;
            align-items: stretch;
            background: var(--bg-card);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.3s ease;
            border: 2px solid var(--primary-green);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .key-box {
            background: var(--primary-green);
            padding: 12px 16px;
            font-weight: 600;
            min-width: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Courier New', monospace;
        }

        .value-box {
            background: var(--accent-purple);
            padding: 12px 16px;
            min-width: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Courier New', monospace;
        }

        .arrow {
            padding: 0 8px;
            display: flex;
            align-items: center;
            background: var(--border-color);
            color: var(--warning-yellow);
            font-weight: bold;
        }

        .input-group {
            display: flex;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        input[type="text"],
        input[type="number"],
        select,
        textarea {
            flex: 1;
            min-width: 150px;
            padding: 12px;
            background: var(--bg-dark);
            color: var(--text-light);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--light-green);
            box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.2);
        }

        button {
            padding: 12px 24px;
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--light-green) 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(22, 101, 52, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        button.secondary {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--light-purple) 100%);
        }

        button.danger {
            background: linear-gradient(135deg, #dc2626 0%, var(--error-red) 100%);
        }

        .method-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }

        .output-area {
            background: var(--bg-dark);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            min-height: 60px;
            font-family: 'Courier New', monospace;
            color: var(--light-green);
            white-space: pre-wrap;
            word-break: break-all;
        }

        .hash-table {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }

        .hash-bucket {
            background: var(--bg-dark);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 10px;
            min-height: 80px;
        }

        .hash-bucket-header {
            color: var(--light-purple);
            font-weight: 600;
            margin-bottom: 8px;
            text-align: center;
            font-size: 0.9em;
        }

        .hash-item {
            background: var(--primary-green);
            padding: 6px;
            border-radius: 4px;
            margin: 4px 0;
            font-size: 0.85em;
            text-align: center;
            animation: dropIn 0.3s ease;
        }

        @keyframes dropIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .quiz-container {
            margin-top: 20px;
        }

        .question {
            background: var(--bg-dark);
            border-left: 4px solid var(--accent-purple);
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .question h4 {
            color: var(--light-green);
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 15px 0;
        }

        .option {
            background: var(--bg-card);
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option:hover {
            border-color: var(--light-green);
            background: rgba(22, 101, 52, 0.2);
        }

        .option.selected {
            border-color: var(--light-purple);
            background: rgba(124, 58, 237, 0.2);
        }

        .option.correct {
            border-color: var(--success-green);
            background: rgba(16, 185, 129, 0.2);
        }

        .option.incorrect {
            border-color: var(--error-red);
            background: rgba(239, 68, 68, 0.2);
        }

        .feedback {
            margin-top: 15px;
            padding: 12px;
            border-radius: 8px;
            display: none;
        }

        .feedback.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .feedback.correct {
            background: rgba(16, 185, 129, 0.2);
            border-left: 4px solid var(--success-green);
            color: var(--success-green);
        }

        .feedback.incorrect {
            background: rgba(239, 68, 68, 0.2);
            border-left: 4px solid var(--error-red);
            color: var(--error-red);
        }

        .score-display {
            background: linear-gradient(135deg, var(--accent-purple) 0%, var(--light-purple) 100%);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.3em;
            font-weight: 600;
            margin: 20px 0;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .tree-view {
            font-family: 'Courier New', monospace;
            background: var(--bg-dark);
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .tree-item {
            margin: 5px 0 5px 20px;
            color: var(--text-light);
        }

        .tree-key {
            color: var(--light-purple);
            font-weight: 600;
        }

        .tree-value {
            color: var(--light-green);
        }

        .tree-string {
            color: var(--warning-yellow);
        }

        .tree-number {
            color: #60a5fa;
        }

        .info-box {
            background: rgba(124, 58, 237, 0.1);
            border-left: 4px solid var(--accent-purple);
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
        }

        .info-box h4 {
            color: var(--light-purple);
            margin-bottom: 8px;
        }

        .badge {
            display: inline-block;
            padding: 4px 10px;
            background: var(--primary-green);
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
            margin-left: 8px;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 12px;
            border: 1px solid var(--border-color);
            text-align: left;
        }

        .comparison-table th {
            background: var(--primary-green);
            font-weight: 600;
        }

        .comparison-table tr:nth-child(even) {
            background: rgba(22, 101, 52, 0.1);
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }

            .tab-buttons {
                flex-direction: column;
            }

            .tab-btn {
                min-width: 100%;
            }

            .input-group {
                flex-direction: column;
            }

            input[type="text"],
            input[type="number"],
            select {
                min-width: 100%;
            }

            .method-buttons {
                grid-template-columns: 1fr;
            }
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--light-green);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
            color: var(--light-purple);
            margin-left: 5px;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 250px;
            background-color: var(--bg-card);
            color: var(--text-light);
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -125px;
            opacity: 0;
            transition: opacity 0.3s;
            border: 2px solid var(--accent-purple);
            font-size: 0.9em;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Python Chapter 6: Dictionaries</h1>
            <p>Master Python's most powerful data structure through interactive exploration</p>
        </header>

        <div class="tab-container">
            <div class="tab-buttons">
                <button class="tab-btn active" onclick="switchTab('basics')">Basics</button>
                <button class="tab-btn" onclick="switchTab('visualizer')">Visualizer</button>
                <button class="tab-btn" onclick="switchTab('methods')">Methods</button>
                <button class="tab-btn" onclick="switchTab('hashtable')">Hash Table</button>
                <button class="tab-btn" onclick="switchTab('nested')">Nested Dicts</button>
                <button class="tab-btn" onclick="switchTab('sets')">Sets</button>
                <button class="tab-btn" onclick="switchTab('quiz')">Quiz</button>
            </div>

            <!-- BASICS TAB -->
            <div id="basics" class="tab-content active">
                <div class="card">
                    <h2>Dictionary Basics</h2>

                    <h3>What is a Dictionary?</h3>
                    <p>A dictionary is an unordered collection of key-value pairs. Each key must be unique and immutable (strings, numbers, or tuples), while values can be of any type.</p>

                    <div class="code-block">
<code># Creating dictionaries
empty_dict = {}
student = {"name": "Alice", "age": 20, "grade": "A"}
mixed = {1: "one", "two": 2, (3, 4): "tuple key"}

# Dictionary constructor
person = dict(name="Bob", age=25, city="NYC")</code>
                    </div>

                    <h3>Accessing Values</h3>

                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Method</th>
                                <th>Syntax</th>
                                <th>When Key Missing</th>
                                <th>Best Use</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>dict[key]</code></td>
                                <td><code>student["name"]</code></td>
                                <td>Raises KeyError</td>
                                <td>When key must exist</td>
                            </tr>
                            <tr>
                                <td><code>dict.get(key)</code></td>
                                <td><code>student.get("name")</code></td>
                                <td>Returns None</td>
                                <td>When key might not exist</td>
                            </tr>
                            <tr>
                                <td><code>dict.get(key, default)</code></td>
                                <td><code>student.get("gpa", 0.0)</code></td>
                                <td>Returns default</td>
                                <td>When you need a fallback</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="code-block">
<code># Accessing examples
student = {"name": "Alice", "age": 20}

# Using bracket notation
print(student["name"])  # "Alice"
print(student["grade"]) # KeyError!

# Using get()
print(student.get("name"))       # "Alice"
print(student.get("grade"))      # None
print(student.get("grade", "N/A"))  # "N/A"</code>
                    </div>

                    <h3>Adding and Updating</h3>
                    <div class="code-block">
<code># Adding new key-value pairs
student["grade"] = "A"
student["gpa"] = 3.8

# Updating existing values
student["age"] = 21

# Using update() for multiple changes
student.update({"age": 22, "major": "CS"})</code>
                    </div>

                    <h3>Dictionary Comprehensions</h3>
                    <div class="code-block">
<code># Basic comprehension
squares = {x: x**2 for x in range(1, 6)}
# {1: 1, 2: 4, 3: 9, 4: 16, 5: 25}

# With condition
evens = {x: x**2 for x in range(10) if x % 2 == 0}

# From two lists
keys = ["a", "b", "c"]
values = [1, 2, 3]
combined = {k: v for k, v in zip(keys, values)}</code>
                    </div>

                    <div class="info-box">
                        <h4>Key Points</h4>
                        <ul>
                            <li>Dictionary keys must be immutable (strings, numbers, tuples)</li>
                            <li>Keys are unique - adding a duplicate key updates the value</li>
                            <li>Dictionaries are mutable - you can change them after creation</li>
                            <li>Since Python 3.7, dictionaries maintain insertion order</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- VISUALIZER TAB -->
            <div id="visualizer" class="tab-content">
                <div class="card">
                    <h2>Dictionary Visualizer<span class="badge">Interactive</span></h2>
                    <p>Add, update, and remove key-value pairs to see how dictionaries work visually.</p>

                    <div class="interactive-area">
                        <div class="input-group">
                            <input type="text" id="vis-key" placeholder="Enter key (e.g., 'name')">
                            <input type="text" id="vis-value" placeholder="Enter value (e.g., 'Alice')">
                            <button onclick="addToDict()">Add / Update</button>
                            <button class="secondary" onclick="removeFromDict()">Remove Key</button>
                            <button class="danger" onclick="clearDict()">Clear All</button>
                        </div>

                        <h3>Visual Representation:</h3>
                        <div id="dict-visual" class="dict-visualizer">
                            <div style="color: var(--text-muted); width: 100%; text-align: center;">
                                Dictionary is empty. Add some key-value pairs above!
                            </div>
                        </div>

                        <h3>Python Code:</h3>
                        <div id="dict-code" class="output-area">my_dict = {}</div>

                        <h3>Dictionary Length:</h3>
                        <div id="dict-length" class="output-area">len(my_dict) = 0</div>
                    </div>
                </div>
            </div>

            <!-- METHODS TAB -->
            <div id="methods" class="tab-content">
                <div class="card">
                    <h2>Dictionary Methods Playground<span class="badge">Interactive</span></h2>

                    <div class="interactive-area">
                        <h3>Current Dictionary:</h3>
                        <div id="methods-dict-display" class="output-area">
sample_dict = {
    "name": "Alice",
    "age": 25,
    "city": "NYC",
    "job": "Engineer"
}</div>

                        <h3>Try Dictionary Methods:</h3>
                        <div class="method-buttons">
                            <button onclick="executeMethod('keys')">keys()</button>
                            <button onclick="executeMethod('values')">values()</button>
                            <button onclick="executeMethod('items')">items()</button>
                            <button onclick="executeMethod('get')">get()</button>
                            <button onclick="executeMethod('pop')">pop()</button>
                            <button onclick="executeMethod('popitem')">popitem()</button>
                            <button onclick="executeMethod('update')">update()</button>
                            <button onclick="executeMethod('setdefault')">setdefault()</button>
                            <button onclick="executeMethod('clear')">clear()</button>
                            <button class="secondary" onclick="resetMethodDict()">Reset Dict</button>
                        </div>

                        <div id="method-input-area" style="display: none;">
                            <div class="input-group" id="method-inputs"></div>
                        </div>

                        <h3>Output:</h3>
                        <div id="method-output" class="output-area">Click a method button to see it in action!</div>

                        <h3>Explanation:</h3>
                        <div id="method-explanation" class="output-area" style="color: var(--text-muted);">
Method explanations will appear here...</div>
                    </div>

                    <div class="info-box">
                        <h4>Common Dictionary Methods</h4>
                        <ul>
                            <li><strong>keys()</strong> - Returns a view of all keys</li>
                            <li><strong>values()</strong> - Returns a view of all values</li>
                            <li><strong>items()</strong> - Returns a view of all (key, value) tuples</li>
                            <li><strong>get(key, default)</strong> - Returns value or default if key doesn't exist</li>
                            <li><strong>pop(key)</strong> - Removes and returns value for key</li>
                            <li><strong>popitem()</strong> - Removes and returns last (key, value) pair</li>
                            <li><strong>update(dict)</strong> - Updates dictionary with another dictionary</li>
                            <li><strong>setdefault(key, default)</strong> - Returns value if exists, else sets and returns default</li>
                            <li><strong>clear()</strong> - Removes all items from dictionary</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- HASH TABLE TAB -->
            <div id="hashtable" class="tab-content">
                <div class="card">
                    <h2>How Dictionaries Work: Hash Tables<span class="badge">Educational</span></h2>

                    <p>Dictionaries use hash tables for fast lookups. Each key is converted to a hash (number) that determines which "bucket" stores the key-value pair.</p>

                    <div class="interactive-area">
                        <div class="input-group">
                            <input type="text" id="hash-key" placeholder="Enter a key to hash">
                            <button onclick="addToHashTable()">Add to Hash Table</button>
                            <button class="danger" onclick="clearHashTable()">Clear Table</button>
                        </div>

                        <h3>Hash Table (8 buckets):</h3>
                        <div id="hash-table" class="hash-table"></div>

                        <h3>Hash Calculation:</h3>
                        <div id="hash-calculation" class="output-area">
Enter a key above to see how it's hashed and placed in a bucket.

Python's hash() function converts keys to integers.
The bucket index = hash(key) % number_of_buckets</div>
                    </div>

                    <div class="info-box">
                        <h4>Why Dictionaries Are Fast</h4>
                        <ul>
                            <li><strong>O(1) Average Lookup</strong> - Finding a value by key is nearly instant</li>
                            <li><strong>Hash Function</strong> - Converts keys to array indices</li>
                            <li><strong>Collision Handling</strong> - When two keys hash to same bucket, Python handles it efficiently</li>
                            <li><strong>Dynamic Resizing</strong> - Table grows automatically when it gets too full</li>
                        </ul>
                    </div>

                    <div class="code-block">
<code># Hash function examples (simplified)
hash("hello")   # Large integer (varies by session)
hash(42)        # 42 (integers hash to themselves)
hash((1, 2))    # Tuples are hashable

# These raise TypeError (not hashable):
# hash([1, 2])    # Lists are mutable
# hash({"a": 1})  # Dicts are mutable</code>
                    </div>
                </div>
            </div>

            <!-- NESTED DICTIONARIES TAB -->
            <div id="nested" class="tab-content">
                <div class="card">
                    <h2>Nested Dictionaries<span class="badge">Advanced</span></h2>

                    <p>Dictionaries can contain other dictionaries as values, creating hierarchical data structures perfect for JSON-like data.</p>

                    <div class="code-block">
<code># Nested dictionary example
students = {
    "student1": {
        "name": "Alice",
        "age": 20,
        "grades": {"math": 95, "english": 88}
    },
    "student2": {
        "name": "Bob",
        "age": 22,
        "grades": {"math": 78, "english": 92}
    }
}

# Accessing nested values
print(students["student1"]["name"])              # "Alice"
print(students["student1"]["grades"]["math"])    # 95

# Safely accessing with get()
print(students.get("student3", {}).get("name", "Not found"))</code>
                    </div>

                    <div class="interactive-area">
                        <h3>Interactive Nested Dictionary:</h3>
                        <textarea id="nested-json" rows="12" style="width: 100%; font-family: 'Courier New', monospace; resize: vertical;">
{
    "company": "TechCorp",
    "employees": {
        "engineering": {
            "lead": "Alice",
            "team_size": 5
        },
        "sales": {
            "lead": "Bob",
            "team_size": 3
        }
    },
    "founded": 2020
}</textarea>
                        <button onclick="parseNestedDict()" style="margin-top: 10px;">Parse & Visualize</button>

                        <h3>Tree View:</h3>
                        <div id="tree-view" class="tree-view">Parse the JSON above to see the tree structure...</div>

                        <h3>Access Path Examples:</h3>
                        <div id="access-paths" class="output-area">Will show access paths after parsing...</div>
                    </div>

                    <h3>Iterating Over Nested Dictionaries</h3>
                    <div class="code-block">
<code># Iterate through nested structure
for student_id, student_data in students.items():
    print(f"Student ID: {student_id}")
    for key, value in student_data.items():
        if isinstance(value, dict):
            print(f"  {key}:")
            for sub_key, sub_value in value.items():
                print(f"    {sub_key}: {sub_value}")
        else:
            print(f"  {key}: {value}")</code>
                    </div>

                    <div class="info-box">
                        <h4>Best Practices</h4>
                        <ul>
                            <li>Use <code>get()</code> for safe access to avoid KeyErrors</li>
                            <li>Check types with <code>isinstance()</code> before processing</li>
                            <li>Consider using defaultdict for automatic initialization</li>
                            <li>JSON module is perfect for loading/saving nested dictionaries</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- SETS TAB -->
            <div id="sets" class="tab-content">
                <div class="card">
                    <h2>Sets: Unordered Collections of Unique Items</h2>

                    <p>Sets are like dictionaries with only keys (no values). They're perfect for membership testing and removing duplicates.</p>

                    <div class="code-block">
<code># Creating sets
empty_set = set()  # Can't use {} - that's an empty dict!
fruits = {"apple", "banana", "orange"}
numbers = set([1, 2, 2, 3, 3, 3])  # {1, 2, 3} - duplicates removed

# Set operations
a = {1, 2, 3, 4}
b = {3, 4, 5, 6}

union = a | b           # {1, 2, 3, 4, 5, 6}
intersection = a & b    # {3, 4}
difference = a - b      # {1, 2}
symmetric_diff = a ^ b  # {1, 2, 5, 6}</code>
                    </div>

                    <div class="interactive-area">
                        <h3>Set Operations Playground:</h3>

                        <div class="input-group">
                            <input type="text" id="set-a" placeholder="Set A (comma-separated)" value="1,2,3,4">
                            <input type="text" id="set-b" placeholder="Set B (comma-separated)" value="3,4,5,6">
                        </div>

                        <div class="method-buttons">
                            <button onclick="setOperation('union')">Union (|)</button>
                            <button onclick="setOperation('intersection')">Intersection (&)</button>
                            <button onclick="setOperation('difference')">Difference (-)</button>
                            <button onclick="setOperation('symmetric')">Symmetric Diff (^)</button>
                            <button onclick="setOperation('subset')">A ⊆ B?</button>
                            <button onclick="setOperation('superset')">A ⊇ B?</button>
                        </div>

                        <h3>Result:</h3>
                        <div id="set-result" class="output-area">Click an operation button to see the result!</div>

                        <h3>Visualization:</h3>
                        <div id="set-visual" style="text-align: center; padding: 20px; background: var(--bg-dark); border-radius: 8px; margin: 15px 0;">
                            <div style="color: var(--text-muted);">Results will be visualized here</div>
                        </div>
                    </div>

                    <h3>Set Methods</h3>
                    <div class="code-block">
<code># Adding and removing
fruits = {"apple", "banana"}
fruits.add("orange")          # Add single item
fruits.update(["grape", "kiwi"])  # Add multiple items
fruits.remove("banana")       # Remove (raises KeyError if not found)
fruits.discard("mango")       # Remove (no error if not found)
fruits.pop()                  # Remove and return arbitrary item
fruits.clear()                # Remove all items</code>
                    </div>

                    <h3>Set Comprehensions</h3>
                    <div class="code-block">
<code># Set comprehension syntax
squares = {x**2 for x in range(10)}
# {0, 1, 4, 9, 16, 25, 36, 49, 64, 81}

# With condition
even_squares = {x**2 for x in range(10) if x % 2 == 0}
# {0, 4, 16, 36, 64}

# Remove duplicates from list
numbers = [1, 2, 2, 3, 3, 3, 4]
unique = {x for x in numbers}  # {1, 2, 3, 4}</code>
                    </div>

                    <div class="info-box">
                        <h4>When to Use Sets vs Dictionaries</h4>
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th>Feature</th>
                                    <th>Set</th>
                                    <th>Dictionary</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Structure</td>
                                    <td>Unordered unique items</td>
                                    <td>Key-value pairs</td>
                                </tr>
                                <tr>
                                    <td>Lookup Speed</td>
                                    <td>O(1) - Fast</td>
                                    <td>O(1) - Fast</td>
                                </tr>
                                <tr>
                                    <td>Use Case</td>
                                    <td>Membership testing, remove duplicates</td>
                                    <td>Store related data with keys</td>
                                </tr>
                                <tr>
                                    <td>Duplicates</td>
                                    <td>Not allowed</td>
                                    <td>Keys must be unique</td>
                                </tr>
                                <tr>
                                    <td>Ordering</td>
                                    <td>Unordered (before 3.7)</td>
                                    <td>Insertion order (3.7+)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- QUIZ TAB -->
            <div id="quiz" class="tab-content">
                <div class="card">
                    <h2>Knowledge Check Quiz<span class="badge">Test Yourself</span></h2>
                    <p>Test your understanding of Python dictionaries and sets!</p>

                    <div class="quiz-container" id="quiz-container">
                        <!-- Quiz questions will be generated by JavaScript -->
                    </div>

                    <div class="score-display" id="score-display" style="display: none;">
                        Your Score: <span id="score">0</span> / <span id="total">10</span>
                        <div style="font-size: 0.8em; margin-top: 10px;">
                            <span id="score-message"></span>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 20px;">
                        <button onclick="resetQuiz()" style="padding: 15px 40px; font-size: 1.1em;">Reset Quiz</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let visualizerDict = {};
        let methodsDict = {
            "name": "Alice",
            "age": 25,
            "city": "NYC",
            "job": "Engineer"
        };
        let hashTable = Array(8).fill(null).map(() => []);
        let quizAnswers = {};

        // Tab switching
        function switchTab(tabName) {
            // Hide all tabs
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));

            // Remove active class from all buttons
            const buttons = document.querySelectorAll('.tab-btn');
            buttons.forEach(btn => btn.classList.remove('active'));

            // Show selected tab
            document.getElementById(tabName).classList.add('active');

            // Add active class to clicked button
            event.target.classList.add('active');

            // Initialize hash table on first load
            if (tabName === 'hashtable' && hashTable.every(bucket => bucket.length === 0)) {
                initHashTable();
            }

            // Initialize quiz on first load
            if (tabName === 'quiz' && document.getElementById('quiz-container').children.length === 0) {
                initQuiz();
            }
        }

        // VISUALIZER FUNCTIONS
        function addToDict() {
            const keyInput = document.getElementById('vis-key');
            const valueInput = document.getElementById('vis-value');
            const key = keyInput.value.trim();
            const value = valueInput.value.trim();

            if (!key) {
                alert('Please enter a key!');
                return;
            }

            visualizerDict[key] = value || 'None';
            updateVisualization();

            // Clear inputs
            keyInput.value = '';
            valueInput.value = '';
            keyInput.focus();
        }

        function removeFromDict() {
            const keyInput = document.getElementById('vis-key');
            const key = keyInput.value.trim();

            if (!key) {
                alert('Please enter a key to remove!');
                return;
            }

            if (key in visualizerDict) {
                delete visualizerDict[key];
                updateVisualization();
                keyInput.value = '';
            } else {
                alert(`Key "${key}" not found in dictionary!`);
            }
        }

        function clearDict() {
            visualizerDict = {};
            updateVisualization();
        }

        function updateVisualization() {
            const visual = document.getElementById('dict-visual');
            const code = document.getElementById('dict-code');
            const length = document.getElementById('dict-length');

            if (Object.keys(visualizerDict).length === 0) {
                visual.innerHTML = '<div style="color: var(--text-muted); width: 100%; text-align: center;">Dictionary is empty. Add some key-value pairs above!</div>';
                code.textContent = 'my_dict = {}';
                length.textContent = 'len(my_dict) = 0';
                return;
            }

            // Create visual representation
            visual.innerHTML = '';
            for (const [key, value] of Object.entries(visualizerDict)) {
                const pair = document.createElement('div');
                pair.className = 'key-value-pair';
                pair.innerHTML = `
                    <div class="key-box">${escapeHtml(key)}</div>
                    <div class="arrow">→</div>
                    <div class="value-box">${escapeHtml(value)}</div>
                `;
                visual.appendChild(pair);
            }

            // Update code representation
            const codeStr = JSON.stringify(visualizerDict, null, 2)
                .replace(/"([^"]+)":/g, '"$1":');
            code.textContent = `my_dict = ${codeStr}`;

            // Update length
            length.textContent = `len(my_dict) = ${Object.keys(visualizerDict).length}`;
        }

        // METHODS FUNCTIONS
        function resetMethodDict() {
            methodsDict = {
                "name": "Alice",
                "age": 25,
                "city": "NYC",
                "job": "Engineer"
            };
            updateMethodDisplay();
            document.getElementById('method-output').textContent = 'Dictionary reset to original values!';
            document.getElementById('method-explanation').textContent = 'Click a method button to see it in action!';
        }

        function updateMethodDisplay() {
            const display = document.getElementById('methods-dict-display');
            const codeStr = JSON.stringify(methodsDict, null, 2);
            display.textContent = `sample_dict = ${codeStr}`;
        }

        function executeMethod(method) {
            const output = document.getElementById('method-output');
            const explanation = document.getElementById('method-explanation');
            const inputArea = document.getElementById('method-input-area');

            let result, explain;

            switch(method) {
                case 'keys':
                    result = `dict_keys([${Object.keys(methodsDict).map(k => `'${k}'`).join(', ')}])`;
                    explain = 'keys() returns a view object containing all the keys in the dictionary. You can convert it to a list with list(dict.keys()).';
                    break;

                case 'values':
                    result = `dict_values([${Object.values(methodsDict).map(v => typeof v === 'string' ? `'${v}'` : v).join(', ')}])`;
                    explain = 'values() returns a view object containing all the values in the dictionary.';
                    break;

                case 'items':
                    const items = Object.entries(methodsDict).map(([k, v]) =>
                        `('${k}', ${typeof v === 'string' ? `'${v}'` : v})`
                    ).join(', ');
                    result = `dict_items([${items}])`;
                    explain = 'items() returns a view of (key, value) tuple pairs. Perfect for looping with: for key, value in dict.items()';
                    break;

                case 'get':
                    result = `sample_dict.get('name') = '${methodsDict.name}'\nsample_dict.get('email') = None\nsample_dict.get('email', 'N/A') = 'N/A'`;
                    explain = 'get(key, default) returns the value for key if it exists, otherwise returns default (or None if no default provided). Safer than dict[key] which raises KeyError.';
                    break;

                case 'pop':
                    if (Object.keys(methodsDict).length === 0) {
                        result = 'Error: Dictionary is empty!';
                        explain = 'Cannot pop from an empty dictionary.';
                    } else {
                        const key = Object.keys(methodsDict)[0];
                        const value = methodsDict[key];
                        delete methodsDict[key];
                        result = `sample_dict.pop('${key}') = ${typeof value === 'string' ? `'${value}'` : value}`;
                        explain = `pop(key) removes the key and returns its value. If key doesn't exist, raises KeyError (or returns default if provided).`;
                        updateMethodDisplay();
                    }
                    break;

                case 'popitem':
                    if (Object.keys(methodsDict).length === 0) {
                        result = 'Error: Dictionary is empty!';
                        explain = 'Cannot pop from an empty dictionary.';
                    } else {
                        const keys = Object.keys(methodsDict);
                        const lastKey = keys[keys.length - 1];
                        const value = methodsDict[lastKey];
                        delete methodsDict[lastKey];
                        result = `sample_dict.popitem() = ('${lastKey}', ${typeof value === 'string' ? `'${value}'` : value})`;
                        explain = 'popitem() removes and returns the last (key, value) pair as a tuple. Raises KeyError if dictionary is empty.';
                        updateMethodDisplay();
                    }
                    break;

                case 'update':
                    methodsDict['department'] = 'IT';
                    methodsDict['age'] = 26;
                    result = `sample_dict.update({'department': 'IT', 'age': 26})\nUpdated dictionary!`;
                    explain = 'update(dict) merges another dictionary into this one. Existing keys are updated, new keys are added.';
                    updateMethodDisplay();
                    break;

                case 'setdefault':
                    const sdValue = methodsDict.country || 'USA';
                    if (!methodsDict.country) {
                        methodsDict.country = 'USA';
                    }
                    result = `sample_dict.setdefault('country', 'USA') = '${sdValue}'`;
                    explain = 'setdefault(key, default) returns the value if key exists. If not, sets key to default and returns it.';
                    updateMethodDisplay();
                    break;

                case 'clear':
                    methodsDict = {};
                    result = 'sample_dict.clear()\nDictionary is now empty: {}';
                    explain = 'clear() removes all items from the dictionary, making it empty.';
                    updateMethodDisplay();
                    break;
            }

            output.textContent = result;
            explanation.textContent = explain;
        }

        // HASH TABLE FUNCTIONS
        function initHashTable() {
            hashTable = Array(8).fill(null).map(() => []);
            renderHashTable();
        }

        function simpleHash(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                hash = (hash * 31 + str.charCodeAt(i)) % 1000000;
            }
            return hash;
        }

        function addToHashTable() {
            const input = document.getElementById('hash-key');
            const key = input.value.trim();

            if (!key) {
                alert('Please enter a key!');
                return;
            }

            const hash = simpleHash(key);
            const bucketIndex = hash % 8;

            // Check if key already exists in bucket
            const bucket = hashTable[bucketIndex];
            if (!bucket.includes(key)) {
                bucket.push(key);
            }

            renderHashTable();

            const calc = document.getElementById('hash-calculation');
            calc.textContent = `Key: "${key}"
Hash value: ${hash}
Bucket index: ${hash} % 8 = ${bucketIndex}
Bucket ${bucketIndex} now contains: [${bucket.map(k => `"${k}"`).join(', ')}]

${bucket.length > 1 ? '⚠️ Collision detected! Multiple keys in same bucket.' : '✓ No collision - key placed in empty bucket.'}`;

            input.value = '';
            input.focus();
        }

        function clearHashTable() {
            hashTable = Array(8).fill(null).map(() => []);
            renderHashTable();
            document.getElementById('hash-calculation').textContent =
                'Enter a key above to see how it\'s hashed and placed in a bucket.\n\nPython\'s hash() function converts keys to integers.\nThe bucket index = hash(key) % number_of_buckets';
        }

        function renderHashTable() {
            const table = document.getElementById('hash-table');
            table.innerHTML = '';

            for (let i = 0; i < hashTable.length; i++) {
                const bucket = document.createElement('div');
                bucket.className = 'hash-bucket';

                const header = document.createElement('div');
                header.className = 'hash-bucket-header';
                header.textContent = `Bucket ${i}`;
                bucket.appendChild(header);

                if (hashTable[i].length === 0) {
                    const empty = document.createElement('div');
                    empty.style.color = 'var(--text-muted)';
                    empty.style.fontSize = '0.85em';
                    empty.style.textAlign = 'center';
                    empty.textContent = 'empty';
                    bucket.appendChild(empty);
                } else {
                    hashTable[i].forEach(key => {
                        const item = document.createElement('div');
                        item.className = 'hash-item';
                        item.textContent = key;
                        bucket.appendChild(item);
                    });
                }

                table.appendChild(bucket);
            }
        }

        // NESTED DICT FUNCTIONS
        function parseNestedDict() {
            const textarea = document.getElementById('nested-json');
            const treeView = document.getElementById('tree-view');
            const accessPaths = document.getElementById('access-paths');

            try {
                const obj = JSON.parse(textarea.value);

                // Generate tree view
                treeView.innerHTML = '';
                const paths = [];
                renderTree(obj, treeView, 'data', paths);

                // Generate access paths
                accessPaths.textContent = 'Example access paths:\n\n' +
                    paths.slice(0, 10).map(p => `${p.path} = ${JSON.stringify(p.value)}`).join('\n');

            } catch (e) {
                treeView.innerHTML = `<div style="color: var(--error-red);">Error parsing JSON: ${e.message}</div>`;
            }
        }

        function renderTree(obj, container, path, paths, indent = 0) {
            if (typeof obj !== 'object' || obj === null) {
                const item = document.createElement('div');
                item.className = 'tree-item';
                item.style.marginLeft = `${indent * 20}px`;

                const valueClass = typeof obj === 'string' ? 'tree-string' : 'tree-number';
                const valueStr = typeof obj === 'string' ? `"${obj}"` : String(obj);
                item.innerHTML = `<span class="${valueClass}">${valueStr}</span>`;
                container.appendChild(item);
                return;
            }

            for (const [key, value] of Object.entries(obj)) {
                const item = document.createElement('div');
                item.className = 'tree-item';
                item.style.marginLeft = `${indent * 20}px`;

                const currentPath = `${path}["${key}"]`;

                if (typeof value === 'object' && value !== null) {
                    item.innerHTML = `<span class="tree-key">"${key}"</span>: {`;
                    container.appendChild(item);
                    renderTree(value, container, currentPath, paths, indent + 1);

                    const closeBrace = document.createElement('div');
                    closeBrace.className = 'tree-item';
                    closeBrace.style.marginLeft = `${indent * 20}px`;
                    closeBrace.textContent = '}';
                    container.appendChild(closeBrace);
                } else {
                    const valueClass = typeof value === 'string' ? 'tree-string' : 'tree-number';
                    const valueStr = typeof value === 'string' ? `"${value}"` : String(value);
                    item.innerHTML = `<span class="tree-key">"${key}"</span>: <span class="${valueClass}">${valueStr}</span>`;
                    container.appendChild(item);
                    paths.push({ path: currentPath, value: value });
                }
            }
        }

        // SET OPERATIONS FUNCTIONS
        function parseSet(str) {
            return new Set(str.split(',').map(s => s.trim()).filter(s => s));
        }

        function setOperation(op) {
            const setAInput = document.getElementById('set-a').value;
            const setBInput = document.getElementById('set-b').value;
            const result = document.getElementById('set-result');
            const visual = document.getElementById('set-visual');

            const a = parseSet(setAInput);
            const b = parseSet(setBInput);

            let output, resultSet, visualHTML;

            switch(op) {
                case 'union':
                    resultSet = new Set([...a, ...b]);
                    output = `A | B = {${[...resultSet].join(', ')}}\n\nUnion contains all elements from both sets.`;
                    visualHTML = generateSetVisual(a, b, resultSet, 'Union: A ∪ B');
                    break;

                case 'intersection':
                    resultSet = new Set([...a].filter(x => b.has(x)));
                    output = `A & B = {${[...resultSet].join(', ')}}\n\nIntersection contains only elements in both sets.`;
                    visualHTML = generateSetVisual(a, b, resultSet, 'Intersection: A ∩ B');
                    break;

                case 'difference':
                    resultSet = new Set([...a].filter(x => !b.has(x)));
                    output = `A - B = {${[...resultSet].join(', ')}}\n\nDifference contains elements in A but not in B.`;
                    visualHTML = generateSetVisual(a, b, resultSet, 'Difference: A - B');
                    break;

                case 'symmetric':
                    const aNotB = new Set([...a].filter(x => !b.has(x)));
                    const bNotA = new Set([...b].filter(x => !a.has(x)));
                    resultSet = new Set([...aNotB, ...bNotA]);
                    output = `A ^ B = {${[...resultSet].join(', ')}}\n\nSymmetric difference contains elements in A or B but not both.`;
                    visualHTML = generateSetVisual(a, b, resultSet, 'Symmetric Diff: A ⊕ B');
                    break;

                case 'subset':
                    const isSubset = [...a].every(x => b.has(x));
                    output = `A ⊆ B: ${isSubset}\n\nA is ${isSubset ? '' : 'NOT '}a subset of B.\n${isSubset ? 'All elements of A are in B.' : 'Some elements of A are not in B.'}`;
                    visualHTML = `<div style="font-size: 1.5em; color: ${isSubset ? 'var(--success-green)' : 'var(--error-red)'};">${isSubset ? '✓ True' : '✗ False'}</div>`;
                    break;

                case 'superset':
                    const isSuperset = [...b].every(x => a.has(x));
                    output = `A ⊇ B: ${isSuperset}\n\nA is ${isSuperset ? '' : 'NOT '}a superset of B.\n${isSuperset ? 'All elements of B are in A.' : 'Some elements of B are not in A.'}`;
                    visualHTML = `<div style="font-size: 1.5em; color: ${isSuperset ? 'var(--success-green)' : 'var(--error-red)'};">${isSuperset ? '✓ True' : '✗ False'}</div>`;
                    break;
            }

            result.textContent = output;
            visual.innerHTML = visualHTML;
        }

        function generateSetVisual(a, b, result, title) {
            const aArr = [...a].sort();
            const bArr = [...b].sort();
            const resArr = [...result].sort();

            return `
                <div style="margin-bottom: 15px; font-weight: 600; color: var(--light-green);">${title}</div>
                <div style="display: flex; justify-content: space-around; flex-wrap: wrap; gap: 20px;">
                    <div>
                        <div style="color: var(--light-purple); margin-bottom: 10px;">Set A</div>
                        <div style="background: var(--primary-green); padding: 15px; border-radius: 8px; min-width: 100px;">
                            {${aArr.join(', ')}}
                        </div>
                    </div>
                    <div>
                        <div style="color: var(--light-purple); margin-bottom: 10px;">Set B</div>
                        <div style="background: var(--accent-purple); padding: 15px; border-radius: 8px; min-width: 100px;">
                            {${bArr.join(', ')}}
                        </div>
                    </div>
                    <div>
                        <div style="color: var(--light-green); margin-bottom: 10px;">Result</div>
                        <div style="background: var(--warning-yellow); color: var(--bg-dark); padding: 15px; border-radius: 8px; min-width: 100px; font-weight: 600;">
                            {${resArr.join(', ')}}
                        </div>
                    </div>
                </div>
            `;
        }

        // QUIZ FUNCTIONS
        const quizQuestions = [
            {
                id: 1,
                question: "What will be the output of: student = {'name': 'Alice'}; print(student['age'])",
                options: [
                    "None",
                    "KeyError",
                    "0",
                    "Empty string"
                ],
                correct: 1,
                explanation: "Accessing a non-existent key with bracket notation raises a KeyError. Use .get() to avoid this."
            },
            {
                id: 2,
                question: "What's the difference between dict['key'] and dict.get('key')?",
                options: [
                    "No difference, they're identical",
                    "dict['key'] is faster",
                    "dict['key'] raises KeyError if key missing, get() returns None",
                    "get() can only be used with string keys"
                ],
                correct: 2,
                explanation: "dict['key'] raises KeyError if the key doesn't exist, while get() returns None (or a default value if provided)."
            },
            {
                id: 3,
                question: "What does {x: x**2 for x in range(3)} produce?",
                options: [
                    "{0: 0, 1: 1, 2: 4}",
                    "[0, 1, 4]",
                    "{0, 1, 4}",
                    "{'x': 'x**2'}"
                ],
                correct: 0,
                explanation: "This is a dictionary comprehension creating a dict with keys 0, 1, 2 mapped to their squares."
            },
            {
                id: 4,
                question: "Which of these CANNOT be used as a dictionary key?",
                options: [
                    "String: 'name'",
                    "Tuple: (1, 2)",
                    "List: [1, 2]",
                    "Integer: 42"
                ],
                correct: 2,
                explanation: "Lists are mutable and cannot be used as dictionary keys. Keys must be immutable (strings, numbers, tuples)."
            },
            {
                id: 5,
                question: "What does dict.items() return?",
                options: [
                    "A list of values",
                    "A list of keys",
                    "A view of (key, value) tuples",
                    "A new dictionary"
                ],
                correct: 2,
                explanation: "dict.items() returns a view object containing (key, value) tuples, perfect for iteration."
            },
            {
                id: 6,
                question: "How do you create an empty set in Python?",
                options: [
                    "{}",
                    "set()",
                    "[]",
                    "set{}"
                ],
                correct: 1,
                explanation: "{} creates an empty dictionary, not a set. Use set() to create an empty set."
            },
            {
                id: 7,
                question: "What's the result of: {1, 2, 3} & {2, 3, 4}",
                options: [
                    "{1, 2, 3, 4}",
                    "{2, 3}",
                    "{1, 4}",
                    "Error"
                ],
                correct: 1,
                explanation: "The & operator performs set intersection, returning only elements present in both sets."
            },
            {
                id: 8,
                question: "Given: d = {'a': {'b': 5}}, how do you safely access the value 5?",
                options: [
                    "d['a']['b']",
                    "d.get('a').get('b')",
                    "d.get('a', {}).get('b')",
                    "Both A and C"
                ],
                correct: 3,
                explanation: "Both work, but C is safer. If 'a' doesn't exist, the first raises KeyError, but C returns None gracefully."
            },
            {
                id: 9,
                question: "What does dict.pop('key') do?",
                options: [
                    "Returns the value and removes the key",
                    "Returns the value without removing",
                    "Removes the key without returning",
                    "Returns the key and value as tuple"
                ],
                correct: 0,
                explanation: "pop(key) removes the key-value pair from the dictionary and returns the value."
            },
            {
                id: 10,
                question: "Which operation is O(1) average time complexity for dictionaries?",
                options: [
                    "Lookup by key",
                    "Insert new key-value pair",
                    "Delete a key",
                    "All of the above"
                ],
                correct: 3,
                explanation: "Dictionaries use hash tables, providing O(1) average time for lookup, insertion, and deletion."
            }
        ];

        function initQuiz() {
            const container = document.getElementById('quiz-container');
            container.innerHTML = '';
            quizAnswers = {};

            quizQuestions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.innerHTML = `
                    <h4>Question ${index + 1}</h4>
                    <p>${q.question}</p>
                    <div class="options">
                        ${q.options.map((opt, i) => `
                            <div class="option" onclick="selectAnswer(${q.id}, ${i})">
                                ${String.fromCharCode(65 + i)}. ${opt}
                            </div>
                        `).join('')}
                    </div>
                    <div class="feedback" id="feedback-${q.id}"></div>
                `;
                container.appendChild(questionDiv);
            });
        }

        function selectAnswer(questionId, optionIndex) {
            const question = quizQuestions.find(q => q.id === questionId);
            const questionDiv = document.querySelector(`#feedback-${questionId}`).parentElement;
            const options = questionDiv.querySelectorAll('.option');
            const feedback = document.getElementById(`feedback-${questionId}`);

            // Remove previous selections
            options.forEach(opt => {
                opt.classList.remove('selected', 'correct', 'incorrect');
            });

            // Mark selected option
            options[optionIndex].classList.add('selected');

            // Store answer
            quizAnswers[questionId] = optionIndex;

            // Show feedback
            if (optionIndex === question.correct) {
                options[optionIndex].classList.add('correct');
                feedback.className = 'feedback show correct';
                feedback.textContent = `✓ Correct! ${question.explanation}`;
            } else {
                options[optionIndex].classList.add('incorrect');
                options[question.correct].classList.add('correct');
                feedback.className = 'feedback show incorrect';
                feedback.textContent = `✗ Incorrect. ${question.explanation}`;
            }

            // Update score
            updateScore();
        }

        function updateScore() {
            const score = Object.entries(quizAnswers).filter(([qId, ans]) => {
                const question = quizQuestions.find(q => q.id === parseInt(qId));
                return ans === question.correct;
            }).length;

            const scoreDisplay = document.getElementById('score-display');
            const scoreSpan = document.getElementById('score');
            const totalSpan = document.getElementById('total');
            const messageSpan = document.getElementById('score-message');

            scoreSpan.textContent = score;
            totalSpan.textContent = quizQuestions.length;

            const percentage = (score / quizQuestions.length) * 100;
            let message = '';
            if (percentage === 100) message = 'Perfect! You\'re a dictionary master!';
            else if (percentage >= 80) message = 'Excellent work! You have a strong grasp of dictionaries.';
            else if (percentage >= 60) message = 'Good job! Review the explanations to improve.';
            else message = 'Keep practicing! Review the basics tab for more help.';

            messageSpan.textContent = message;
            scoreDisplay.style.display = 'block';
        }

        function resetQuiz() {
            quizAnswers = {};
            document.getElementById('score-display').style.display = 'none';
            initQuiz();
        }

        // Utility function
        function escapeHtml(text) {
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#039;'
            };
            return text.replace(/[&<>"']/g, m => map[m]);
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            updateVisualization();
            updateMethodDisplay();
            initHashTable();
        });

        // Allow Enter key for adding to visualizer
        document.addEventListener('DOMContentLoaded', function() {
            const visKey = document.getElementById('vis-key');
            const visValue = document.getElementById('vis-value');
            const hashKey = document.getElementById('hash-key');

            if (visKey && visValue) {
                visKey.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') addToDict();
                });
                visValue.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') addToDict();
                });
            }

            if (hashKey) {
                hashKey.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') addToHashTable();
                });
            }
        });
    </script>
</body>
</html>